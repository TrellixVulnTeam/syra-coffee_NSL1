!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var o=0;o<t.length;o++){var i=t[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function o(e,o,i){return o&&t(e.prototype,o),i&&t(e,i),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[33],{wz2i:function(t,i,c){"use strict";c.r(i),c.d(i,"POSManagementModule",function(){return Ie});var n=c("ofXK"),a=c("tyNb"),r=c("wHSu"),s=c("5+WD"),l=c("fXoL"),d=c("7pgg"),b=c("gbi4"),u=c("XhcP"),f=c("6NWb"),g=c("2jKy"),h=c("3Pt+"),m=c("mCIx"),p=c("1kSV"),v=c("bSwM"),C=c("Qu3c"),y=["category"];function S(e,t){1&e&&(l.Vb(0,"div",3),l.Mc(1," Loading...\n"),l.Ub())}function _(e,t){if(1&e){var o=l.Wb();l.Vb(0,"div",15),l.Vb(1,"button",16),l.gc("click",function(){return l.Ac(o),l.kc(2).sidenav.toggle()}),l.Qb(2,"fa-icon",17),l.Ub(),l.Vb(3,"div"),l.Mc(4),l.Ub(),l.Ub()}if(2&e){var i=l.kc(2);l.Cb(2),l.pc("icon",i.close),l.Cb(2),l.Oc(" ","add"==i.action&&"category"==i.field?"ADD CATEGORY":"EDIT CATEGORY"," ")}}var w=function(e){return{"background-color":e}};function k(e,t){if(1&e){var o=l.Wb();l.Vb(0,"div",31),l.Vb(1,"button",32),l.gc("click",function(){l.Ac(o);var e=t.index;return l.kc(3).ChangeColor(e)}),l.Ub(),l.Ub()}if(2&e){var i=t.$implicit,c=t.index,n=l.kc(3);l.Cb(1),l.pc("ngStyle",l.tc(2,w,i.color))("ngClass",c==n.selectedColorIndex?"outline":"")}}function x(e,t){if(1&e){var o=l.Wb();l.Vb(0,"div",33),l.Vb(1,"mat-checkbox",34),l.gc("change",function(e){l.Ac(o);var i=t.index;return l.kc(3).updateAllComplete(i,e.checked)}),l.Mc(2),l.Ub(),l.Ub()}if(2&e){var i=t.$implicit;l.Cb(1),l.pc("checked",i.is_active)("matTooltip",i.branch_name),l.Cb(1),l.Oc(" ",i.branch_name," ")}}function V(e,t){if(1&e&&(l.Vb(0,"form",18),l.Vb(1,"div",19),l.Vb(2,"div",20),l.Vb(3,"label"),l.Mc(4,"Name"),l.Ub(),l.Ub(),l.Qb(5,"input",21,22),l.Ub(),l.Vb(7,"div",23),l.Vb(8,"div",24),l.Vb(9,"label"),l.Mc(10,"Color"),l.Ub(),l.Ub(),l.Qb(11,"div",25),l.Ub(),l.Vb(12,"div",26),l.Kc(13,k,2,4,"div",27),l.Ub(),l.Vb(14,"div",23),l.Vb(15,"div",28),l.Vb(16,"label"),l.Mc(17,"Branch"),l.Ub(),l.Ub(),l.Qb(18,"div",25),l.Ub(),l.Vb(19,"div",29),l.Kc(20,x,3,3,"div",30),l.Ub(),l.Ub()),2&e){var o=l.kc(2);l.pc("formGroup",o.categoryForm),l.Cb(5),l.qc("value",o.parentParams.get("toAddCategory")?o.parentParams.get("category"):""),l.Cb(8),l.pc("ngForOf",o.colors),l.Cb(7),l.pc("ngForOf",o.branches)}}function P(e,t){1&e&&l.Qb(0,"i",35)}function U(e,t){1&e&&l.Qb(0,"i",35)}function O(e,t){if(1&e){var o=l.Wb();l.Vb(0,"button",36),l.gc("click",function(){return l.Ac(o),l.kc(2).deleteAction()}),l.Kc(1,U,1,0,"i",12),l.Vb(2,"span"),l.Mc(3,"DELETE ITEM"),l.Ub(),l.Ub()}if(2&e){var i=l.kc(2);l.Cb(1),l.pc("ngIf",1==i.isLoadingDelete)}}function I(e,t){if(1&e){var o=l.Wb();l.Vb(0,"div",4),l.Kc(1,_,5,2,"div",5),l.Vb(2,"div",6),l.Kc(3,V,21,4,"form",7),l.Ub(),l.Vb(4,"div",8),l.Vb(5,"div",9),l.Vb(6,"div",10),l.Vb(7,"button",11),l.gc("click",function(){l.Ac(o);var e=l.kc();return"edit"==e.action?e.editAction():e.saveAction()}),l.Kc(8,P,1,0,"i",12),l.Vb(9,"span"),l.Mc(10,"SAVE"),l.Ub(),l.Ub(),l.Ub(),l.Vb(11,"div",13),l.Kc(12,O,4,1,"button",14),l.Ub(),l.Ub(),l.Ub(),l.Ub()}if(2&e){var i=l.kc();l.Cb(1),l.pc("ngIf","category"==i.field),l.Cb(2),l.pc("ngIf","category"==i.field),l.Cb(5),l.pc("ngIf",1==i.isLoadingSave),l.Cb(4),l.pc("ngIf","edit"==i.action&&"category"==i.field)}}var M,A=((M=function(){function t(o,i,c,n,a){var r=this;e(this,t),this.router=o,this.activatedRoute=i,this.apiServices=c,this.commonService=n,this.modalService=a,this.isLoadingDelete=!1,this.isLoadingSave=!1,this.branches=[],this.allComplete=!1,this.selectedValue="10.00%",this.isLoading=!0,this.categoryForm=new h.g({category:new h.d("",h.u.required)}),this.close=g.b,this.category_id="",this.selectedColorIndex=0,this.colors=[{color:"#4751c9"},{color:"#45a9ea"},{color:"#cc6ae3"},{color:"#dea766"},{color:"#7c52cb"},{color:"#16a186"}],this.commonService.resetForms.subscribe(function(){r.initPopup(null)})}return o(t,[{key:"ngOnInit",value:function(){var e=this;this.parentParams=this.activatedRoute.snapshot.paramMap,this.commonService.categoryEmitter.subscribe(function(t){e.parentParams.get("category")?e.initQueryParams():e.initPopup(t)}),this.get_branches()}},{key:"updateAllComplete",value:function(e,t){this.branches[e].is_active=t,this.allComplete=null!=this.branches&&this.branches.every(function(e){return e.is_active})}},{key:"initPopup",value:function(e){this.category_id=e,e?this.getCategoryDetails():(this.categoryForm.setValue({category:""}),this.selectedColorIndex=0,this.init_branches())}},{key:"getCategoryDetails",value:function(){var e=this;this.isLoading=!0,this.apiServices.getCategories({id:this.category_id}).subscribe(function(t){var o,i;e.isLoading=!1,e.categoryForm.setValue({category:null===(i=null===(o=t.data)||void 0===o?void 0:o.category)||void 0===i?void 0:i.category_name}),e.selectedColorIndex=e.colors.findIndex(function(e){return e.color===t.data.category.color}),e.init_branches(),t.data.category.available_branches.forEach(function(t){var o=e.branches.findIndex(function(e){return e._id===t});e.branches[o].is_active=!0}),e.isLoading=!1})}},{key:"get_branches",value:function(){var e=this;this.apiServices.get_branch({}).subscribe(function(t){t.success?(e.branches=t.data.branch_list,e.branches.forEach(function(e){e.is_active=!1})):e.commonService.showAlert(t.message)})}},{key:"saveAction",value:function(){this.categoryForm.valid?this.commonService.isAnyBranchSelected(this.branches)?this.saveCategory():this.commonService.showAlert("select atleast any one branch"):this.commonService.showAlert("Category name is mandatory")}},{key:"saveCategory",value:function(){var e=this;this.isLoadingSave=!0;var t=this.generateObject();this.apiServices.addCategory(t).subscribe(function(t){e.isLoadingSave=!1,t.success?null!=e.parentParams.get("category")?e.redirectToCatelouge():(e.commonService.showAlert(t.message),e.commonService.commonEmitter.emit(),e.sidenav.close()):e.commonService.showAlert(t.message)})}},{key:"editAction",value:function(){var e=this;this.isLoadingSave=!0;var t=this.generateObject();t.id=this.category_id,this.apiServices.updateCategory(t).subscribe(function(t){e.commonService.showAlert(t.message),e.isLoadingSave=!1,t.success&&(e.sidenav.close(),e.commonService.commonEmitter.emit())})}},{key:"deleteAction",value:function(){var e=this;this.modalService.open(m.a).result.then(function(){e.isLoadingDelete=!0,e.apiServices.deleteCategory({id:e.category_id}).subscribe(function(t){e.commonService.showAlert(t.message),e.isLoadingDelete=!1,t.success&&(e.sidenav.close(),e.commonService.commonEmitter.emit())})},function(){})}},{key:"getSelectedBranches",value:function(){var e=[];return this.branches.forEach(function(t){t.is_active&&e.push(t._id)}),e}},{key:"ChangeColor",value:function(e){this.selectedColorIndex=e}},{key:"generateObject",value:function(){var e,t=Object();return t.color=this.colors[this.selectedColorIndex].color,t.category_name=this.categoryForm.controls.category.value,t.available_branches=this.getSelectedBranches().join(","),t.is_Active=!0,t.created_by=JSON.parse(null!==(e=localStorage.getItem("syra_admin"))&&void 0!==e?e:"").data._id,t}},{key:"redirectToCatelouge",value:function(){var e=this.getAllParams();this.router.navigate(["/configurations/catalouge",e])}},{key:"getAllParams",value:function(){var e,t,o;return null===(t=null===(e=this.activatedRoute)||void 0===e?void 0:e.parent)||void 0===t||t.params.subscribe(function(e){o=e}),o}},{key:"init_branches",value:function(){this.branches.forEach(function(e){e.is_active=!1}),this.isLoading=!1}},{key:"initQueryParams",value:function(){console.log(this.parentParams),this.categoryForm.setValue({category:this.parentParams.get("category")})}}]),t}()).\u0275fac=function(e){return new(e||M)(l.Pb(a.d),l.Pb(a.a),l.Pb(d.a),l.Pb(b.a),l.Pb(p.c))},M.\u0275cmp=l.Jb({type:M,selectors:[["app-category-form"]],viewQuery:function(e,t){var o;1&e&&l.Rc(y,!0),2&e&&l.wc(o=l.hc())&&(t.categoryName=o.first)},inputs:{sidenav:"sidenav",field:"field",action:"action",parentParams:"parentParams"},decls:3,vars:2,consts:[["rel","stylesheet","href",l.Qc("https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css")],["class","h-80","class","bg-white d-flex align-items-center justify-content-center alpha50 content position-absolute left-0 top-0 w-100 h100vh",4,"ngIf"],["class","w-100",4,"ngIf"],[1,"bg-white","d-flex","align-items-center","justify-content-center","alpha50","content","position-absolute","left-0","top-0","w-100","h100vh"],[1,"w-100"],["class","title text-center sticky-top",4,"ngIf"],[1,"h75vh"],["class","mb-5",3,"formGroup",4,"ngIf"],[1,"h25vh"],[1,"row","mx-0","justify-content-center","align-items-center"],[1,"col-12","py-3","d-flex","justify-content-center"],["type","submit",1,"btn","text-white","btn-sm",3,"click"],["class","fa fa-spinner fa-spin mr-3",4,"ngIf"],[1,"col-12","pb-3","d-flex","justify-content-center"],["type","button","class","btn-danger",3,"click",4,"ngIf"],[1,"title","text-center","sticky-top"],[1,"bg-transparent","border-0","form-close-btn","position-absolute",3,"click"],[3,"icon"],[1,"mb-5",3,"formGroup"],[1,"form-group","mx-4"],[1,"text-left","col-12","mx-0","mt-4","p-0"],["type","text","formControlName","category","id","username","placeholder","Enter name","autocomplete","off",1,"form-control","w-100",3,"value"],["category",""],[1,"form-group","mx-3"],[1,"text-left","col-12","mx-2","mt-2","p-0"],[1,"line","mx-2","mt-2"],[1,"row","ml-4","mx-1","p-0"],["class","col-2 mx-0 p-0",4,"ngFor","ngForOf"],[1,"text-left","col-12","mx-2","mt-4","p-0"],[1,"form-row","ml-4","p-0"],["class","col-6 mx-0 p-0 ",4,"ngFor","ngForOf"],[1,"col-2","mx-0","p-0"],["type","button",1,"circle",3,"ngStyle","ngClass","click"],[1,"col-6","mx-0","p-0"],["disableRipple","","matTooltipClass","tooltip-list",1,"check","w-100",3,"checked","matTooltip","change"],[1,"fa","fa-spinner","fa-spin","mr-3"],["type","button",1,"btn-danger",3,"click"]],template:function(e,t){1&e&&(l.Qb(0,"link",0),l.Kc(1,S,2,0,"div",1),l.Kc(2,I,13,4,"div",2)),2&e&&(l.Cb(1),l.pc("ngIf",t.isLoading),l.Cb(1),l.pc("ngIf",!t.isLoading))},directives:[n.l,f.a,h.w,h.n,h.h,h.c,h.m,h.f,n.k,n.m,n.j,v.a,C.a],styles:['@import url("https://fonts.googleapis.com/css2?family=Open+Sans:ital,wght@0,300;0,400;0,600;0,700;0,800;1,300;1,400;1,600;1,700;1,800&display=swap");@font-face{font-family:HelveticaNeue-Bold;font-style:normal;font-weight:400;src:local("HelveticaNeue-Bold"),url("Helvetica Neu Bold.61acdee6f288cddccf23.ttf") format("ttf")}@font-face{font-family:CerebriSans-Bold;font-style:normal;font-weight:400;src:local("CerebriSans-Bold"),url(CerebriSans-Bold.b28d46a00415bec63bba.ttf) format("ttf");src:local("CerebriSans-Bold"),url(CerebriSans-Bold.f48e05c76db5e6bd676c.eot) format("eot");src:local("CerebriSans-Bold"),url(CerebriSans-Bold.1b8ded389d0dc424b19b.svg) format("svg");src:local("CerebriSans-Bold"),url(CerebriSans-Bold.1b4400b13ebd711dd3e8.woff) format("woff");src:local("CerebriSans-Bold"),url(CerebriSans-Bold.1b89f96de9e78fd26a7f.woff2) format("woff2")}@font-face{font-family:\\ CerebriSans-semibold;font-style:normal;font-weight:400;src:local("CerebriSans-Bold"),url(CerebriSans-SemiBold.dcda3674ac76f4e31e87.ttf) format("ttf");src:local("CerebriSans-Bold"),url(CerebriSans-SemiBold.8c2b25fda64ba8de398a.eot) format("eot");src:local("CerebriSans-Bold"),url(CerebriSans-SemiBold.d4680810013431cbe6c7.svg) format("svg");src:local("CerebriSans-Bold"),url(CerebriSans-SemiBold.700f305197d6f163d348.woff) format("woff");src:local("CerebriSans-Bold"),url(CerebriSans-SemiBold.29097270d5f0e9003fd4.woff2) format("woff2")}@font-face{font-family:CerebriSans-Light;font-style:normal;font-weight:400;src:local("CerebriSans-Bold"),url(CerebriSans-Light.ddb81c4966caddeb5524.ttf) format("ttf");src:local("CerebriSans-Bold"),url(CerebriSans-Light.1e4f0f37d8ed20e51e27.eot) format("eot");src:local("CerebriSans-Bold"),url(CerebriSans-Light.efa3b6fb5acdd7fa23ab.svg) format("svg");src:local("CerebriSans-Bold"),url(CerebriSans-Light.650c547e86d77193b2d0.woff) format("woff");src:local("CerebriSans-Bold"),url(CerebriSans-Light.93b3eb2ec96f14eca31e.woff2) format("woff2")}@font-face{font-family:CerebriSans-Regular;font-style:normal;font-weight:400;src:local("CerebriSans-Regular"),url(CerebriSans-Regular.da1eaafe42c93475b338.ttf) format("ttf");src:local("CerebriSans-Regular"),url(CerebriSans-Regular.ccb7af1c430bd224cb88.eot) format("eot");src:local("CerebriSans-Regular"),url(CerebriSans-Regular.8a18b1b14a235efe141d.svg) format("svg");src:local("CerebriSans-Regular"),url(CerebriSans-Regular.81bf15fd01ef8a22e704.woff) format("woff");src:local("CerebriSans-Regular"),url(CerebriSans-Regular.a9f198f5da5b6fe108ed.woff2) format("woff2")}input[_ngcontent-%COMP%]{border-radius:0!important}input[_ngcontent-%COMP%], input[_ngcontent-%COMP%]:focus{border:1px solid #4a4a4a;box-shadow:0 3px 6px 0 rgba(0,0,0,.16);background-color:#f7f7f7}input[_ngcontent-%COMP%]:focus{outline:none}input[_ngcontent-%COMP%], input[_ngcontent-%COMP%]::-webkit-input-placeholder{font-size:16px;font-weight:400;font-family:cerebrisans-Regular}.line[_ngcontent-%COMP%]{height:1px;width:100%;background-color:#4a4a4a}.circle[_ngcontent-%COMP%]{border-radius:50%;height:2em;width:2em;outline:none;border:none}.outline[_ngcontent-%COMP%]{border:2.5px solid}.mat-checkbox-indeterminate[_ngcontent-%COMP%]   .mat-checkbox-background[_ngcontent-%COMP%],   .mat-checkbox-checked.mat-accent .mat-checkbox-background{background-color:#fff!important;border:1px solid!important}  .mat-checkbox-inner-container{width:25px!important;height:25px!important;border-radius:0}  .mat-checkbox-checkmark-path{stroke:#000!important}.btn[_ngcontent-%COMP%]{background-color:#679187;border:none;border-radius:0;box-shadow:0 3px 6px 0 rgba(0,0,0,.16);width:240px;height:40px}.btn[_ngcontent-%COMP%]:focus{border:none;box-shadow:none}  .check.mat-checkbox .mat-checkbox-ripple{width:0;height:0}.btn-danger[_ngcontent-%COMP%]{width:240px;height:40px;border:none;border-radius:0;box-shadow:0 3px 6px 0 rgba(0,0,0,.16)}.btn-danger[_ngcontent-%COMP%]:focus{outline:none;box-shadow:none}.mat-option[_ngcontent-%COMP%]:hover:not(.mat-option-disabled){background:rgba(0,0,0,.04);color:#679187}  .bg_color .mat-drawer-inner-container{background-color:#f0f0f0!important}  .check .mat-checkbox-layout{width:100%}  .check .mat-checkbox-layout .mat-checkbox-label{width:100%;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;font-family:CerebriSans-Regular;font-size:15px}']}),M),B=c("kmnG"),L=c("d3UM"),D=c("FKr1");function R(e,t){1&e&&(l.Vb(0,"div",3),l.Mc(1," Loading...\n"),l.Ub())}function F(e,t){if(1&e){var o=l.Wb();l.Vb(0,"div",15),l.Vb(1,"button",16),l.gc("click",function(){return l.Ac(o),l.kc(2).toggle()}),l.Qb(2,"fa-icon",17),l.Ub(),l.Mc(3),l.Ub()}if(2&e){var i=l.kc(2);l.Cb(2),l.pc("icon",i.close),l.Cb(1),l.Oc(" ","add"==i.action&&"product"==i.field?"ADD PRODUCT":"EDIT PRODUCT"," ")}}function E(e,t){if(1&e&&(l.Vb(0,"mat-option",40),l.Mc(1),l.Ub()),2&e){var o=t.$implicit;l.qc("value",o._id),l.Cb(1),l.Oc(" ",o.iva_percent,"% ")}}function j(e,t){if(1&e){var o=l.Wb();l.Vb(0,"div",41),l.Vb(1,"mat-checkbox",42),l.gc("change",function(e){l.Ac(o);var i=t.index;return l.kc(3).updateAllComplete(i,e.checked,0)}),l.Mc(2),l.Ub(),l.Ub()}if(2&e){var i=t.$implicit;l.Cb(1),l.pc("checked",i.is_active),l.Cb(1),l.Oc(" ",i.category_name," ")}}var K=function(e){return{"background-color":e}};function Q(e,t){if(1&e){var o=l.Wb();l.Vb(0,"div",43),l.Vb(1,"button",44),l.gc("click",function(){l.Ac(o);var e=t.index;return l.kc(3).ChangeColor(e)}),l.Ub(),l.Ub()}if(2&e){var i=t.$implicit,c=t.index,n=l.kc(3);l.Cb(1),l.pc("ngStyle",l.tc(2,K,i))("ngClass",c==n.selectedColorIndex?"outline":"")}}function N(e,t){if(1&e){var o=l.Wb();l.Vb(0,"div",41),l.Vb(1,"mat-checkbox",42),l.gc("change",function(e){l.Ac(o);var i=t.index;return l.kc(3).updateAllComplete(i,e.checked,1)}),l.Mc(2),l.Ub(),l.Ub()}if(2&e){var i=t.$implicit;l.Cb(1),l.pc("checked",i.is_active),l.Cb(1),l.Oc(" ",i.branch_name," ")}}function T(e,t){if(1&e){var o=l.Wb();l.Vb(0,"form",18),l.Vb(1,"div",19),l.Vb(2,"div",20),l.Vb(3,"label"),l.Mc(4,"Name"),l.Ub(),l.Ub(),l.Qb(5,"input",21),l.Ub(),l.Vb(6,"div",19),l.Vb(7,"div",22),l.Vb(8,"label"),l.Mc(9,"Price"),l.Ub(),l.Ub(),l.Vb(10,"div",23),l.Qb(11,"input",24),l.Qb(12,"fa-icon",25),l.Ub(),l.Ub(),l.Vb(13,"div",19),l.Vb(14,"div",22),l.Vb(15,"label"),l.Mc(16,"Beans Value"),l.Ub(),l.Ub(),l.Vb(17,"div",23),l.Qb(18,"input",26),l.Qb(19,"fa-icon",25),l.Ub(),l.Ub(),l.Vb(20,"div",19),l.Vb(21,"div",22),l.Vb(22,"label"),l.Mc(23,"VAT"),l.Ub(),l.Ub(),l.Vb(24,"mat-form-field",27),l.Vb(25,"mat-select",28,29),l.gc("valueChange",function(e){return l.Ac(o),l.kc(2).selectedValue=e}),l.Kc(27,E,2,2,"mat-option",30),l.Ub(),l.Ub(),l.Ub(),l.Vb(28,"div",31),l.Vb(29,"div",32),l.Vb(30,"label"),l.Mc(31,"Category"),l.Ub(),l.Ub(),l.Qb(32,"div",33),l.Ub(),l.Vb(33,"div",34),l.Kc(34,j,3,2,"div",35),l.Ub(),l.Vb(35,"div",31),l.Vb(36,"div",32),l.Vb(37,"label"),l.Mc(38,"Color"),l.Ub(),l.Ub(),l.Qb(39,"div",33),l.Ub(),l.Vb(40,"div",36),l.Kc(41,Q,2,4,"div",37),l.Ub(),l.Vb(42,"div",38),l.Vb(43,"div",39),l.Vb(44,"label"),l.Mc(45,"Branch"),l.Ub(),l.Ub(),l.Qb(46,"div",33),l.Ub(),l.Vb(47,"div",34),l.Kc(48,N,3,2,"div",35),l.Ub(),l.Ub()}if(2&e){var i=l.kc(2);l.pc("formGroup",i.ProductForm),l.Cb(12),l.pc("icon",i.faEuroSign),l.Cb(7),l.pc("icon",i.faBolt),l.Cb(6),l.pc("value",i.selectedValue),l.Cb(2),l.pc("ngForOf",i.ivas),l.Cb(7),l.pc("ngForOf",i.categories),l.Cb(7),l.pc("ngForOf",i.colors),l.Cb(7),l.pc("ngForOf",i.branches)}}function W(e,t){1&e&&l.Qb(0,"i",45)}function z(e,t){1&e&&l.Qb(0,"i",45)}function J(e,t){if(1&e){var o=l.Wb();l.Vb(0,"div",4),l.Kc(1,F,4,2,"div",5),l.Vb(2,"div",6),l.Kc(3,T,49,8,"form",7),l.Ub(),l.Vb(4,"div",8),l.Vb(5,"div",9),l.Vb(6,"div",10),l.Vb(7,"button",11),l.gc("click",function(){l.Ac(o);var e=l.kc();return"edit"==e.action?e.saveAction(!0):e.saveAction()}),l.Kc(8,W,1,0,"i",12),l.Vb(9,"span"),l.Mc(10,"SAVE"),l.Ub(),l.Ub(),l.Ub(),l.Vb(11,"div",13),l.Vb(12,"button",14),l.gc("click",function(){return l.Ac(o),l.kc().deleteAction()}),l.Kc(13,z,1,0,"i",12),l.Vb(14,"span"),l.Mc(15,"DELETE ITEM"),l.Ub(),l.Ub(),l.Ub(),l.Ub(),l.Ub(),l.Ub()}if(2&e){var i=l.kc();l.Cb(1),l.pc("ngIf","product"==i.field),l.Cb(2),l.pc("ngIf","product"==i.field),l.Cb(5),l.pc("ngIf",1==i.isLoadingSave),l.Cb(5),l.pc("ngIf",1==i.isLoadingDelete)}}var $,q=(($=function(){function t(o,i,c){var n=this;e(this,t),this.apiService=o,this.commonService=i,this.modalService=c,this.close=g.b,this.branches=[],this.colors=["#4751c9","#45a9ea","#cc6ae3","#dea766","#7c52cb","#16a186"],this.faEuroSign=r.n,this.faBolt=r.e,this.selectedColorIndex=0,this.categories=[],this.ivas=[],this.product_id="",this.selectedValue="",this.isLoadingSave=!1,this.isLoadingDelete=!1,this.isLoading=!0,this.ProductForm=new h.g({product_name:new h.d("",h.u.required),price:new h.d("",h.u.required),vat:new h.d(this.selectedValue,h.u.required),beanValue:new h.d("",h.u.required)}),this.commonService.resetForms.subscribe(function(){n.initForm()})}return o(t,[{key:"ngOnInit",value:function(){var e=this;this.get_iva(),this.get_categories(),this.get_Branches(),this.commonService.productEmitter.subscribe(function(t){e.product_id=t,console.log(e.product_id),e.product_id?e.get_product_details():e.initForm()})}},{key:"toggle",value:function(){this.sidenav.toggle()}},{key:"ChangeColor",value:function(e){this.selectedColorIndex=e}},{key:"initForm",value:function(){var e;this.selectedValue=null===(e=this.ivas[0])||void 0===e?void 0:e._id,this.ProductForm.setValue({product_name:"",price:"",vat:this.selectedValue||"",beanValue:""}),this.init_branches(),this.init_categories(),this.selectedColorIndex=0,this.isLoading=!1}},{key:"get_product_details",value:function(){var e=this;this.isLoading=!0,this.apiService.getProducts({id:this.product_id}).subscribe(function(t){e.selectedValue=t.data.products.iva,e.ProductForm.setValue({product_name:t.data.products.product_name,price:t.data.products.price,vat:e.selectedValue,beanValue:t.data.products.beanValue||""}),e.selectedColorIndex=e.colors.findIndex(function(e){return e===t.data.products.color}),e.init_branches(),e.init_categories(),t.data.products.categories.forEach(function(t){var o=e.categories.findIndex(function(e){return e._id===t});e.categories[o].is_active=!0}),t.data.products.available_branches.forEach(function(t){var o=e.branches.findIndex(function(e){return e._id===t});e.branches[o].is_active=!0}),e.isLoading=!1})}},{key:"init_branches",value:function(){this.branches.forEach(function(e){e.is_active=!1})}},{key:"init_categories",value:function(){this.categories.forEach(function(e){e.is_active=!1})}},{key:"saveAction",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.createRequestObject();this.ProductForm.valid?this.commonService.isAnycategorySelected(this.categories)?this.commonService.isAnyBranchSelected(this.branches)?e?this.edit_product(t):this.save_product(t):this.commonService.showAlert("select atleast any one branch"):this.commonService.showAlert("select atleast any one category"):this.commonService.showAlert("Product name, price and vat percentage is mandatory")}},{key:"deleteAction",value:function(){var e=this;this.modalService.open(m.a).result.then(function(){e.isLoadingDelete=!0,e.apiService.deleteproduct({id:e.product_id}).subscribe(function(t){e.isLoadingDelete=!1,e.commonService.showAlert(t.message),t.success&&(e.commonService.commonEmitter.emit(),e.sidenav.close())})},function(){})}},{key:"save_product",value:function(e){var t=this;this.isLoadingSave=!0,this.apiService.addProduct(e).subscribe(function(e){t.isLoadingSave=!1,e.success?(t.commonService.showAlert(e.message),t.commonService.commonEmitter.emit(),t.sidenav.close()):t.commonService.showAlert(e.message)})}},{key:"edit_product",value:function(e){var t=this;e.id=this.product_id,this.isLoadingSave=!0,this.apiService.updateProduct(e).subscribe(function(e){t.isLoadingSave=!1,t.commonService.showAlert(e.message),e.success&&(t.commonService.commonEmitter.emit(),t.sidenav.close())})}},{key:"createRequestObject",value:function(){var e,t=this,o=new Object;o.product_name=this.ProductForm.controls.product_name.value,o.price=this.ProductForm.controls.price.value.replace(",",".").trim();var i=this.ivas.findIndex(function(e){return e._id==t.selectedValue}),c=Number(this.ProductForm.controls.price.value.replace(",",".").trim())*this.ivas[i].iva_percent/(100+this.ivas[i].iva_percent);return o.price_with_iva=(Number(this.ProductForm.controls.price.value.replace(",",".").trim())-c).toFixed(2),o.iva=this.ProductForm.controls.vat.value,o.beanValue=this.ProductForm.controls.beanValue.value,o.categories=this.get_selected_category().join(","),o.available_branches=this.get_selected_branches().join(","),o.color=this.colors[this.selectedColorIndex],o.created_by=JSON.parse(null!==(e=localStorage.getItem("syra_admin"))&&void 0!==e?e:"").data._id,o}},{key:"get_Branches",value:function(){var e=this;this.apiService.get_branch({}).subscribe(function(t){t.data.branch_list.forEach(function(e){e.is_active=!1}),e.branches=t.data.branch_list})}},{key:"get_categories",value:function(){var e=this;this.apiService.getCategories({}).subscribe(function(t){t.data.category.forEach(function(e){e.is_active=!1}),e.categories=t.data.category})}},{key:"get_iva",value:function(){var e=this;this.apiService.getIVA({}).subscribe(function(t){e.ivas=e.commonService.sort(t.data.ivalist),e.selectedValue=e.ivas[0]._id,e.ProductForm.setValue({product_name:"",price:"",vat:e.selectedValue,beanValue:""})})}},{key:"updateAllComplete",value:function(e,t,o){0==o?this.categories[e].is_active=t:this.branches[e].is_active=t}},{key:"get_selected_branches",value:function(){var e=[];return this.branches.forEach(function(t){t.is_active&&e.push(t._id)}),e}},{key:"get_selected_category",value:function(){var e=[];return this.categories.forEach(function(t){t.is_active&&e.push(t._id)}),e}}]),t}()).\u0275fac=function(e){return new(e||$)(l.Pb(d.a),l.Pb(b.a),l.Pb(p.c))},$.\u0275cmp=l.Jb({type:$,selectors:[["app-product-form"]],inputs:{sidenav:"sidenav",field:"field",action:"action"},decls:3,vars:2,consts:[["rel","stylesheet","href",l.Qc("https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css")],["class","h-80","class","bg-white d-flex align-items-center justify-content-center alpha50 content position-absolute left-0 top-0 w-100 h100vh",4,"ngIf"],["class","w-100",4,"ngIf"],[1,"bg-white","d-flex","align-items-center","justify-content-center","alpha50","content","position-absolute","left-0","top-0","w-100","h100vh"],[1,"w-100"],["class","title text-center sticky-top",4,"ngIf"],[1,"h75vh"],["class","h-100",3,"formGroup",4,"ngIf"],[1,"h25vh"],[1,"row","mx-0","justify-content-center","align-items-center"],[1,"col-12","py-3","d-flex","justify-content-center"],["type","submit",1,"btn","text-white","btn-sm",3,"click"],["class","fa fa-spinner fa-spin mr-3",4,"ngIf"],[1,"col-12","pb-3","d-flex","justify-content-center"],["type","button",1,"btn-danger",3,"click"],[1,"title","text-center","sticky-top"],[1,"bg-transparent","border-0","form-close-btn","position-absolute",3,"click"],[3,"icon"],[1,"h-100",3,"formGroup"],[1,"form-group","mx-4"],[1,"text-left","col-12","mx-0","mt-4","p-0"],["type","text","id","username","placeholder","Espresso","formControlName","product_name","autocomplete","off",1,"form-control","w-100"],[1,"text-left","col-12","mx-0","mt-1","p-0"],[1,"col-12","px-0","w-100"],["type","text","id","username","placeholder","EUR","autocomplete","off","formControlName","price",1,"form-control","w-100"],[1,"position-absolute","text-dark",2,"right","20px","top","35%",3,"icon"],["type","text","id","username","placeholder","Beans","autocomplete","off","formControlName","beanValue",1,"form-control","w-100"],["appearance","outline",1,"w-100","form-feild","shadow-sm"],["name","iva","formControlName","vat",3,"value","valueChange"],["dropDown",""],[3,"value",4,"ngFor","ngForOf"],[1,"form-group","mx-3"],[1,"text-left","col-12","mx-2","mt-2","p-0"],[1,"line","mx-2","mt-2"],[1,"form-row","ml-4","p-0"],["class","col-6 mx-0 p-0 ",4,"ngFor","ngForOf"],[1,"row","mx-1","ml-4","p-0"],["class","col-2 mx-0 p-0",4,"ngFor","ngForOf"],[1,"form-group","mx-3","mt-4"],[1,"text-left","col-12","mx-2","p-0"],[3,"value"],[1,"col-6","mx-0","p-0"],[1,"check",2,"font-family","CerebriSans-Regular","font-size","16px",3,"checked","change"],[1,"col-2","mx-0","p-0"],["type","button",1,"circle",3,"ngStyle","ngClass","click"],[1,"fa","fa-spinner","fa-spin","mr-3"]],template:function(e,t){1&e&&(l.Qb(0,"link",0),l.Kc(1,R,2,0,"div",1),l.Kc(2,J,16,4,"div",2)),2&e&&(l.Cb(1),l.pc("ngIf",t.isLoading),l.Cb(1),l.pc("ngIf",!t.isLoading))},directives:[n.l,f.a,h.w,h.n,h.h,h.c,h.m,h.f,B.b,L.a,n.k,D.l,v.a,n.m,n.j],styles:["input[_ngcontent-%COMP%]{border-radius:0!important}input[_ngcontent-%COMP%], input[_ngcontent-%COMP%]:focus{border:1px solid #4a4a4a;box-shadow:0 3px 6px 0 rgba(0,0,0,.16);background-color:#f7f7f7}input[_ngcontent-%COMP%]:focus{outline:none}input[_ngcontent-%COMP%], input[_ngcontent-%COMP%]::-webkit-input-placeholder{font-size:16px;font-weight:400;font-family:cerebrisans-Regular}  .check.mat-checkbox .mat-checkbox-ripple{width:0;height:0}.line[_ngcontent-%COMP%]{height:.1px;width:100%;padding:.5px;background-color:#4a4a4a}.circle[_ngcontent-%COMP%]{border-radius:50%;height:2em;width:2em;outline:none;border:none}.form-row[_ngcontent-%COMP%]{width:-webkit-min-content;width:-moz-min-content;width:min-content;overflow-x:hidden}.check[_ngcontent-%COMP%]{margin-right:12em}.mat-checkbox-indeterminate[_ngcontent-%COMP%]   .mat-checkbox-background[_ngcontent-%COMP%],   .mat-checkbox-checked.mat-accent .mat-checkbox-background{background-color:#fff!important;border:1px solid!important}.outline[_ngcontent-%COMP%]{border:2.5px solid}.right-20[_ngcontent-%COMP%]{right:20px}.top-10[_ngcontent-%COMP%]{top:9px}.form-feild[_ngcontent-%COMP%]{border:1px solid;font-weight:400;font-family:cerebrisans-Regular;background-color:#f7f7f7}  .mat-checkbox-inner-container{width:25px!important;height:25px!important;border-radius:0}  .mat-checkbox-checkmark-path{stroke:#000!important}.btn[_ngcontent-%COMP%]{background-color:#679187;border:none;border-radius:0;box-shadow:0 3px 6px 0 rgba(0,0,0,.16);min-width:240px;min-height:40px}.btn[_ngcontent-%COMP%]:focus{border:none;box-shadow:none}.btn-danger[_ngcontent-%COMP%]{position:-webkit-sticky;position:sticky;bottom:17px;left:45px;right:50px;min-width:240px;min-height:40px;border-style:none;border-radius:0}.btn-danger[_ngcontent-%COMP%]:focus{box-shadow:none;outline:none}  .form-feild .mat-form-field-flex{height:30px!important}  .form-feild .mat-form-field-infix{border-top:unset!important}  .form-feild .mat-form-field-wrapper{height:30px!important;background-color:#f7f7f7}  .form-feild .mat-form-field-appearance-outline .mat-form-field-infix{padding:0!important}  .bg_color .mat-drawer-inner-container{background-color:#f0f0f0!important}"]}),$),G=c("+0xr"),H=c("1jcm"),X=c("NFeN"),Y=["table"],Z=["products_table"],ee=["sidenav"],te=["tablerow"];function oe(e,t){if(1&e&&l.Qb(0,"app-category-form",22),2&e){var o=l.kc(),i=l.xc(3);l.pc("sidenav",i)("field",o.field)("action",o.action)("parentParams",o.paramsFromParent)}}function ie(e,t){if(1&e&&l.Qb(0,"app-product-form",23),2&e){var o=l.kc(),i=l.xc(3);l.pc("sidenav",i)("field",o.field)("action",o.action)}}function ce(e,t){1&e&&(l.Vb(0,"div",24),l.Vb(1,"span",25),l.Mc(2," Loading..."),l.Ub(),l.Ub())}function ne(e,t){1&e&&(l.Vb(0,"div",26),l.Mc(1," No category Found "),l.Ub())}function ae(e,t){1&e&&l.Qb(0,"th",35)}var re=function(e){return{"background-color":e}};function se(e,t){if(1&e&&(l.Vb(0,"td",36),l.Vb(1,"div",37),l.Qb(2,"div",38),l.Vb(3,"span",39),l.Mc(4),l.Ub(),l.Ub(),l.Ub()),2&e){var o=t.$implicit;l.Cb(2),l.pc("ngStyle",l.tc(2,re,o.color)),l.Cb(2),l.Nc(null==o?null:o.category_name)}}function le(e,t){1&e&&l.Qb(0,"th",35)}function de(e,t){if(1&e){var o=l.Wb();l.Vb(0,"button",46),l.gc("click",function(){l.Ac(o);var e=l.kc().index;return l.kc(2).openSideBar("category","edit",e)}),l.Vb(1,"mat-icon",47),l.Mc(2,"edit"),l.Ub(),l.Ub()}}function be(e,t){if(1&e&&(l.Vb(0,"button",48),l.Qb(1,"fa-icon",17),l.Ub()),2&e){var o=l.kc(3);l.Cb(1),l.pc("icon",o.faArrowsAlt)}}function ue(e,t){if(1&e){var o=l.Wb();l.Vb(0,"td",40),l.Vb(1,"div",41),l.Vb(2,"div",42),l.Vb(3,"mat-slide-toggle",43),l.gc("click",function(){l.Ac(o);var e=t.index;return l.kc(2).onCategoryStatusChange(e)}),l.Ub(),l.Kc(4,de,3,0,"button",44),l.Kc(5,be,2,1,"button",45),l.Ub(),l.Ub(),l.Ub()}if(2&e){var i=t.$implicit,c=l.kc(2);l.Cb(3),l.qc("checked",i.is_Active),l.Cb(1),l.pc("ngIf",null==c.masterFilterId),l.Cb(1),l.pc("ngIf",null!=c.masterFilterId)}}function fe(e,t){if(1&e){var o=l.Wb();l.Vb(0,"tr",49),l.gc("click",function(e){l.Ac(o);var i=t.index;return l.kc(2).loadProductForSpecificCategory(i,e)}),l.Ub()}if(2&e){var i=t.$implicit,c=t.index,n=l.kc(2);l.pc("cdkDragData",i)("ngClass",n.selectedCategoryRow==c?"bg-gray":"bg-white")}}function ge(e,t){if(1&e){var o=l.Wb();l.Vb(0,"table",27,28),l.gc("cdkDropListDropped",function(e){return l.Ac(o),l.kc().dropTable(e)}),l.Tb(2,29),l.Kc(3,ae,1,0,"th",30),l.Kc(4,se,5,4,"td",31),l.Sb(),l.Tb(5,32),l.Kc(6,le,1,0,"th",30),l.Kc(7,ue,6,3,"td",33),l.Sb(),l.Kc(8,fe,1,2,"tr",34),l.Ub()}if(2&e){var i=l.kc();l.pc("dataSource",i.category)("cdkDropListData",i.category)("cdkDropListSortingDisabled",null==i.masterFilterId),l.Cb(8),l.pc("matRowDefColumns",i.display_col_category)}}function he(e,t){1&e&&(l.Vb(0,"div",24),l.Vb(1,"span",25),l.Mc(2," Loading..."),l.Ub(),l.Ub())}function me(e,t){1&e&&(l.Vb(0,"div",50),l.Mc(1," No Products Found "),l.Ub())}function pe(e,t){1&e&&l.Qb(0,"th",35)}function ve(e,t){if(1&e&&(l.Vb(0,"td",55),l.Vb(1,"div",56),l.Qb(2,"div",38),l.Vb(3,"span",39),l.Mc(4),l.Ub(),l.Ub(),l.Ub()),2&e){var o=t.$implicit;l.Cb(2),l.pc("ngStyle",l.tc(2,re,o.color)),l.Cb(2),l.Nc(o.product_name)}}function Ce(e,t){1&e&&l.Qb(0,"th",35)}function ye(e,t){if(1&e){var o=l.Wb();l.Vb(0,"button",46),l.gc("click",function(){l.Ac(o);var e=l.kc().index;return l.kc(2).openSideBar("product","edit",e)}),l.Vb(1,"mat-icon",47),l.Mc(2,"edit"),l.Ub(),l.Ub()}}function Se(e,t){if(1&e&&(l.Vb(0,"button",48),l.Qb(1,"fa-icon",17),l.Ub()),2&e){var o=l.kc(3);l.Cb(1),l.pc("icon",o.faArrowsAlt)}}function _e(e,t){if(1&e){var o=l.Wb();l.Vb(0,"td",57),l.Vb(1,"div",58),l.Vb(2,"div",42),l.Vb(3,"mat-slide-toggle",59),l.gc("change",function(){l.Ac(o);var e=t.index;return l.kc(2).onProductStatusChange(e)}),l.Ub(),l.Kc(4,ye,3,0,"button",44),l.Kc(5,Se,2,1,"button",45),l.Ub(),l.Ub(),l.Ub()}if(2&e){var i=t.$implicit,c=l.kc(2);l.Cb(3),l.qc("checked",i.is_Active),l.Cb(1),l.pc("ngIf",null==c.masterFilterId),l.Cb(1),l.pc("ngIf",null!=c.masterFilterId)}}function we(e,t){1&e&&l.Qb(0,"tr",60),2&e&&l.pc("cdkDragData",t.$implicit)}function ke(e,t){if(1&e){var o=l.Wb();l.Vb(0,"table",27,51),l.gc("cdkDropListDropped",function(e){return l.Ac(o),l.kc().dropProducts(e)}),l.Tb(2,29),l.Kc(3,pe,1,0,"th",30),l.Kc(4,ve,5,4,"td",52),l.Sb(),l.Tb(5,32),l.Kc(6,Ce,1,0,"th",30),l.Kc(7,_e,6,3,"td",53),l.Sb(),l.Kc(8,we,1,1,"tr",54),l.Ub()}if(2&e){var i=l.kc();l.pc("dataSource",i.products)("cdkDropListData",i.products)("cdkDropListSortingDisabled",null==i.masterFilterId),l.Cb(8),l.pc("matRowDefColumns",i.display_col_category)}}var xe,Ve,Pe,Ue=[{path:"",component:(xe=function(){function t(o,i,c,n){e(this,t),this.router=o,this.activeRoute=i,this.apiServices=c,this.commonService=n,this.Pagewidth=0,this.faPlusCircle=r.z,this.faPencilAlt=r.w,this.faArrowsAlt=r.c,this.field="",this.action="",this.selectedId="",this.selectedCategoryRow=-1,this.category=[],this.products=[],this.sideMenuClosing=!0,this.isChangingStatus=!1,this.allProducts=[],this.isLoadingProduct=!1,this.isLoadingCatelogy=!1,this.display_col_category=["name_color","action"],this.masterFilterId=null,this.Pagewidth=window.innerWidth}return o(t,[{key:"ngAfterViewInit",value:function(){var e,t=this;this.paramsFromParent=this.activeRoute.snapshot.paramMap,this.paramsFromParent.get("toAddCategory")&&this.openSideBar("category","add"),this.listenCategory();var o=localStorage.getItem("selectedBranch")?JSON.parse(localStorage.getItem("selectedBranch")||""):[];console.log(o);var i=null==o?void 0:o.map(function(e){return e._id});this.masterFilterId=1==(null==o?void 0:o.length)?null===(e=o[0])||void 0===e?void 0:e._id:null,null==o||0==i.length?(this.get_categories(),this.get_products()):(this.get_branch_products(i),this.get_branch_categories(i)),this.commonService.select_branch.subscribe(function(e){var o;console.log("response?.length == 1",1==(null==e?void 0:e.length),"response?.length == 1",e),t.masterFilterId=1==(null==e?void 0:e.length)?null===(o=e[0])||void 0===o?void 0:o._id:null;var i=e.map(function(e){return e._id});t.selectedCategoryRow=-1,0==i.length?(t.get_categories(),t.get_products()):(t.get_branch_products(i),t.get_branch_categories(i))})}},{key:"get_branch_products",value:function(e){var t=this;this.isLoadingProduct=!0,this.apiServices.get_branch_products({branch_list:e}).subscribe(function(e){t.isLoadingProduct=!1,e.success?(t.allProducts=e.data.products,t.products=e.data.products):t.commonService.showAlert(e.message)})}},{key:"get_branch_categories",value:function(e){var t=this;this.isLoadingCatelogy=!0,this.apiServices.get_branch_category({branch_list:e}).subscribe(function(e){t.isLoadingCatelogy=!1,e.success?t.category=e.data.category:t.commonService.showAlert(e.message)})}},{key:"listenCategory",value:function(){var e=this;this.commonService.commonEmitter.subscribe(function(t){var o=localStorage.getItem("selectedBranch")?JSON.parse(localStorage.getItem("selectedBranch")||""):null,i=null==o?void 0:o.map(function(e){return e._id});null==o||0==i.length?(e.get_categories(),e.get_products()):(e.get_branch_products(i),e.get_branch_categories(i))})}},{key:"get_categories",value:function(){var e=this;this.isLoadingCatelogy=!0,this.apiServices.getCategories().subscribe(function(t){e.isLoadingCatelogy=!1,t.success?e.category=t.data.category:e.commonService.showAlert(t.message)})}},{key:"get_products",value:function(){var e=this;this.isLoadingProduct=!0,this.apiServices.getProducts().subscribe(function(t){e.isLoadingProduct=!1,t.success?(console.log(e.selectedCategoryRow,"selected"),e.selectedCategoryRow>=0?e.loadProductForSpecificCategory(e.selectedCategoryRow,null):(e.allProducts=t.data.products,e.products=t.data.products)):e.commonService.showAlert(t.message)})}},{key:"onCategoryStatusChange",value:function(e){var t,o=this;this.isChangingStatus=!0,this.category[e].is_Active=!this.category[e].is_Active,this.category[e].id=this.category[e]._id,this.category[e].available_branches=Array.isArray(this.category[e].available_branches)?null===(t=this.category[e].available_branches)||void 0===t?void 0:t.join(","):this.category[e].available_branches,this.isLoadingCatelogy=!0,this.apiServices.updateCategory(this.category[e]).subscribe(function(e){o.isLoadingCatelogy=!1,o.commonService.showAlert(e.message)})}},{key:"onProductStatusChange",value:function(e){var t,o,i=this;this.products[e].is_Active=!this.products[e].is_Active,this.products[e].id=this.products[e]._id,this.products[e].categories=Array.isArray(this.products[e].categories)?null===(t=this.products[e].categories)||void 0===t?void 0:t.join(","):this.products[e].categories,this.products[e].available_branches=Array.isArray(this.products[e].available_branches)?null===(o=this.products[e].available_branches)||void 0===o?void 0:o.join(","):this.products[e].available_branches,console.log(this.products[e]),this.isLoadingProduct=!0,this.apiServices.updateProduct(this.products[e]).subscribe(function(e){i.isLoadingProduct=!1,i.commonService.showAlert(e.message)})}},{key:"dropTable",value:function(e){var t=this,o=localStorage.getItem("selectedBranch")?JSON.parse(localStorage.getItem("selectedBranch")||""):null;if(1==(null==o?void 0:o.length)){var i=this.category.findIndex(function(t){return t===e.item.data});Object(s.d)(this.category,i,e.currentIndex),this.table.renderRows();var c=[];this.category.forEach(function(e,t){var o=new Object;o.id=e._id,o.order=t+1,c.push(o)}),this.isLoadingCatelogy=!0;var n=o[0]._id;n="syra-all"==n?null:n,this.apiServices.update_category_order({order:c,branch_id:n}).subscribe(function(e){t.isLoadingCatelogy=!1,t.commonService.showAlert(e.message)}),this.selectedCategoryRow==i&&(this.selectedCategoryRow=e.currentIndex),console.log(this.selectedCategoryRow,"row")}else this.commonService.showAlert("Choose the any one branch to reorder")}},{key:"dropProducts",value:function(e){var t=this,o=localStorage.getItem("selectedBranch")?JSON.parse(localStorage.getItem("selectedBranch")||""):null;if(1==(null==o?void 0:o.length)){var i=this.products.findIndex(function(t){return t===e.item.data});Object(s.d)(this.products,i,e.currentIndex),this.ProductsTable.renderRows();var c=[];this.products.forEach(function(e,t){var o=new Object;o.id=e._id,o.name=e.product_name,o.order=t+1,c.push(o)}),this.isLoadingProduct=!0;var n=(localStorage.getItem("selectedBranch")?JSON.parse(localStorage.getItem("selectedBranch")||""):null)[0]._id;n="syra-all"==n?null:n,this.apiServices.update_product_order({order:c,branch_id:n}).subscribe(function(e){t.isLoadingProduct=!1,t.commonService.showAlert(e.message)})}else this.commonService.showAlert("Choose any one branch to reorder")}},{key:"onResize",value:function(e){this.Pagewidth=window.innerWidth}},{key:"openSideBar",value:function(e,t){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;this.isChangingStatus=!0,this.field=e,this.action=t,this.selectedId="category"==e?o>=0?this.category[o]._id:null:o>=0?this.products[o]._id:null,this.sidenav.toggle()}},{key:"push",value:function(){"category"==this.field?this.commonService.categoryEmitter.emit("edit"==this.action?this.selectedId:null):this.commonService.productEmitter.emit("edit"==this.action?this.selectedId:null)}},{key:"loadProductForSpecificCategory",value:function(e,t){var o=this;null==t||t.preventDefault(),null==t||t.stopPropagation(),this.isChangingStatus||(this.selectedCategoryRow==e?(this.selectedCategoryRow=-1,this.products=this.allProducts):(this.selectedCategoryRow=e,this.products=this.allProducts.filter(function(t){return t.categories.includes(o.category[e]._id)}),console.log(this.products))),this.isChangingStatus=!1}},{key:"close",value:function(){this.sideMenuClosing=!0,this.commonService.resetForms.emit()}}]),t}(),xe.\u0275fac=function(e){return new(e||xe)(l.Pb(a.d),l.Pb(a.a),l.Pb(d.a),l.Pb(b.a))},xe.\u0275cmp=l.Jb({type:xe,selectors:[["app-pos-management"]],viewQuery:function(e,t){var o;1&e&&(l.Rc(Y,!0),l.Rc(Z,!0),l.Rc(ee,!0),l.Rc(te,!0)),2&e&&(l.wc(o=l.hc())&&(t.table=o.first),l.wc(o=l.hc())&&(t.ProductsTable=o.first),l.wc(o=l.hc())&&(t.sidenav=o.first),l.wc(o=l.hc())&&(t.tablerow=o.first))},hostBindings:function(e,t){1&e&&l.gc("resize",function(e){return t.onResize(e)},!1,l.zc)},decls:33,vars:14,consts:[[1,"container","wrapper"],[1,"bg-transparent"],[1,"bg_color",3,"mode","position","ngClass","opened","closed"],["sidenav",""],[3,"sidenav","field","action","parentParams",4,"ngIf"],[3,"sidenav","field","action",4,"ngIf"],[1,"mb-5"],[1,"mx-4"],[1,"row"],[1,"col-md-12","col-lg-5","h-100"],["class","bg-white d-flex align-items-center justify-content-center z-index-2 alpha50 content position-absolute left-0 w100-30px h-100",4,"ngIf"],[1,"bg-white","table-w-350-scroll",2,"min-height","96px"],[1,"col-12","text-center","title","sticky-top"],[1,"row","justify-content-center"],[1,"col-12"],[1,"add-btn"],[1,"border-0","bg-transparent","edit_btn_act",3,"click"],[1,"text-dark",3,"icon"],["class","d-flex justify-content-center align-items-center ","style","min-height: 100px; font-size: 16;",4,"ngIf"],["mat-table","","class","syra-table w-100","cdkDropList","",3,"dataSource","cdkDropListData","cdkDropListSortingDisabled","cdkDropListDropped",4,"ngIf"],[1,"col-md-12","col-lg-7","h-100",3,"ngClass"],["class","d-flex justify-content-center align-items-center","style","min-height: 96px; font-size: 16;",4,"ngIf"],[3,"sidenav","field","action","parentParams"],[3,"sidenav","field","action"],[1,"bg-white","d-flex","align-items-center","justify-content-center","z-index-2","alpha50","content","position-absolute","left-0","w100-30px","h-100"],[1,"mt-5"],[1,"d-flex","justify-content-center","align-items-center",2,"min-height","100px","font-size","16"],["mat-table","","cdkDropList","",1,"syra-table","w-100",3,"dataSource","cdkDropListData","cdkDropListSortingDisabled","cdkDropListDropped"],["table",""],["matColumnDef","name_color"],["mat-header-cell","","class","p-24 ",4,"matHeaderCellDef"],["mat-cell","","class","p-0 py-point70em",4,"matCellDef"],["matColumnDef","action"],["mat-cell","","class","text-right p-0 py-point70em",4,"matCellDef"],["mat-row","","class","p-0 border-bottom draggable-row","cdkDrag","",3,"cdkDragData","ngClass","click",4,"matRowDef","matRowDefColumns"],["mat-header-cell","",1,"p-24"],["mat-cell","",1,"p-0","py-point70em"],[1,"row","ml-1","p-24",2,"pointer-events","all"],[1,"template-color",3,"ngStyle"],[1,"ml-2"],["mat-cell","",1,"text-right","p-0","py-point70em"],[1,"ml-5","p-24"],[1,"row","justify-content-end",2,"pointer-events","all"],[1,"slide",3,"checked","click"],["class","border-0 bg-transparent edit_btn_act pr-1",3,"click",4,"ngIf"],["class","border-0 bg-transparent edit_btn_act pr-1",4,"ngIf"],[1,"border-0","bg-transparent","edit_btn_act","pr-1",3,"click"],["aria-hidden","false","aria-label","Example home icon",1,"text-dark","font-size-20"],[1,"border-0","bg-transparent","edit_btn_act","pr-1"],["mat-row","","cdkDrag","",1,"p-0","border-bottom","draggable-row",3,"cdkDragData","ngClass","click"],[1,"d-flex","justify-content-center","align-items-center",2,"min-height","96px","font-size","16"],["products_table",""],["mat-cell","","class","product-cell p-24 py-point70em",4,"matCellDef"],["mat-cell","","class","text-right p-24 py-point70em",4,"matCellDef"],["mat-row","","class","p-0 border-bottom","cdkDrag","",3,"cdkDragData",4,"matRowDef","matRowDefColumns"],["mat-cell","",1,"product-cell","p-24","py-point70em"],[1,"row","ml-1"],["mat-cell","",1,"text-right","p-24","py-point70em"],[1,"ml-5"],[1,"slide",3,"checked","change"],["mat-row","","cdkDrag","",1,"p-0","border-bottom",3,"cdkDragData"]],template:function(e,t){1&e&&(l.Vb(0,"div",0),l.Vb(1,"mat-sidenav-container",1),l.Vb(2,"mat-sidenav",2,3),l.gc("opened",function(){return t.push()})("closed",function(){return t.close()}),l.Kc(4,oe,1,4,"app-category-form",4),l.Kc(5,ie,1,3,"app-product-form",5),l.Ub(),l.Vb(6,"mat-sidenav-content",6),l.Vb(7,"div",7),l.Vb(8,"div",8),l.Vb(9,"div",9),l.Kc(10,ce,3,0,"div",10),l.Vb(11,"div",11),l.Vb(12,"div",12),l.Vb(13,"div",13),l.Vb(14,"span",14),l.Mc(15,"CATEGORIES"),l.Ub(),l.Vb(16,"div",15),l.Vb(17,"button",16),l.gc("click",function(){return t.openSideBar("category","add")}),l.Qb(18,"fa-icon",17),l.Ub(),l.Ub(),l.Ub(),l.Ub(),l.Kc(19,ne,2,0,"div",18),l.Kc(20,ge,9,4,"table",19),l.Ub(),l.Ub(),l.Vb(21,"div",20),l.Kc(22,he,3,0,"div",10),l.Vb(23,"div",11),l.Vb(24,"div",12),l.Vb(25,"div",13),l.Vb(26,"span",14),l.Mc(27,"PRODUCTS"),l.Ub(),l.Vb(28,"div",15),l.Vb(29,"button",16),l.gc("click",function(){return t.openSideBar("product","add")}),l.Qb(30,"fa-icon",17),l.Ub(),l.Ub(),l.Ub(),l.Ub(),l.Kc(31,me,2,0,"div",21),l.Kc(32,ke,9,4,"table",19),l.Ub(),l.Ub(),l.Ub(),l.Ub(),l.Ub(),l.Ub(),l.Ub()),2&e&&(l.Cb(2),l.pc("mode","over")("position","end")("ngClass",t.Pagewidth<=576?"w-100":"w-370px"),l.Cb(2),l.pc("ngIf","category"==t.field),l.Cb(1),l.pc("ngIf","product"==t.field),l.Cb(5),l.pc("ngIf",1==t.isLoadingCatelogy),l.Cb(8),l.pc("icon",t.faPlusCircle),l.Cb(1),l.pc("ngIf",0==(null==t.category?null:t.category.length)&&0==t.isLoadingCatelogy),l.Cb(1),l.pc("ngIf",(null==t.category?null:t.category.length)>0),l.Cb(1),l.pc("ngClass",t.Pagewidth<=1024?"mt-4":"mt-0"),l.Cb(1),l.pc("ngIf",1==t.isLoadingProduct),l.Cb(8),l.pc("icon",t.faPlusCircle),l.Cb(1),l.pc("ngIf",t.products&&0==t.products.length&&0==t.isLoadingProduct),l.Cb(1),l.pc("ngIf",(null==t.products?null:t.products.length)>0))},directives:[u.b,u.a,n.j,n.l,u.c,f.a,A,q,G.n,s.b,G.c,G.i,G.b,G.m,G.h,G.a,n.m,H.a,X.a,G.l,s.a],styles:['@font-face{font-family:HelveticaNeue-Bold;font-style:normal;font-weight:400;src:local("HelveticaNeue-Bold"),url("Helvetica Neu Bold.61acdee6f288cddccf23.ttf") format("ttf")}@font-face{font-family:CerebriSans-Bold;font-style:normal;font-weight:400;src:local("CerebriSans-Bold"),url(CerebriSans-Bold.b28d46a00415bec63bba.ttf) format("ttf");src:local("CerebriSans-Bold"),url(CerebriSans-Bold.f48e05c76db5e6bd676c.eot) format("eot");src:local("CerebriSans-Bold"),url(CerebriSans-Bold.1b8ded389d0dc424b19b.svg) format("svg");src:local("CerebriSans-Bold"),url(CerebriSans-Bold.1b4400b13ebd711dd3e8.woff) format("woff");src:local("CerebriSans-Bold"),url(CerebriSans-Bold.1b89f96de9e78fd26a7f.woff2) format("woff2")}@font-face{font-family:\\ CerebriSans-semibold;font-style:normal;font-weight:400;src:local("CerebriSans-Bold"),url(CerebriSans-SemiBold.dcda3674ac76f4e31e87.ttf) format("ttf");src:local("CerebriSans-Bold"),url(CerebriSans-SemiBold.8c2b25fda64ba8de398a.eot) format("eot");src:local("CerebriSans-Bold"),url(CerebriSans-SemiBold.d4680810013431cbe6c7.svg) format("svg");src:local("CerebriSans-Bold"),url(CerebriSans-SemiBold.700f305197d6f163d348.woff) format("woff");src:local("CerebriSans-Bold"),url(CerebriSans-SemiBold.29097270d5f0e9003fd4.woff2) format("woff2")}@font-face{font-family:CerebriSans-Light;font-style:normal;font-weight:400;src:local("CerebriSans-Bold"),url(CerebriSans-Light.ddb81c4966caddeb5524.ttf) format("ttf");src:local("CerebriSans-Bold"),url(CerebriSans-Light.1e4f0f37d8ed20e51e27.eot) format("eot");src:local("CerebriSans-Bold"),url(CerebriSans-Light.efa3b6fb5acdd7fa23ab.svg) format("svg");src:local("CerebriSans-Bold"),url(CerebriSans-Light.650c547e86d77193b2d0.woff) format("woff");src:local("CerebriSans-Bold"),url(CerebriSans-Light.93b3eb2ec96f14eca31e.woff2) format("woff2")}@font-face{font-family:CerebriSans-Regular;font-style:normal;font-weight:400;src:local("CerebriSans-Regular"),url(CerebriSans-Regular.da1eaafe42c93475b338.ttf) format("ttf");src:local("CerebriSans-Regular"),url(CerebriSans-Regular.ccb7af1c430bd224cb88.eot) format("eot");src:local("CerebriSans-Regular"),url(CerebriSans-Regular.8a18b1b14a235efe141d.svg) format("svg");src:local("CerebriSans-Regular"),url(CerebriSans-Regular.81bf15fd01ef8a22e704.woff) format("woff");src:local("CerebriSans-Regular"),url(CerebriSans-Regular.a9f198f5da5b6fe108ed.woff2) format("woff2")}.wrapper[_ngcontent-%COMP%]{margin-top:130px;font-family:CerebriSans-Bold}.syra-table[_ngcontent-%COMP%]   .mat-row[_ngcontent-%COMP%]:nth-child(2n){background-color:#fff}.syra-table[_ngcontent-%COMP%]   .mat-row[_ngcontent-%COMP%]{height:47px}.table-w-350-scroll[_ngcontent-%COMP%]{max-height:75vh;overflow:auto}.mat-slide-toggle.mat-checked[_ngcontent-%COMP%]   .mat-slide-toggle-bar[_ngcontent-%COMP%]{background-color:#679187}  .mat-slide-toggle:not(.mat-checked) .mat-ripple-element,   .slide .mat-slide-toggle-bar{background-color:#db5454!important}.cdk-drag-preview[_ngcontent-%COMP%]{box-sizing:border-box;border-radius:4px;background-color:#fff;box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12);display:flex;flex:1}.cdk-drag-preview[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{width:100%}.cdk-drag-preview[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{width:50%}.cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:0}.cdk-drag-animating[_ngcontent-%COMP%], .cdk-drop-list-dragging[_ngcontent-%COMP%]   .mat-row[_ngcontent-%COMP%]:not(.cdk-drag-placeholder), .cdk-drop-list-dragging[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:not(.cdk-drag-placeholder){transition:transform .25s cubic-bezier(0,0,.2,1)}.draggable-row[_ngcontent-%COMP%]{cursor:pointer}.h-76vh[_ngcontent-%COMP%]{max-height:70vh;overflow:auto}']}),xe)}],Oe=((Pe=function t(){e(this,t)}).\u0275mod=l.Nb({type:Pe}),Pe.\u0275inj=l.Mb({factory:function(e){return new(e||Pe)},imports:[[a.f.forChild(Ue)],a.f]}),Pe),Ie=((Ve=function t(){e(this,t)}).\u0275mod=l.Nb({type:Ve}),Ve.\u0275inj=l.Mb({factory:function(e){return new(e||Ve)},imports:[[n.c,Oe,G.p,u.d,C.b,f.b,H.b,s.c,v.b,B.d,L.b,h.i,h.s,X.b]]}),Ve)}}])}();