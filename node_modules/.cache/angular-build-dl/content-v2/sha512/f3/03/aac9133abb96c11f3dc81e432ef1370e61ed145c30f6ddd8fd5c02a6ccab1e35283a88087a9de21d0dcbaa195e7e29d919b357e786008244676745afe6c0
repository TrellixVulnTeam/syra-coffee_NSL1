(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{wz2i:function(e,t,o){"use strict";o.r(t),o.d(t,"POSManagementModule",function(){return we});var i=o("ofXK"),c=o("tyNb"),r=o("wHSu"),a=o("5+WD"),n=o("fXoL"),s=o("7pgg"),l=o("gbi4"),d=o("XhcP"),b=o("6NWb"),h=o("2jKy"),g=o("3Pt+"),f=o("mCIx"),u=o("1kSV"),m=o("bSwM"),p=o("Qu3c");const v=["category"];function C(e,t){1&e&&(n.Vb(0,"div",3),n.Mc(1," Loading...\n"),n.Ub())}function y(e,t){if(1&e){const e=n.Wb();n.Vb(0,"div",15),n.Vb(1,"button",16),n.gc("click",function(){return n.Ac(e),n.kc(2).sidenav.toggle()}),n.Qb(2,"fa-icon",17),n.Ub(),n.Vb(3,"div"),n.Mc(4),n.Ub(),n.Ub()}if(2&e){const e=n.kc(2);n.Cb(2),n.pc("icon",e.close),n.Cb(2),n.Oc(" ","add"==e.action&&"category"==e.field?"ADD CATEGORY":"EDIT CATEGORY"," ")}}const S=function(e){return{"background-color":e}};function _(e,t){if(1&e){const e=n.Wb();n.Vb(0,"div",31),n.Vb(1,"button",32),n.gc("click",function(){n.Ac(e);const o=t.index;return n.kc(3).ChangeColor(o)}),n.Ub(),n.Ub()}if(2&e){const e=t.$implicit,o=t.index,i=n.kc(3);n.Cb(1),n.pc("ngStyle",n.tc(2,S,e.color))("ngClass",o==i.selectedColorIndex?"outline":"")}}function w(e,t){if(1&e){const e=n.Wb();n.Vb(0,"div",33),n.Vb(1,"mat-checkbox",34),n.gc("change",function(o){n.Ac(e);const i=t.index;return n.kc(3).updateAllComplete(i,o.checked)}),n.Mc(2),n.Ub(),n.Ub()}if(2&e){const e=t.$implicit;n.Cb(1),n.pc("checked",e.is_active)("matTooltip",e.branch_name),n.Cb(1),n.Oc(" ",e.branch_name," ")}}function x(e,t){if(1&e&&(n.Vb(0,"form",18),n.Vb(1,"div",19),n.Vb(2,"div",20),n.Vb(3,"label"),n.Mc(4,"Name"),n.Ub(),n.Ub(),n.Qb(5,"input",21,22),n.Ub(),n.Vb(7,"div",23),n.Vb(8,"div",24),n.Vb(9,"label"),n.Mc(10,"Color"),n.Ub(),n.Ub(),n.Qb(11,"div",25),n.Ub(),n.Vb(12,"div",26),n.Kc(13,_,2,4,"div",27),n.Ub(),n.Vb(14,"div",23),n.Vb(15,"div",28),n.Vb(16,"label"),n.Mc(17,"Branch"),n.Ub(),n.Ub(),n.Qb(18,"div",25),n.Ub(),n.Vb(19,"div",29),n.Kc(20,w,3,3,"div",30),n.Ub(),n.Ub()),2&e){const e=n.kc(2);n.pc("formGroup",e.categoryForm),n.Cb(5),n.qc("value",e.parentParams.get("toAddCategory")?e.parentParams.get("category"):""),n.Cb(8),n.pc("ngForOf",e.colors),n.Cb(7),n.pc("ngForOf",e.branches)}}function k(e,t){1&e&&n.Qb(0,"i",35)}function V(e,t){1&e&&n.Qb(0,"i",35)}function P(e,t){if(1&e){const e=n.Wb();n.Vb(0,"button",36),n.gc("click",function(){return n.Ac(e),n.kc(2).deleteAction()}),n.Kc(1,V,1,0,"i",12),n.Vb(2,"span"),n.Mc(3,"DELETE ITEM"),n.Ub(),n.Ub()}if(2&e){const e=n.kc(2);n.Cb(1),n.pc("ngIf",1==e.isLoadingDelete)}}function U(e,t){if(1&e){const e=n.Wb();n.Vb(0,"div",4),n.Kc(1,y,5,2,"div",5),n.Vb(2,"div",6),n.Kc(3,x,21,4,"form",7),n.Ub(),n.Vb(4,"div",8),n.Vb(5,"div",9),n.Vb(6,"div",10),n.Vb(7,"button",11),n.gc("click",function(){n.Ac(e);const t=n.kc();return"edit"==t.action?t.editAction():t.saveAction()}),n.Kc(8,k,1,0,"i",12),n.Vb(9,"span"),n.Mc(10,"SAVE"),n.Ub(),n.Ub(),n.Ub(),n.Vb(11,"div",13),n.Kc(12,P,4,1,"button",14),n.Ub(),n.Ub(),n.Ub(),n.Ub()}if(2&e){const e=n.kc();n.Cb(1),n.pc("ngIf","category"==e.field),n.Cb(2),n.pc("ngIf","category"==e.field),n.Cb(5),n.pc("ngIf",1==e.isLoadingSave),n.Cb(4),n.pc("ngIf","edit"==e.action&&"category"==e.field)}}let I=(()=>{class e{constructor(e,t,o,i,c){this.router=e,this.activatedRoute=t,this.apiServices=o,this.commonService=i,this.modalService=c,this.isLoadingDelete=!1,this.isLoadingSave=!1,this.branches=[],this.allComplete=!1,this.selectedValue="10.00%",this.isLoading=!0,this.categoryForm=new g.g({category:new g.d("",g.u.required)}),this.close=h.b,this.category_id="",this.selectedColorIndex=0,this.colors=[{color:"#4751c9"},{color:"#45a9ea"},{color:"#cc6ae3"},{color:"#dea766"},{color:"#7c52cb"},{color:"#16a186"}],this.commonService.resetForms.subscribe(()=>{this.initPopup(null)})}ngOnInit(){this.parentParams=this.activatedRoute.snapshot.paramMap,this.commonService.categoryEmitter.subscribe(e=>{this.parentParams.get("category")?this.initQueryParams():this.initPopup(e)}),this.get_branches()}updateAllComplete(e,t){this.branches[e].is_active=t,this.allComplete=null!=this.branches&&this.branches.every(e=>e.is_active)}initPopup(e){this.category_id=e,e?this.getCategoryDetails():(this.categoryForm.setValue({category:""}),this.selectedColorIndex=0,this.init_branches())}getCategoryDetails(){this.isLoading=!0,this.apiServices.getCategories({id:this.category_id}).subscribe(e=>{var t,o;this.isLoading=!1,this.categoryForm.setValue({category:null===(o=null===(t=e.data)||void 0===t?void 0:t.category)||void 0===o?void 0:o.category_name}),this.selectedColorIndex=this.colors.findIndex(t=>t.color===e.data.category.color),this.init_branches(),e.data.category.available_branches.forEach(e=>{let t=this.branches.findIndex(t=>t._id===e);this.branches[t].is_active=!0}),this.isLoading=!1})}get_branches(){this.apiServices.get_branch({}).subscribe(e=>{e.success?(this.branches=e.data.branch_list,this.branches.forEach(e=>{e.is_active=!1})):this.commonService.showAlert(e.message)})}saveAction(){this.categoryForm.valid?this.commonService.isAnyBranchSelected(this.branches)?this.saveCategory():this.commonService.showAlert("select atleast any one branch"):this.commonService.showAlert("Category name is mandatory")}saveCategory(){this.isLoadingSave=!0;let e=this.generateObject();this.apiServices.addCategory(e).subscribe(e=>{this.isLoadingSave=!1,e.success?null!=this.parentParams.get("category")?this.redirectToCatelouge():(this.commonService.showAlert(e.message),this.commonService.commonEmitter.emit(),this.sidenav.close()):this.commonService.showAlert(e.message)})}editAction(){this.isLoadingSave=!0;let e=this.generateObject();e.id=this.category_id,this.apiServices.updateCategory(e).subscribe(e=>{this.commonService.showAlert(e.message),this.isLoadingSave=!1,e.success&&(this.sidenav.close(),this.commonService.commonEmitter.emit())})}deleteAction(){this.modalService.open(f.a).result.then(()=>{this.isLoadingDelete=!0,this.apiServices.deleteCategory({id:this.category_id}).subscribe(e=>{this.commonService.showAlert(e.message),this.isLoadingDelete=!1,e.success&&(this.sidenav.close(),this.commonService.commonEmitter.emit())})},()=>{})}getSelectedBranches(){let e=[];return this.branches.forEach(t=>{t.is_active&&e.push(t._id)}),e}ChangeColor(e){this.selectedColorIndex=e}generateObject(){var e;let t=Object();return t.color=this.colors[this.selectedColorIndex].color,t.category_name=this.categoryForm.controls.category.value,t.available_branches=this.getSelectedBranches().join(","),t.is_Active=!0,t.created_by=JSON.parse(null!==(e=localStorage.getItem("syra_admin"))&&void 0!==e?e:"").data._id,t}redirectToCatelouge(){let e=this.getAllParams();this.router.navigate(["/configurations/catalouge",e])}getAllParams(){var e,t;let o;return null===(t=null===(e=this.activatedRoute)||void 0===e?void 0:e.parent)||void 0===t||t.params.subscribe(e=>{o=e}),o}init_branches(){this.branches.forEach(e=>{e.is_active=!1}),this.isLoading=!1}initQueryParams(){console.log(this.parentParams),this.categoryForm.setValue({category:this.parentParams.get("category")})}}return e.\u0275fac=function(t){return new(t||e)(n.Pb(c.d),n.Pb(c.a),n.Pb(s.a),n.Pb(l.a),n.Pb(u.c))},e.\u0275cmp=n.Jb({type:e,selectors:[["app-category-form"]],viewQuery:function(e,t){if(1&e&&n.Rc(v,!0),2&e){let e;n.wc(e=n.hc())&&(t.categoryName=e.first)}},inputs:{sidenav:"sidenav",field:"field",action:"action",parentParams:"parentParams"},decls:3,vars:2,consts:[["rel","stylesheet","href",n.Qc("https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css")],["class","h-80","class","bg-white d-flex align-items-center justify-content-center alpha50 content position-absolute left-0 top-0 w-100 h100vh",4,"ngIf"],["class","w-100",4,"ngIf"],[1,"bg-white","d-flex","align-items-center","justify-content-center","alpha50","content","position-absolute","left-0","top-0","w-100","h100vh"],[1,"w-100"],["class","title text-center sticky-top",4,"ngIf"],[1,"h75vh"],["class","mb-5",3,"formGroup",4,"ngIf"],[1,"h25vh"],[1,"row","mx-0","justify-content-center","align-items-center"],[1,"col-12","py-3","d-flex","justify-content-center"],["type","submit",1,"btn","text-white","btn-sm",3,"click"],["class","fa fa-spinner fa-spin mr-3",4,"ngIf"],[1,"col-12","pb-3","d-flex","justify-content-center"],["type","button","class","btn-danger",3,"click",4,"ngIf"],[1,"title","text-center","sticky-top"],[1,"bg-transparent","border-0","form-close-btn","position-absolute",3,"click"],[3,"icon"],[1,"mb-5",3,"formGroup"],[1,"form-group","mx-4"],[1,"text-left","col-12","mx-0","mt-4","p-0"],["type","text","formControlName","category","id","username","placeholder","Enter name","autocomplete","off",1,"form-control","w-100",3,"value"],["category",""],[1,"form-group","mx-3"],[1,"text-left","col-12","mx-2","mt-2","p-0"],[1,"line","mx-2","mt-2"],[1,"row","ml-4","mx-1","p-0"],["class","col-2 mx-0 p-0",4,"ngFor","ngForOf"],[1,"text-left","col-12","mx-2","mt-4","p-0"],[1,"form-row","ml-4","p-0"],["class","col-6 mx-0 p-0 ",4,"ngFor","ngForOf"],[1,"col-2","mx-0","p-0"],["type","button",1,"circle",3,"ngStyle","ngClass","click"],[1,"col-6","mx-0","p-0"],["disableRipple","","matTooltipClass","tooltip-list",1,"check","w-100",3,"checked","matTooltip","change"],[1,"fa","fa-spinner","fa-spin","mr-3"],["type","button",1,"btn-danger",3,"click"]],template:function(e,t){1&e&&(n.Qb(0,"link",0),n.Kc(1,C,2,0,"div",1),n.Kc(2,U,13,4,"div",2)),2&e&&(n.Cb(1),n.pc("ngIf",t.isLoading),n.Cb(1),n.pc("ngIf",!t.isLoading))},directives:[i.l,b.a,g.w,g.n,g.h,g.c,g.m,g.f,i.k,i.m,i.j,m.a,p.a],styles:['@import url("https://fonts.googleapis.com/css2?family=Open+Sans:ital,wght@0,300;0,400;0,600;0,700;0,800;1,300;1,400;1,600;1,700;1,800&display=swap");@font-face{font-family:HelveticaNeue-Bold;font-style:normal;font-weight:400;src:local("HelveticaNeue-Bold"),url("Helvetica Neu Bold.61acdee6f288cddccf23.ttf") format("ttf")}@font-face{font-family:CerebriSans-Bold;font-style:normal;font-weight:400;src:local("CerebriSans-Bold"),url(CerebriSans-Bold.b28d46a00415bec63bba.ttf) format("ttf");src:local("CerebriSans-Bold"),url(CerebriSans-Bold.f48e05c76db5e6bd676c.eot) format("eot");src:local("CerebriSans-Bold"),url(CerebriSans-Bold.1b8ded389d0dc424b19b.svg) format("svg");src:local("CerebriSans-Bold"),url(CerebriSans-Bold.1b4400b13ebd711dd3e8.woff) format("woff");src:local("CerebriSans-Bold"),url(CerebriSans-Bold.1b89f96de9e78fd26a7f.woff2) format("woff2")}@font-face{font-family:\\ CerebriSans-semibold;font-style:normal;font-weight:400;src:local("CerebriSans-Bold"),url(CerebriSans-SemiBold.dcda3674ac76f4e31e87.ttf) format("ttf");src:local("CerebriSans-Bold"),url(CerebriSans-SemiBold.8c2b25fda64ba8de398a.eot) format("eot");src:local("CerebriSans-Bold"),url(CerebriSans-SemiBold.d4680810013431cbe6c7.svg) format("svg");src:local("CerebriSans-Bold"),url(CerebriSans-SemiBold.700f305197d6f163d348.woff) format("woff");src:local("CerebriSans-Bold"),url(CerebriSans-SemiBold.29097270d5f0e9003fd4.woff2) format("woff2")}@font-face{font-family:CerebriSans-Light;font-style:normal;font-weight:400;src:local("CerebriSans-Bold"),url(CerebriSans-Light.ddb81c4966caddeb5524.ttf) format("ttf");src:local("CerebriSans-Bold"),url(CerebriSans-Light.1e4f0f37d8ed20e51e27.eot) format("eot");src:local("CerebriSans-Bold"),url(CerebriSans-Light.efa3b6fb5acdd7fa23ab.svg) format("svg");src:local("CerebriSans-Bold"),url(CerebriSans-Light.650c547e86d77193b2d0.woff) format("woff");src:local("CerebriSans-Bold"),url(CerebriSans-Light.93b3eb2ec96f14eca31e.woff2) format("woff2")}@font-face{font-family:CerebriSans-Regular;font-style:normal;font-weight:400;src:local("CerebriSans-Regular"),url(CerebriSans-Regular.da1eaafe42c93475b338.ttf) format("ttf");src:local("CerebriSans-Regular"),url(CerebriSans-Regular.ccb7af1c430bd224cb88.eot) format("eot");src:local("CerebriSans-Regular"),url(CerebriSans-Regular.8a18b1b14a235efe141d.svg) format("svg");src:local("CerebriSans-Regular"),url(CerebriSans-Regular.81bf15fd01ef8a22e704.woff) format("woff");src:local("CerebriSans-Regular"),url(CerebriSans-Regular.a9f198f5da5b6fe108ed.woff2) format("woff2")}input[_ngcontent-%COMP%]{border-radius:0!important}input[_ngcontent-%COMP%], input[_ngcontent-%COMP%]:focus{border:1px solid #4a4a4a;box-shadow:0 3px 6px 0 rgba(0,0,0,.16);background-color:#f7f7f7}input[_ngcontent-%COMP%]:focus{outline:none}input[_ngcontent-%COMP%], input[_ngcontent-%COMP%]::-webkit-input-placeholder{font-size:16px;font-weight:400;font-family:cerebrisans-Regular}.line[_ngcontent-%COMP%]{height:1px;width:100%;background-color:#4a4a4a}.circle[_ngcontent-%COMP%]{border-radius:50%;height:2em;width:2em;outline:none;border:none}.outline[_ngcontent-%COMP%]{border:2.5px solid}.mat-checkbox-indeterminate[_ngcontent-%COMP%]   .mat-checkbox-background[_ngcontent-%COMP%],   .mat-checkbox-checked.mat-accent .mat-checkbox-background{background-color:#fff!important;border:1px solid!important}  .mat-checkbox-inner-container{width:25px!important;height:25px!important;border-radius:0}  .mat-checkbox-checkmark-path{stroke:#000!important}.btn[_ngcontent-%COMP%]{background-color:#679187;border:none;border-radius:0;box-shadow:0 3px 6px 0 rgba(0,0,0,.16);width:240px;height:40px}.btn[_ngcontent-%COMP%]:focus{border:none;box-shadow:none}  .check.mat-checkbox .mat-checkbox-ripple{width:0;height:0}.btn-danger[_ngcontent-%COMP%]{width:240px;height:40px;border:none;border-radius:0;box-shadow:0 3px 6px 0 rgba(0,0,0,.16)}.btn-danger[_ngcontent-%COMP%]:focus{outline:none;box-shadow:none}.mat-option[_ngcontent-%COMP%]:hover:not(.mat-option-disabled){background:rgba(0,0,0,.04);color:#679187}  .bg_color .mat-drawer-inner-container{background-color:#f0f0f0!important}  .check .mat-checkbox-layout{width:100%}  .check .mat-checkbox-layout .mat-checkbox-label{width:100%;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;font-family:CerebriSans-Regular;font-size:15px}']}),e})();var O=o("kmnG"),M=o("d3UM"),A=o("FKr1");function B(e,t){1&e&&(n.Vb(0,"div",3),n.Mc(1," Loading...\n"),n.Ub())}function L(e,t){if(1&e){const e=n.Wb();n.Vb(0,"div",15),n.Vb(1,"button",16),n.gc("click",function(){return n.Ac(e),n.kc(2).toggle()}),n.Qb(2,"fa-icon",17),n.Ub(),n.Mc(3),n.Ub()}if(2&e){const e=n.kc(2);n.Cb(2),n.pc("icon",e.close),n.Cb(1),n.Oc(" ","add"==e.action&&"product"==e.field?"ADD PRODUCT":"EDIT PRODUCT"," ")}}function D(e,t){if(1&e&&(n.Vb(0,"mat-option",40),n.Mc(1),n.Ub()),2&e){const e=t.$implicit;n.qc("value",e._id),n.Cb(1),n.Oc(" ",e.iva_percent,"% ")}}function R(e,t){if(1&e){const e=n.Wb();n.Vb(0,"div",41),n.Vb(1,"mat-checkbox",42),n.gc("change",function(o){n.Ac(e);const i=t.index;return n.kc(3).updateAllComplete(i,o.checked,0)}),n.Mc(2),n.Ub(),n.Ub()}if(2&e){const e=t.$implicit;n.Cb(1),n.pc("checked",e.is_active),n.Cb(1),n.Oc(" ",e.category_name," ")}}const F=function(e){return{"background-color":e}};function E(e,t){if(1&e){const e=n.Wb();n.Vb(0,"div",43),n.Vb(1,"button",44),n.gc("click",function(){n.Ac(e);const o=t.index;return n.kc(3).ChangeColor(o)}),n.Ub(),n.Ub()}if(2&e){const e=t.$implicit,o=t.index,i=n.kc(3);n.Cb(1),n.pc("ngStyle",n.tc(2,F,e))("ngClass",o==i.selectedColorIndex?"outline":"")}}function j(e,t){if(1&e){const e=n.Wb();n.Vb(0,"div",41),n.Vb(1,"mat-checkbox",42),n.gc("change",function(o){n.Ac(e);const i=t.index;return n.kc(3).updateAllComplete(i,o.checked,1)}),n.Mc(2),n.Ub(),n.Ub()}if(2&e){const e=t.$implicit;n.Cb(1),n.pc("checked",e.is_active),n.Cb(1),n.Oc(" ",e.branch_name," ")}}function K(e,t){if(1&e){const e=n.Wb();n.Vb(0,"form",18),n.Vb(1,"div",19),n.Vb(2,"div",20),n.Vb(3,"label"),n.Mc(4,"Name"),n.Ub(),n.Ub(),n.Qb(5,"input",21),n.Ub(),n.Vb(6,"div",19),n.Vb(7,"div",22),n.Vb(8,"label"),n.Mc(9,"Price"),n.Ub(),n.Ub(),n.Vb(10,"div",23),n.Qb(11,"input",24),n.Qb(12,"fa-icon",25),n.Ub(),n.Ub(),n.Vb(13,"div",19),n.Vb(14,"div",22),n.Vb(15,"label"),n.Mc(16,"Beans Value"),n.Ub(),n.Ub(),n.Vb(17,"div",23),n.Qb(18,"input",26),n.Qb(19,"fa-icon",25),n.Ub(),n.Ub(),n.Vb(20,"div",19),n.Vb(21,"div",22),n.Vb(22,"label"),n.Mc(23,"VAT"),n.Ub(),n.Ub(),n.Vb(24,"mat-form-field",27),n.Vb(25,"mat-select",28,29),n.gc("valueChange",function(t){return n.Ac(e),n.kc(2).selectedValue=t}),n.Kc(27,D,2,2,"mat-option",30),n.Ub(),n.Ub(),n.Ub(),n.Vb(28,"div",31),n.Vb(29,"div",32),n.Vb(30,"label"),n.Mc(31,"Category"),n.Ub(),n.Ub(),n.Qb(32,"div",33),n.Ub(),n.Vb(33,"div",34),n.Kc(34,R,3,2,"div",35),n.Ub(),n.Vb(35,"div",31),n.Vb(36,"div",32),n.Vb(37,"label"),n.Mc(38,"Color"),n.Ub(),n.Ub(),n.Qb(39,"div",33),n.Ub(),n.Vb(40,"div",36),n.Kc(41,E,2,4,"div",37),n.Ub(),n.Vb(42,"div",38),n.Vb(43,"div",39),n.Vb(44,"label"),n.Mc(45,"Branch"),n.Ub(),n.Ub(),n.Qb(46,"div",33),n.Ub(),n.Vb(47,"div",34),n.Kc(48,j,3,2,"div",35),n.Ub(),n.Ub()}if(2&e){const e=n.kc(2);n.pc("formGroup",e.ProductForm),n.Cb(12),n.pc("icon",e.faEuroSign),n.Cb(7),n.pc("icon",e.faBolt),n.Cb(6),n.pc("value",e.selectedValue),n.Cb(2),n.pc("ngForOf",e.ivas),n.Cb(7),n.pc("ngForOf",e.categories),n.Cb(7),n.pc("ngForOf",e.colors),n.Cb(7),n.pc("ngForOf",e.branches)}}function Q(e,t){1&e&&n.Qb(0,"i",45)}function N(e,t){1&e&&n.Qb(0,"i",45)}function T(e,t){if(1&e){const e=n.Wb();n.Vb(0,"div",4),n.Kc(1,L,4,2,"div",5),n.Vb(2,"div",6),n.Kc(3,K,49,8,"form",7),n.Ub(),n.Vb(4,"div",8),n.Vb(5,"div",9),n.Vb(6,"div",10),n.Vb(7,"button",11),n.gc("click",function(){n.Ac(e);const t=n.kc();return"edit"==t.action?t.saveAction(!0):t.saveAction()}),n.Kc(8,Q,1,0,"i",12),n.Vb(9,"span"),n.Mc(10,"SAVE"),n.Ub(),n.Ub(),n.Ub(),n.Vb(11,"div",13),n.Vb(12,"button",14),n.gc("click",function(){return n.Ac(e),n.kc().deleteAction()}),n.Kc(13,N,1,0,"i",12),n.Vb(14,"span"),n.Mc(15,"DELETE ITEM"),n.Ub(),n.Ub(),n.Ub(),n.Ub(),n.Ub(),n.Ub()}if(2&e){const e=n.kc();n.Cb(1),n.pc("ngIf","product"==e.field),n.Cb(2),n.pc("ngIf","product"==e.field),n.Cb(5),n.pc("ngIf",1==e.isLoadingSave),n.Cb(5),n.pc("ngIf",1==e.isLoadingDelete)}}let W=(()=>{class e{constructor(e,t,o){this.apiService=e,this.commonService=t,this.modalService=o,this.close=h.b,this.branches=[],this.colors=["#4751c9","#45a9ea","#cc6ae3","#dea766","#7c52cb","#16a186"],this.faEuroSign=r.n,this.faBolt=r.e,this.selectedColorIndex=0,this.categories=[],this.ivas=[],this.product_id="",this.selectedValue="",this.isLoadingSave=!1,this.isLoadingDelete=!1,this.isLoading=!0,this.ProductForm=new g.g({product_name:new g.d("",g.u.required),price:new g.d("",g.u.required),vat:new g.d(this.selectedValue,g.u.required),beanValue:new g.d("",g.u.required)}),this.commonService.resetForms.subscribe(()=>{this.initForm()})}ngOnInit(){this.get_iva(),this.get_categories(),this.get_Branches(),this.commonService.productEmitter.subscribe(e=>{this.product_id=e,console.log(this.product_id),this.product_id?this.get_product_details():this.initForm()})}toggle(){this.sidenav.toggle()}ChangeColor(e){this.selectedColorIndex=e}initForm(){var e;this.selectedValue=null===(e=this.ivas[0])||void 0===e?void 0:e._id,this.ProductForm.setValue({product_name:"",price:"",vat:this.selectedValue||"",beanValue:""}),this.init_branches(),this.init_categories(),this.selectedColorIndex=0,this.isLoading=!1}get_product_details(){this.isLoading=!0,this.apiService.getProducts({id:this.product_id}).subscribe(e=>{this.selectedValue=e.data.products.iva,this.ProductForm.setValue({product_name:e.data.products.product_name,price:e.data.products.price,vat:this.selectedValue,beanValue:e.data.products.beanValue||""}),this.selectedColorIndex=this.colors.findIndex(t=>t===e.data.products.color),this.init_branches(),this.init_categories(),e.data.products.categories.forEach(e=>{let t=this.categories.findIndex(t=>t._id===e);this.categories[t].is_active=!0}),e.data.products.available_branches.forEach(e=>{let t=this.branches.findIndex(t=>t._id===e);this.branches[t].is_active=!0}),this.isLoading=!1})}init_branches(){this.branches.forEach(e=>{e.is_active=!1})}init_categories(){this.categories.forEach(e=>{e.is_active=!1})}saveAction(e=!1){let t=this.createRequestObject();this.ProductForm.valid?this.commonService.isAnycategorySelected(this.categories)?this.commonService.isAnyBranchSelected(this.branches)?e?this.edit_product(t):this.save_product(t):this.commonService.showAlert("select atleast any one branch"):this.commonService.showAlert("select atleast any one category"):this.commonService.showAlert("Product name, price and vat percentage is mandatory")}deleteAction(){this.modalService.open(f.a).result.then(()=>{this.isLoadingDelete=!0,this.apiService.deleteproduct({id:this.product_id}).subscribe(e=>{this.isLoadingDelete=!1,this.commonService.showAlert(e.message),e.success&&(this.commonService.commonEmitter.emit(),this.sidenav.close())})},()=>{})}save_product(e){this.isLoadingSave=!0,this.apiService.addProduct(e).subscribe(e=>{this.isLoadingSave=!1,e.success?(this.commonService.showAlert(e.message),this.commonService.commonEmitter.emit(),this.sidenav.close()):this.commonService.showAlert(e.message)})}edit_product(e){e.id=this.product_id,this.isLoadingSave=!0,this.apiService.updateProduct(e).subscribe(e=>{this.isLoadingSave=!1,this.commonService.showAlert(e.message),e.success&&(this.commonService.commonEmitter.emit(),this.sidenav.close())})}createRequestObject(){var e;let t=new Object;t.product_name=this.ProductForm.controls.product_name.value,t.price=this.ProductForm.controls.price.value.replace(",",".").trim();let o=this.ivas.findIndex(e=>e._id==this.selectedValue),i=Number(this.ProductForm.controls.price.value.replace(",",".").trim())*this.ivas[o].iva_percent/(100+this.ivas[o].iva_percent);return t.price_with_iva=(Number(this.ProductForm.controls.price.value.replace(",",".").trim())-i).toFixed(2),t.iva=this.ProductForm.controls.vat.value,t.beanValue=this.ProductForm.controls.beanValue.value,t.categories=this.get_selected_category().join(","),t.available_branches=this.get_selected_branches().join(","),t.color=this.colors[this.selectedColorIndex],t.created_by=JSON.parse(null!==(e=localStorage.getItem("syra_admin"))&&void 0!==e?e:"").data._id,t}get_Branches(){this.apiService.get_branch({}).subscribe(e=>{e.data.branch_list.forEach(e=>{e.is_active=!1}),this.branches=e.data.branch_list})}get_categories(){this.apiService.getCategories({}).subscribe(e=>{e.data.category.forEach(e=>{e.is_active=!1}),this.categories=e.data.category})}get_iva(){this.apiService.getIVA({}).subscribe(e=>{this.ivas=this.commonService.sort(e.data.ivalist),this.selectedValue=this.ivas[0]._id,this.ProductForm.setValue({product_name:"",price:"",vat:this.selectedValue,beanValue:""})})}updateAllComplete(e,t,o){0==o?this.categories[e].is_active=t:this.branches[e].is_active=t}get_selected_branches(){let e=[];return this.branches.forEach(t=>{t.is_active&&e.push(t._id)}),e}get_selected_category(){let e=[];return this.categories.forEach(t=>{t.is_active&&e.push(t._id)}),e}}return e.\u0275fac=function(t){return new(t||e)(n.Pb(s.a),n.Pb(l.a),n.Pb(u.c))},e.\u0275cmp=n.Jb({type:e,selectors:[["app-product-form"]],inputs:{sidenav:"sidenav",field:"field",action:"action"},decls:3,vars:2,consts:[["rel","stylesheet","href",n.Qc("https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css")],["class","h-80","class","bg-white d-flex align-items-center justify-content-center alpha50 content position-absolute left-0 top-0 w-100 h100vh",4,"ngIf"],["class","w-100",4,"ngIf"],[1,"bg-white","d-flex","align-items-center","justify-content-center","alpha50","content","position-absolute","left-0","top-0","w-100","h100vh"],[1,"w-100"],["class","title text-center sticky-top",4,"ngIf"],[1,"h75vh"],["class","h-100",3,"formGroup",4,"ngIf"],[1,"h25vh"],[1,"row","mx-0","justify-content-center","align-items-center"],[1,"col-12","py-3","d-flex","justify-content-center"],["type","submit",1,"btn","text-white","btn-sm",3,"click"],["class","fa fa-spinner fa-spin mr-3",4,"ngIf"],[1,"col-12","pb-3","d-flex","justify-content-center"],["type","button",1,"btn-danger",3,"click"],[1,"title","text-center","sticky-top"],[1,"bg-transparent","border-0","form-close-btn","position-absolute",3,"click"],[3,"icon"],[1,"h-100",3,"formGroup"],[1,"form-group","mx-4"],[1,"text-left","col-12","mx-0","mt-4","p-0"],["type","text","id","username","placeholder","Espresso","formControlName","product_name","autocomplete","off",1,"form-control","w-100"],[1,"text-left","col-12","mx-0","mt-1","p-0"],[1,"col-12","px-0","w-100"],["type","text","id","username","placeholder","EUR","autocomplete","off","formControlName","price",1,"form-control","w-100"],[1,"position-absolute","text-dark",2,"right","20px","top","35%",3,"icon"],["type","text","id","username","placeholder","Beans","autocomplete","off","formControlName","beanValue",1,"form-control","w-100"],["appearance","outline",1,"w-100","form-feild","shadow-sm"],["name","iva","formControlName","vat",3,"value","valueChange"],["dropDown",""],[3,"value",4,"ngFor","ngForOf"],[1,"form-group","mx-3"],[1,"text-left","col-12","mx-2","mt-2","p-0"],[1,"line","mx-2","mt-2"],[1,"form-row","ml-4","p-0"],["class","col-6 mx-0 p-0 ",4,"ngFor","ngForOf"],[1,"row","mx-1","ml-4","p-0"],["class","col-2 mx-0 p-0",4,"ngFor","ngForOf"],[1,"form-group","mx-3","mt-4"],[1,"text-left","col-12","mx-2","p-0"],[3,"value"],[1,"col-6","mx-0","p-0"],[1,"check",2,"font-family","CerebriSans-Regular","font-size","16px",3,"checked","change"],[1,"col-2","mx-0","p-0"],["type","button",1,"circle",3,"ngStyle","ngClass","click"],[1,"fa","fa-spinner","fa-spin","mr-3"]],template:function(e,t){1&e&&(n.Qb(0,"link",0),n.Kc(1,B,2,0,"div",1),n.Kc(2,T,16,4,"div",2)),2&e&&(n.Cb(1),n.pc("ngIf",t.isLoading),n.Cb(1),n.pc("ngIf",!t.isLoading))},directives:[i.l,b.a,g.w,g.n,g.h,g.c,g.m,g.f,O.b,M.a,i.k,A.l,m.a,i.m,i.j],styles:["input[_ngcontent-%COMP%]{border-radius:0!important}input[_ngcontent-%COMP%], input[_ngcontent-%COMP%]:focus{border:1px solid #4a4a4a;box-shadow:0 3px 6px 0 rgba(0,0,0,.16);background-color:#f7f7f7}input[_ngcontent-%COMP%]:focus{outline:none}input[_ngcontent-%COMP%], input[_ngcontent-%COMP%]::-webkit-input-placeholder{font-size:16px;font-weight:400;font-family:cerebrisans-Regular}  .check.mat-checkbox .mat-checkbox-ripple{width:0;height:0}.line[_ngcontent-%COMP%]{height:.1px;width:100%;padding:.5px;background-color:#4a4a4a}.circle[_ngcontent-%COMP%]{border-radius:50%;height:2em;width:2em;outline:none;border:none}.form-row[_ngcontent-%COMP%]{width:-webkit-min-content;width:-moz-min-content;width:min-content;overflow-x:hidden}.check[_ngcontent-%COMP%]{margin-right:12em}.mat-checkbox-indeterminate[_ngcontent-%COMP%]   .mat-checkbox-background[_ngcontent-%COMP%],   .mat-checkbox-checked.mat-accent .mat-checkbox-background{background-color:#fff!important;border:1px solid!important}.outline[_ngcontent-%COMP%]{border:2.5px solid}.right-20[_ngcontent-%COMP%]{right:20px}.top-10[_ngcontent-%COMP%]{top:9px}.form-feild[_ngcontent-%COMP%]{border:1px solid;font-weight:400;font-family:cerebrisans-Regular;background-color:#f7f7f7}  .mat-checkbox-inner-container{width:25px!important;height:25px!important;border-radius:0}  .mat-checkbox-checkmark-path{stroke:#000!important}.btn[_ngcontent-%COMP%]{background-color:#679187;border:none;border-radius:0;box-shadow:0 3px 6px 0 rgba(0,0,0,.16);min-width:240px;min-height:40px}.btn[_ngcontent-%COMP%]:focus{border:none;box-shadow:none}.btn-danger[_ngcontent-%COMP%]{position:-webkit-sticky;position:sticky;bottom:17px;left:45px;right:50px;min-width:240px;min-height:40px;border-style:none;border-radius:0}.btn-danger[_ngcontent-%COMP%]:focus{box-shadow:none;outline:none}  .form-feild .mat-form-field-flex{height:30px!important}  .form-feild .mat-form-field-infix{border-top:unset!important}  .form-feild .mat-form-field-wrapper{height:30px!important;background-color:#f7f7f7}  .form-feild .mat-form-field-appearance-outline .mat-form-field-infix{padding:0!important}  .bg_color .mat-drawer-inner-container{background-color:#f0f0f0!important}"]}),e})();var z=o("+0xr"),J=o("1jcm"),$=o("NFeN");const q=["table"],G=["products_table"],H=["sidenav"],X=["tablerow"];function Y(e,t){if(1&e&&n.Qb(0,"app-category-form",22),2&e){const e=n.kc(),t=n.xc(3);n.pc("sidenav",t)("field",e.field)("action",e.action)("parentParams",e.paramsFromParent)}}function Z(e,t){if(1&e&&n.Qb(0,"app-product-form",23),2&e){const e=n.kc(),t=n.xc(3);n.pc("sidenav",t)("field",e.field)("action",e.action)}}function ee(e,t){1&e&&(n.Vb(0,"div",24),n.Vb(1,"span",25),n.Mc(2," Loading..."),n.Ub(),n.Ub())}function te(e,t){1&e&&(n.Vb(0,"div",26),n.Mc(1," No category Found "),n.Ub())}function oe(e,t){1&e&&n.Qb(0,"th",35)}const ie=function(e){return{"background-color":e}};function ce(e,t){if(1&e&&(n.Vb(0,"td",36),n.Vb(1,"div",37),n.Qb(2,"div",38),n.Vb(3,"span",39),n.Mc(4),n.Ub(),n.Ub(),n.Ub()),2&e){const e=t.$implicit;n.Cb(2),n.pc("ngStyle",n.tc(2,ie,e.color)),n.Cb(2),n.Nc(null==e?null:e.category_name)}}function re(e,t){1&e&&n.Qb(0,"th",35)}function ae(e,t){if(1&e){const e=n.Wb();n.Vb(0,"button",46),n.gc("click",function(){n.Ac(e);const t=n.kc().index;return n.kc(2).openSideBar("category","edit",t)}),n.Vb(1,"mat-icon",47),n.Mc(2,"edit"),n.Ub(),n.Ub()}}function ne(e,t){if(1&e&&(n.Vb(0,"button",48),n.Qb(1,"fa-icon",17),n.Ub()),2&e){const e=n.kc(3);n.Cb(1),n.pc("icon",e.faArrowsAlt)}}function se(e,t){if(1&e){const e=n.Wb();n.Vb(0,"td",40),n.Vb(1,"div",41),n.Vb(2,"div",42),n.Vb(3,"mat-slide-toggle",43),n.gc("click",function(){n.Ac(e);const o=t.index;return n.kc(2).onCategoryStatusChange(o)}),n.Ub(),n.Kc(4,ae,3,0,"button",44),n.Kc(5,ne,2,1,"button",45),n.Ub(),n.Ub(),n.Ub()}if(2&e){const e=t.$implicit,o=n.kc(2);n.Cb(3),n.qc("checked",e.is_Active),n.Cb(1),n.pc("ngIf",null==o.masterFilterId),n.Cb(1),n.pc("ngIf",null!=o.masterFilterId)}}function le(e,t){if(1&e){const e=n.Wb();n.Vb(0,"tr",49),n.gc("click",function(o){n.Ac(e);const i=t.index;return n.kc(2).loadProductForSpecificCategory(i,o)}),n.Ub()}if(2&e){const e=t.$implicit,o=t.index,i=n.kc(2);n.pc("cdkDragData",e)("ngClass",i.selectedCategoryRow==o?"bg-gray":"bg-white")}}function de(e,t){if(1&e){const e=n.Wb();n.Vb(0,"table",27,28),n.gc("cdkDropListDropped",function(t){return n.Ac(e),n.kc().dropTable(t)}),n.Tb(2,29),n.Kc(3,oe,1,0,"th",30),n.Kc(4,ce,5,4,"td",31),n.Sb(),n.Tb(5,32),n.Kc(6,re,1,0,"th",30),n.Kc(7,se,6,3,"td",33),n.Sb(),n.Kc(8,le,1,2,"tr",34),n.Ub()}if(2&e){const e=n.kc();n.pc("dataSource",e.category)("cdkDropListData",e.category)("cdkDropListSortingDisabled",null==e.masterFilterId),n.Cb(8),n.pc("matRowDefColumns",e.display_col_category)}}function be(e,t){1&e&&(n.Vb(0,"div",24),n.Vb(1,"span",25),n.Mc(2," Loading..."),n.Ub(),n.Ub())}function he(e,t){1&e&&(n.Vb(0,"div",50),n.Mc(1," No Products Found "),n.Ub())}function ge(e,t){1&e&&n.Qb(0,"th",35)}function fe(e,t){if(1&e&&(n.Vb(0,"td",55),n.Vb(1,"div",56),n.Qb(2,"div",38),n.Vb(3,"span",39),n.Mc(4),n.Ub(),n.Ub(),n.Ub()),2&e){const e=t.$implicit;n.Cb(2),n.pc("ngStyle",n.tc(2,ie,e.color)),n.Cb(2),n.Nc(e.product_name)}}function ue(e,t){1&e&&n.Qb(0,"th",35)}function me(e,t){if(1&e){const e=n.Wb();n.Vb(0,"button",46),n.gc("click",function(){n.Ac(e);const t=n.kc().index;return n.kc(2).openSideBar("product","edit",t)}),n.Vb(1,"mat-icon",47),n.Mc(2,"edit"),n.Ub(),n.Ub()}}function pe(e,t){if(1&e&&(n.Vb(0,"button",48),n.Qb(1,"fa-icon",17),n.Ub()),2&e){const e=n.kc(3);n.Cb(1),n.pc("icon",e.faArrowsAlt)}}function ve(e,t){if(1&e){const e=n.Wb();n.Vb(0,"td",57),n.Vb(1,"div",58),n.Vb(2,"div",42),n.Vb(3,"mat-slide-toggle",59),n.gc("change",function(){n.Ac(e);const o=t.index;return n.kc(2).onProductStatusChange(o)}),n.Ub(),n.Kc(4,me,3,0,"button",44),n.Kc(5,pe,2,1,"button",45),n.Ub(),n.Ub(),n.Ub()}if(2&e){const e=t.$implicit,o=n.kc(2);n.Cb(3),n.qc("checked",e.is_Active),n.Cb(1),n.pc("ngIf",null==o.masterFilterId),n.Cb(1),n.pc("ngIf",null!=o.masterFilterId)}}function Ce(e,t){1&e&&n.Qb(0,"tr",60),2&e&&n.pc("cdkDragData",t.$implicit)}function ye(e,t){if(1&e){const e=n.Wb();n.Vb(0,"table",27,51),n.gc("cdkDropListDropped",function(t){return n.Ac(e),n.kc().dropProducts(t)}),n.Tb(2,29),n.Kc(3,ge,1,0,"th",30),n.Kc(4,fe,5,4,"td",52),n.Sb(),n.Tb(5,32),n.Kc(6,ue,1,0,"th",30),n.Kc(7,ve,6,3,"td",53),n.Sb(),n.Kc(8,Ce,1,1,"tr",54),n.Ub()}if(2&e){const e=n.kc();n.pc("dataSource",e.products)("cdkDropListData",e.products)("cdkDropListSortingDisabled",null==e.masterFilterId),n.Cb(8),n.pc("matRowDefColumns",e.display_col_category)}}const Se=[{path:"",component:(()=>{class e{constructor(e,t,o,i){this.router=e,this.activeRoute=t,this.apiServices=o,this.commonService=i,this.Pagewidth=0,this.faPlusCircle=r.z,this.faPencilAlt=r.w,this.faArrowsAlt=r.c,this.field="",this.action="",this.selectedId="",this.selectedCategoryRow=-1,this.category=[],this.products=[],this.sideMenuClosing=!0,this.isChangingStatus=!1,this.allProducts=[],this.isLoadingProduct=!1,this.isLoadingCatelogy=!1,this.display_col_category=["name_color","action"],this.masterFilterId=null,this.Pagewidth=window.innerWidth}ngAfterViewInit(){var e;this.paramsFromParent=this.activeRoute.snapshot.paramMap,this.paramsFromParent.get("toAddCategory")&&this.openSideBar("category","add"),this.listenCategory();let t=localStorage.getItem("selectedBranch")?JSON.parse(localStorage.getItem("selectedBranch")||""):[];console.log(t);let o=null==t?void 0:t.map(function(e){return e._id});this.masterFilterId=1==(null==t?void 0:t.length)?null===(e=t[0])||void 0===e?void 0:e._id:null,null==t||0==o.length?(this.get_categories(),this.get_products()):(this.get_branch_products(o),this.get_branch_categories(o)),this.commonService.select_branch.subscribe(e=>{var t;console.log("response?.length == 1",1==(null==e?void 0:e.length),"response?.length == 1",e),this.masterFilterId=1==(null==e?void 0:e.length)?null===(t=e[0])||void 0===t?void 0:t._id:null;let o=e.map(function(e){return e._id});this.selectedCategoryRow=-1,0==o.length?(this.get_categories(),this.get_products()):(this.get_branch_products(o),this.get_branch_categories(o))})}get_branch_products(e){this.isLoadingProduct=!0,this.apiServices.get_branch_products({branch_list:e}).subscribe(e=>{this.isLoadingProduct=!1,e.success?(this.allProducts=e.data.products,this.products=e.data.products):this.commonService.showAlert(e.message)})}get_branch_categories(e){this.isLoadingCatelogy=!0,this.apiServices.get_branch_category({branch_list:e}).subscribe(e=>{this.isLoadingCatelogy=!1,e.success?this.category=e.data.category:this.commonService.showAlert(e.message)})}listenCategory(){this.commonService.commonEmitter.subscribe(e=>{let t=localStorage.getItem("selectedBranch")?JSON.parse(localStorage.getItem("selectedBranch")||""):null,o=null==t?void 0:t.map(function(e){return e._id});null==t||0==o.length?(this.get_categories(),this.get_products()):(this.get_branch_products(o),this.get_branch_categories(o))})}get_categories(){this.isLoadingCatelogy=!0,this.apiServices.getCategories().subscribe(e=>{this.isLoadingCatelogy=!1,e.success?this.category=e.data.category:this.commonService.showAlert(e.message)})}get_products(){this.isLoadingProduct=!0,this.apiServices.getProducts().subscribe(e=>{this.isLoadingProduct=!1,e.success?(console.log(this.selectedCategoryRow,"selected"),this.selectedCategoryRow>=0?this.loadProductForSpecificCategory(this.selectedCategoryRow,null):(this.allProducts=e.data.products,this.products=e.data.products)):this.commonService.showAlert(e.message)})}onCategoryStatusChange(e){var t;this.isChangingStatus=!0,this.category[e].is_Active=!this.category[e].is_Active,this.category[e].id=this.category[e]._id,this.category[e].available_branches=Array.isArray(this.category[e].available_branches)?null===(t=this.category[e].available_branches)||void 0===t?void 0:t.join(","):this.category[e].available_branches,this.isLoadingCatelogy=!0,this.apiServices.updateCategory(this.category[e]).subscribe(e=>{this.isLoadingCatelogy=!1,this.commonService.showAlert(e.message)})}onProductStatusChange(e){var t,o;this.products[e].is_Active=!this.products[e].is_Active,this.products[e].id=this.products[e]._id,this.products[e].categories=Array.isArray(this.products[e].categories)?null===(t=this.products[e].categories)||void 0===t?void 0:t.join(","):this.products[e].categories,this.products[e].available_branches=Array.isArray(this.products[e].available_branches)?null===(o=this.products[e].available_branches)||void 0===o?void 0:o.join(","):this.products[e].available_branches,console.log(this.products[e]),this.isLoadingProduct=!0,this.apiServices.updateProduct(this.products[e]).subscribe(e=>{this.isLoadingProduct=!1,this.commonService.showAlert(e.message)})}dropTable(e){let t=localStorage.getItem("selectedBranch")?JSON.parse(localStorage.getItem("selectedBranch")||""):null;if(1==(null==t?void 0:t.length)){const o=this.category.findIndex(t=>t===e.item.data);Object(a.d)(this.category,o,e.currentIndex),this.table.renderRows();let i=[];this.category.forEach((e,t)=>{let o=new Object;o.id=e._id,o.order=t+1,i.push(o)}),this.isLoadingCatelogy=!0;let c=t[0]._id;c="syra-all"==c?null:c,this.apiServices.update_category_order({order:i,branch_id:c}).subscribe(e=>{this.isLoadingCatelogy=!1,this.commonService.showAlert(e.message)}),this.selectedCategoryRow==o&&(this.selectedCategoryRow=e.currentIndex),console.log(this.selectedCategoryRow,"row")}else this.commonService.showAlert("Choose the any one branch to reorder")}dropProducts(e){let t=localStorage.getItem("selectedBranch")?JSON.parse(localStorage.getItem("selectedBranch")||""):null;if(1==(null==t?void 0:t.length)){const t=this.products.findIndex(t=>t===e.item.data);Object(a.d)(this.products,t,e.currentIndex),this.ProductsTable.renderRows();let o=[];this.products.forEach((e,t)=>{let i=new Object;i.id=e._id,i.name=e.product_name,i.order=t+1,o.push(i)}),this.isLoadingProduct=!0;let i=(localStorage.getItem("selectedBranch")?JSON.parse(localStorage.getItem("selectedBranch")||""):null)[0]._id;i="syra-all"==i?null:i,this.apiServices.update_product_order({order:o,branch_id:i}).subscribe(e=>{this.isLoadingProduct=!1,this.commonService.showAlert(e.message)})}else this.commonService.showAlert("Choose any one branch to reorder")}onResize(e){this.Pagewidth=window.innerWidth}openSideBar(e,t,o=-1){this.isChangingStatus=!0,this.field=e,this.action=t,this.selectedId="category"==e?o>=0?this.category[o]._id:null:o>=0?this.products[o]._id:null,this.sidenav.toggle()}push(){"category"==this.field?this.commonService.categoryEmitter.emit("edit"==this.action?this.selectedId:null):this.commonService.productEmitter.emit("edit"==this.action?this.selectedId:null)}loadProductForSpecificCategory(e,t){null==t||t.preventDefault(),null==t||t.stopPropagation(),this.isChangingStatus||(this.selectedCategoryRow==e?(this.selectedCategoryRow=-1,this.products=this.allProducts):(this.selectedCategoryRow=e,this.products=this.allProducts.filter(t=>t.categories.includes(this.category[e]._id)),console.log(this.products))),this.isChangingStatus=!1}close(){this.sideMenuClosing=!0,this.commonService.resetForms.emit()}}return e.\u0275fac=function(t){return new(t||e)(n.Pb(c.d),n.Pb(c.a),n.Pb(s.a),n.Pb(l.a))},e.\u0275cmp=n.Jb({type:e,selectors:[["app-pos-management"]],viewQuery:function(e,t){if(1&e&&(n.Rc(q,!0),n.Rc(G,!0),n.Rc(H,!0),n.Rc(X,!0)),2&e){let e;n.wc(e=n.hc())&&(t.table=e.first),n.wc(e=n.hc())&&(t.ProductsTable=e.first),n.wc(e=n.hc())&&(t.sidenav=e.first),n.wc(e=n.hc())&&(t.tablerow=e.first)}},hostBindings:function(e,t){1&e&&n.gc("resize",function(e){return t.onResize(e)},!1,n.zc)},decls:33,vars:14,consts:[[1,"container","wrapper"],[1,"bg-transparent"],[1,"bg_color",3,"mode","position","ngClass","opened","closed"],["sidenav",""],[3,"sidenav","field","action","parentParams",4,"ngIf"],[3,"sidenav","field","action",4,"ngIf"],[1,"mb-5"],[1,"mx-4"],[1,"row"],[1,"col-md-12","col-lg-5","h-100"],["class","bg-white d-flex align-items-center justify-content-center z-index-2 alpha50 content position-absolute left-0 w100-30px h-100",4,"ngIf"],[1,"bg-white","table-w-350-scroll",2,"min-height","96px"],[1,"col-12","text-center","title","sticky-top"],[1,"row","justify-content-center"],[1,"col-12"],[1,"add-btn"],[1,"border-0","bg-transparent","edit_btn_act",3,"click"],[1,"text-dark",3,"icon"],["class","d-flex justify-content-center align-items-center ","style","min-height: 100px; font-size: 16;",4,"ngIf"],["mat-table","","class","syra-table w-100","cdkDropList","",3,"dataSource","cdkDropListData","cdkDropListSortingDisabled","cdkDropListDropped",4,"ngIf"],[1,"col-md-12","col-lg-7","h-100",3,"ngClass"],["class","d-flex justify-content-center align-items-center","style","min-height: 96px; font-size: 16;",4,"ngIf"],[3,"sidenav","field","action","parentParams"],[3,"sidenav","field","action"],[1,"bg-white","d-flex","align-items-center","justify-content-center","z-index-2","alpha50","content","position-absolute","left-0","w100-30px","h-100"],[1,"mt-5"],[1,"d-flex","justify-content-center","align-items-center",2,"min-height","100px","font-size","16"],["mat-table","","cdkDropList","",1,"syra-table","w-100",3,"dataSource","cdkDropListData","cdkDropListSortingDisabled","cdkDropListDropped"],["table",""],["matColumnDef","name_color"],["mat-header-cell","","class","p-24 ",4,"matHeaderCellDef"],["mat-cell","","class","p-0 py-point70em",4,"matCellDef"],["matColumnDef","action"],["mat-cell","","class","text-right p-0 py-point70em",4,"matCellDef"],["mat-row","","class","p-0 border-bottom draggable-row","cdkDrag","",3,"cdkDragData","ngClass","click",4,"matRowDef","matRowDefColumns"],["mat-header-cell","",1,"p-24"],["mat-cell","",1,"p-0","py-point70em"],[1,"row","ml-1","p-24",2,"pointer-events","all"],[1,"template-color",3,"ngStyle"],[1,"ml-2"],["mat-cell","",1,"text-right","p-0","py-point70em"],[1,"ml-5","p-24"],[1,"row","justify-content-end",2,"pointer-events","all"],[1,"slide",3,"checked","click"],["class","border-0 bg-transparent edit_btn_act pr-1",3,"click",4,"ngIf"],["class","border-0 bg-transparent edit_btn_act pr-1",4,"ngIf"],[1,"border-0","bg-transparent","edit_btn_act","pr-1",3,"click"],["aria-hidden","false","aria-label","Example home icon",1,"text-dark","font-size-20"],[1,"border-0","bg-transparent","edit_btn_act","pr-1"],["mat-row","","cdkDrag","",1,"p-0","border-bottom","draggable-row",3,"cdkDragData","ngClass","click"],[1,"d-flex","justify-content-center","align-items-center",2,"min-height","96px","font-size","16"],["products_table",""],["mat-cell","","class","product-cell p-24 py-point70em",4,"matCellDef"],["mat-cell","","class","text-right p-24 py-point70em",4,"matCellDef"],["mat-row","","class","p-0 border-bottom","cdkDrag","",3,"cdkDragData",4,"matRowDef","matRowDefColumns"],["mat-cell","",1,"product-cell","p-24","py-point70em"],[1,"row","ml-1"],["mat-cell","",1,"text-right","p-24","py-point70em"],[1,"ml-5"],[1,"slide",3,"checked","change"],["mat-row","","cdkDrag","",1,"p-0","border-bottom",3,"cdkDragData"]],template:function(e,t){1&e&&(n.Vb(0,"div",0),n.Vb(1,"mat-sidenav-container",1),n.Vb(2,"mat-sidenav",2,3),n.gc("opened",function(){return t.push()})("closed",function(){return t.close()}),n.Kc(4,Y,1,4,"app-category-form",4),n.Kc(5,Z,1,3,"app-product-form",5),n.Ub(),n.Vb(6,"mat-sidenav-content",6),n.Vb(7,"div",7),n.Vb(8,"div",8),n.Vb(9,"div",9),n.Kc(10,ee,3,0,"div",10),n.Vb(11,"div",11),n.Vb(12,"div",12),n.Vb(13,"div",13),n.Vb(14,"span",14),n.Mc(15,"CATEGORIES"),n.Ub(),n.Vb(16,"div",15),n.Vb(17,"button",16),n.gc("click",function(){return t.openSideBar("category","add")}),n.Qb(18,"fa-icon",17),n.Ub(),n.Ub(),n.Ub(),n.Ub(),n.Kc(19,te,2,0,"div",18),n.Kc(20,de,9,4,"table",19),n.Ub(),n.Ub(),n.Vb(21,"div",20),n.Kc(22,be,3,0,"div",10),n.Vb(23,"div",11),n.Vb(24,"div",12),n.Vb(25,"div",13),n.Vb(26,"span",14),n.Mc(27,"PRODUCTS"),n.Ub(),n.Vb(28,"div",15),n.Vb(29,"button",16),n.gc("click",function(){return t.openSideBar("product","add")}),n.Qb(30,"fa-icon",17),n.Ub(),n.Ub(),n.Ub(),n.Ub(),n.Kc(31,he,2,0,"div",21),n.Kc(32,ye,9,4,"table",19),n.Ub(),n.Ub(),n.Ub(),n.Ub(),n.Ub(),n.Ub(),n.Ub()),2&e&&(n.Cb(2),n.pc("mode","over")("position","end")("ngClass",t.Pagewidth<=576?"w-100":"w-370px"),n.Cb(2),n.pc("ngIf","category"==t.field),n.Cb(1),n.pc("ngIf","product"==t.field),n.Cb(5),n.pc("ngIf",1==t.isLoadingCatelogy),n.Cb(8),n.pc("icon",t.faPlusCircle),n.Cb(1),n.pc("ngIf",0==(null==t.category?null:t.category.length)&&0==t.isLoadingCatelogy),n.Cb(1),n.pc("ngIf",(null==t.category?null:t.category.length)>0),n.Cb(1),n.pc("ngClass",t.Pagewidth<=1024?"mt-4":"mt-0"),n.Cb(1),n.pc("ngIf",1==t.isLoadingProduct),n.Cb(8),n.pc("icon",t.faPlusCircle),n.Cb(1),n.pc("ngIf",t.products&&0==t.products.length&&0==t.isLoadingProduct),n.Cb(1),n.pc("ngIf",(null==t.products?null:t.products.length)>0))},directives:[d.b,d.a,i.j,i.l,d.c,b.a,I,W,z.n,a.b,z.c,z.i,z.b,z.m,z.h,z.a,i.m,J.a,$.a,z.l,a.a],styles:['@font-face{font-family:HelveticaNeue-Bold;font-style:normal;font-weight:400;src:local("HelveticaNeue-Bold"),url("Helvetica Neu Bold.61acdee6f288cddccf23.ttf") format("ttf")}@font-face{font-family:CerebriSans-Bold;font-style:normal;font-weight:400;src:local("CerebriSans-Bold"),url(CerebriSans-Bold.b28d46a00415bec63bba.ttf) format("ttf");src:local("CerebriSans-Bold"),url(CerebriSans-Bold.f48e05c76db5e6bd676c.eot) format("eot");src:local("CerebriSans-Bold"),url(CerebriSans-Bold.1b8ded389d0dc424b19b.svg) format("svg");src:local("CerebriSans-Bold"),url(CerebriSans-Bold.1b4400b13ebd711dd3e8.woff) format("woff");src:local("CerebriSans-Bold"),url(CerebriSans-Bold.1b89f96de9e78fd26a7f.woff2) format("woff2")}@font-face{font-family:\\ CerebriSans-semibold;font-style:normal;font-weight:400;src:local("CerebriSans-Bold"),url(CerebriSans-SemiBold.dcda3674ac76f4e31e87.ttf) format("ttf");src:local("CerebriSans-Bold"),url(CerebriSans-SemiBold.8c2b25fda64ba8de398a.eot) format("eot");src:local("CerebriSans-Bold"),url(CerebriSans-SemiBold.d4680810013431cbe6c7.svg) format("svg");src:local("CerebriSans-Bold"),url(CerebriSans-SemiBold.700f305197d6f163d348.woff) format("woff");src:local("CerebriSans-Bold"),url(CerebriSans-SemiBold.29097270d5f0e9003fd4.woff2) format("woff2")}@font-face{font-family:CerebriSans-Light;font-style:normal;font-weight:400;src:local("CerebriSans-Bold"),url(CerebriSans-Light.ddb81c4966caddeb5524.ttf) format("ttf");src:local("CerebriSans-Bold"),url(CerebriSans-Light.1e4f0f37d8ed20e51e27.eot) format("eot");src:local("CerebriSans-Bold"),url(CerebriSans-Light.efa3b6fb5acdd7fa23ab.svg) format("svg");src:local("CerebriSans-Bold"),url(CerebriSans-Light.650c547e86d77193b2d0.woff) format("woff");src:local("CerebriSans-Bold"),url(CerebriSans-Light.93b3eb2ec96f14eca31e.woff2) format("woff2")}@font-face{font-family:CerebriSans-Regular;font-style:normal;font-weight:400;src:local("CerebriSans-Regular"),url(CerebriSans-Regular.da1eaafe42c93475b338.ttf) format("ttf");src:local("CerebriSans-Regular"),url(CerebriSans-Regular.ccb7af1c430bd224cb88.eot) format("eot");src:local("CerebriSans-Regular"),url(CerebriSans-Regular.8a18b1b14a235efe141d.svg) format("svg");src:local("CerebriSans-Regular"),url(CerebriSans-Regular.81bf15fd01ef8a22e704.woff) format("woff");src:local("CerebriSans-Regular"),url(CerebriSans-Regular.a9f198f5da5b6fe108ed.woff2) format("woff2")}.wrapper[_ngcontent-%COMP%]{margin-top:130px;font-family:CerebriSans-Bold}.syra-table[_ngcontent-%COMP%]   .mat-row[_ngcontent-%COMP%]:nth-child(2n){background-color:#fff}.syra-table[_ngcontent-%COMP%]   .mat-row[_ngcontent-%COMP%]{height:47px}.table-w-350-scroll[_ngcontent-%COMP%]{max-height:75vh;overflow:auto}.mat-slide-toggle.mat-checked[_ngcontent-%COMP%]   .mat-slide-toggle-bar[_ngcontent-%COMP%]{background-color:#679187}  .mat-slide-toggle:not(.mat-checked) .mat-ripple-element,   .slide .mat-slide-toggle-bar{background-color:#db5454!important}.cdk-drag-preview[_ngcontent-%COMP%]{box-sizing:border-box;border-radius:4px;background-color:#fff;box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12);display:flex;flex:1}.cdk-drag-preview[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{width:100%}.cdk-drag-preview[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{width:50%}.cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:0}.cdk-drag-animating[_ngcontent-%COMP%], .cdk-drop-list-dragging[_ngcontent-%COMP%]   .mat-row[_ngcontent-%COMP%]:not(.cdk-drag-placeholder), .cdk-drop-list-dragging[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:not(.cdk-drag-placeholder){transition:transform .25s cubic-bezier(0,0,.2,1)}.draggable-row[_ngcontent-%COMP%]{cursor:pointer}.h-76vh[_ngcontent-%COMP%]{max-height:70vh;overflow:auto}']}),e})()}];let _e=(()=>{class e{}return e.\u0275mod=n.Nb({type:e}),e.\u0275inj=n.Mb({factory:function(t){return new(t||e)},imports:[[c.f.forChild(Se)],c.f]}),e})(),we=(()=>{class e{}return e.\u0275mod=n.Nb({type:e}),e.\u0275inj=n.Mb({factory:function(t){return new(t||e)},imports:[[i.c,_e,z.p,d.d,p.b,b.b,J.b,a.c,m.b,O.d,M.b,g.i,g.s,$.b]]}),e})()}}]);