(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{DER8:function(e,t,n){"use strict";n.r(t),n.d(t,"InventoryOrdersModule",function(){return ze});var r=n("ofXK"),o=n("tyNb"),i=n("mrSG"),c=n("wHSu"),s=n("LvDl"),a=n("EUZL"),l=n("wd/R"),d=n("fXoL"),b=n("gbi4"),f=n("7pgg"),u=n("XhcP"),h=n("+0xr"),m=n("2jKy"),p=n("6NWb");const g=["textarea"],_=["tableView"];function v(e,t){1&e&&(d.Vb(0,"div",32),d.Mc(1," Loading...\n"),d.Ub())}function C(e,t){if(1&e){const e=d.Wb();d.Vb(0,"button",33),d.gc("click",function(){return d.Ac(e),d.kc().sidenavnew_open()}),d.Qb(1,"fa-icon",7),d.Ub()}if(2&e){const e=d.kc();d.Cb(1),d.pc("icon",e.faPlusCircle)}}function x(e,t){if(1&e){const e=d.Wb();d.Vb(0,"div",34),d.Vb(1,"div",35),d.Mc(2),d.Ub(),d.Vb(3,"div",36),d.Vb(4,"div",37),d.Vb(5,"div",38),d.Vb(6,"div",39),d.Vb(7,"button",40),d.gc("click",function(){d.Ac(e);const n=t.index;return d.kc().minus(n)}),d.Qb(8,"fa-icon",7),d.Ub(),d.Ub(),d.Ub(),d.Vb(9,"div",41),d.Vb(10,"div",42),d.Mc(11),d.Ub(),d.Vb(12,"div",43),d.Mc(13),d.Ub(),d.Ub(),d.Vb(14,"div",44),d.Vb(15,"div",39),d.Vb(16,"button",40),d.gc("click",function(){d.Ac(e);const n=t.index;return d.kc().add(n)}),d.Qb(17,"fa-icon",7),d.Ub(),d.Ub(),d.Ub(),d.Ub(),d.Ub(),d.Ub()}if(2&e){const e=t.$implicit,n=d.kc();d.Cb(2),d.Pc(" ",e.refernce.toUpperCase()," - ",e.inventory_name," "),d.Cb(6),d.pc("icon",n.faMinusCircle),d.Cb(3),d.Nc(e.qty),d.Cb(2),d.Nc(e.unit),d.Cb(4),d.pc("icon",n.faPlusCircle)}}function y(e,t){1&e&&d.Qb(0,"i",46)}function w(e,t){if(1&e){const e=d.Wb();d.Vb(0,"div",29),d.Vb(1,"button",45),d.gc("click",function(){return d.Ac(e),d.kc().acceptAction()}),d.Kc(2,y,1,0,"i",31),d.Vb(3,"span"),d.Mc(4,"APPROVE"),d.Ub(),d.Ub(),d.Ub()}if(2&e){const e=d.kc();d.Cb(2),d.pc("ngIf",1==e.isLoadingAccept)}}function S(e,t){1&e&&d.Qb(0,"i",46)}function O(e,t){if(1&e){const e=d.Wb();d.Vb(0,"div",29),d.Vb(1,"button",47),d.gc("click",function(){return d.Ac(e),d.kc().declineAction()}),d.Kc(2,S,1,0,"i",31),d.Vb(3,"span"),d.Mc(4,"DECLINE"),d.Ub(),d.Ub(),d.Ub()}if(2&e){const e=d.kc();d.Cb(2),d.pc("ngIf",1==e.isLoadingDecline)}}function M(e,t){1&e&&d.Qb(0,"i",46)}function U(e,t){if(1&e){const e=d.Wb();d.Vb(0,"div",29),d.Vb(1,"button",48),d.gc("click",function(){return d.Ac(e),d.kc().updateOrderAsDelivered()}),d.Kc(2,M,1,0,"i",31),d.Vb(3,"span",49),d.Mc(4,"MARK AS DELIVERED"),d.Ub(),d.Ub(),d.Ub()}if(2&e){const e=d.kc();d.Cb(2),d.pc("ngIf",1==e.isMarkDeliverdLoding)}}function V(e,t){1&e&&d.Qb(0,"i",46)}var k=n("Iab2");let P=(()=>{class e{constructor(e,t){this.common_service=e,this.apiServices=t,this.close=m.b,this.plus=B,this.minuss=R,this.faPlusCircle=c.y,this.faMinusCircle=c.u,this.isLoadingAccept=!1,this.isLoadingDecline=!1,this.isLoadingSavePdf=!1,this.isMarkDeliverdLoding=!1,this.table=[{refer_name:"string",product_name:"string",quantity:"number",unit:"string"}],this.order_info=new Object,this.products=[],this.totalQty=0}ngOnInit(){this.common_service.closedSideNav.subscribe(e=>{this.order_info=null,this.products=[],this.totalQty=0}),this.common_service.inventoryOrder.subscribe(e=>{var t,n;this.totalQty=0,this.order_info=e,this.products=null===(t=this.order_info)||void 0===t?void 0:t.ordered_items,null===(n=this.products)||void 0===n||n.forEach(e=>{this.totalQty+=e.qty})}),this.common_service.updateInventoryOrderFrom.subscribe(e=>{var t;this.order_info.ordered_items=e,this.totalQty=0,this.products=e,null===(t=this.products)||void 0===t||t.forEach(e=>{this.totalQty+=e.qty})})}add(e){"approved"!=this.order_info.status&&"delivered"!=this.order_info.status&&(this.products[e].qty+=1,this.totalQty+=1)}minus(e){"approved"!=this.order_info.status&&"delivered"!=this.order_info.status&&this.products[e].qty>0&&(1==this.products[e].qty?this.products.length>1?(this.products.splice(e,1),this.totalQty-=1):this.common_service.showAlert("You should have atleaset one product!"):(this.products[e].qty-=1,this.totalQty-=1))}declineAction(){this.isLoadingDecline=!0;let e=new Object;e.id=this.order_info._id,e.status="declined",e.admin_msg=this.textarea.nativeElement.value,this.apiServices.updateInventoryOrder(e).subscribe(e=>{this.isLoadingDecline=!1,this.common_service.showAlert(e.message),e.success&&(this.common_service.commonEmitter.emit(),this.sidenav.close())})}acceptAction(){if(0==this.products.length)this.common_service.showAlert("Please choose products!");else{this.isLoadingAccept=!0;let e=new Object;e.id=this.order_info._id,e.status="approved",e.ordered_items=this.products,e.admin_msg=this.textarea.nativeElement.value,this.apiServices.updateInventoryOrder(e).subscribe(e=>{this.isLoadingAccept=!1,this.common_service.showAlert(e.message),e.success&&(this.common_service.commonEmitter.emit(),this.sidenav.close())})}}savePdf(){this.isLoadingSavePdf=!0,this.apiServices.downloadInventoryOrder({orderInfo:this.order_info,products:this.products}).subscribe(e=>{this.isLoadingSavePdf=!1;let t=e.data.url;console.log(t),k.saveAs(t,e.data.title+".pdf")})}closeSidenav(){this.order_info=null,this.products=null,this.sidenav.close()}open_new_nav(){this.sidenav.toggle()}sidenavnew_open(){this.common_service.openInventoryForm.emit({data:this.order_info}),console.log("emitted")}updateOrderAsDelivered(){var e;this.isMarkDeliverdLoding=!0;let t={id:this.order_info._id,received_by:null,reason:null,mode_of_payment:"cash",invoice_number:"",status:"delivered",ordered_items:null===(e=this.order_info)||void 0===e?void 0:e.ordered_items};this.apiServices.updateInventoryOrder(t).subscribe(e=>{this.common_service.showAlert(e.message),this.isMarkDeliverdLoding=!1,e.success&&(this.sidenav.toggle(),this.common_service.commonEmitter.emit())})}}return e.\u0275fac=function(t){return new(t||e)(d.Pb(b.a),d.Pb(f.a))},e.\u0275cmp=d.Jb({type:e,selectors:[["app-inventory-order-form"]],viewQuery:function(e,t){if(1&e&&(d.Rc(g,!0),d.Rc(_,!0)),2&e){let e;d.wc(e=d.hc())&&(t.textarea=e.first),d.wc(e=d.hc())&&(t.tableView=e.first)}},inputs:{sidenav:"sidenav",field:"field",status:"status",row:"row"},decls:56,vars:14,consts:[["rel","stylesheet","href",d.Qc("https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css")],["class","h-80","class","bg-white d-flex align-items-center justify-content-center alpha50 content position-absolute left-0 top-0 w-100 h100vh",4,"ngIf"],[3,"ngClass"],["tableView",""],[1,"h-80","w-100"],[1,"title","text-center","sticky-top"],[1,"bg-transparent","border-0","form-close-btn","position-absolute",3,"click"],[3,"icon"],[1,"col-12","mt-35px","px-0"],[1,"d-flex","mx-35px","justify-content-between"],[1,"heading-text"],[1,"content-text","mt-2"],[1,"d-flex","mx-35px","mt-20px"],[1,"content-text","mt-2","text-justify"],[1,"d-flex","mx-35px","mt-10px"],[1,"w-100"],[1,"d-flex"],[1,"heading-text","mb-10px"],["class","border_circle ml-auto bg-white w-25px h-25px rounded-corner d-flex align-items-center justify-content-center","style","font-size: 8px;",3,"click",4,"ngIf"],[1,"line"],[1,"mt-2"],["class","row mx-0 align-items-center mb-1",4,"ngFor","ngForOf"],[1,"line","mt-2","mb-3"],[1,"row","mx-0","justify-content-between"],["rows","4","placeholder","Add comments...",1,"comment-box","bg-transparent","w-100","mt-3","p-2","rounded-10px"],["textarea",""],[1,"h-20","button-list-bg-color"],[1,"row","mx-0","justify-content-center","align-items-center","button-list-bg-color","h-100"],["class","col-12 py-auto d-flex justify-content-center",4,"ngIf"],[1,"col-12","py-auto","d-flex","justify-content-center"],[1,"border-left-0","border-right-0","border-top-0","bg-transparent",3,"click"],["class","fa fa-spinner fa-spin mr-3",4,"ngIf"],[1,"bg-white","d-flex","align-items-center","justify-content-center","alpha50","content","position-absolute","left-0","top-0","w-100","h100vh"],[1,"border_circle","ml-auto","bg-white","w-25px","h-25px","rounded-corner","d-flex","align-items-center","justify-content-center",2,"font-size","8px",3,"click"],[1,"row","mx-0","align-items-center","mb-1"],[1,"col-8","px-0","inventory-text"],[1,"col-4","px-0"],[1,"row","mx-0","justify-content-around"],["id","subract",1,"d-flex","align-items-center"],[1,"rounded-corner","border-sm","shadow-sm"],[1,"border-0","bg-white","w-25px","h-25px","rounded-corner","d-flex","align-items-center","justify-content-center",2,"font-size","8px",3,"click"],["id","qty",1,"mx-2"],[1,"text-center","inventory-text"],[1,"text-center","unit-text"],["id","add",1,"d-flex","align-items-center"],["type","submit",1,"btn-success","text-white",3,"click"],[1,"fa","fa-spinner","fa-spin","mr-3"],[1,"btn-danger",3,"click"],[1,"border-left-0","border-right-0","border-top-0","bg-transparent",2,"border-bottom-color","#ABE7C4",3,"click"],[2,"color","#679187"]],template:function(e,t){1&e&&(d.Qb(0,"link",0),d.Kc(1,v,2,0,"div",1),d.Vb(2,"div",2,3),d.Vb(4,"div",4),d.Vb(5,"div",5),d.Vb(6,"button",6),d.gc("click",function(){return t.closeSidenav()}),d.Qb(7,"fa-icon",7),d.Ub(),d.Mc(8," ORDER "),d.Ub(),d.Vb(9,"div",8,3),d.Vb(11,"div",9),d.Vb(12,"div"),d.Vb(13,"div",10),d.Mc(14,"Order Source"),d.Ub(),d.Vb(15,"div",11),d.Mc(16),d.Ub(),d.Ub(),d.Vb(17,"div"),d.Vb(18,"div",10),d.Mc(19,"RequestDate "),d.Ub(),d.Vb(20,"div",11),d.Mc(21),d.Ub(),d.Ub(),d.Ub(),d.Vb(22,"div",12),d.Vb(23,"div"),d.Vb(24,"div",10),d.Mc(25,"Comment"),d.Ub(),d.Vb(26,"div",13),d.Mc(27),d.Ub(),d.Ub(),d.Ub(),d.Vb(28,"div",14),d.Vb(29,"div",15),d.Vb(30,"div",16),d.Vb(31,"div",17),d.Mc(32,"Items"),d.Ub(),d.Kc(33,C,2,1,"button",18),d.Ub(),d.Qb(34,"div",19),d.Vb(35,"div",20),d.Kc(36,x,18,6,"div",21),d.Ub(),d.Qb(37,"div",22),d.Vb(38,"div",23),d.Vb(39,"div",10),d.Mc(40," TOTAL "),d.Ub(),d.Vb(41,"div",10),d.Mc(42),d.Ub(),d.Ub(),d.Vb(43,"textarea",24,25),d.Mc(45),d.Ub(),d.Ub(),d.Ub(),d.Ub(),d.Ub(),d.Vb(46,"div",26),d.Vb(47,"div",27),d.Kc(48,w,5,1,"div",28),d.Kc(49,O,5,1,"div",28),d.Kc(50,U,5,1,"div",28),d.Vb(51,"div",29),d.Vb(52,"button",30),d.gc("click",function(){return t.savePdf()}),d.Kc(53,V,1,0,"i",31),d.Vb(54,"span"),d.Mc(55,"SAVE PDF"),d.Ub(),d.Ub(),d.Ub(),d.Ub(),d.Ub(),d.Ub()),2&e&&(d.Cb(1),d.pc("ngIf",0==(null==t.products?null:t.products.length)),d.Cb(1),d.pc("ngClass",(null==t.products?null:t.products.length)>0?"d-block":"d-done"),d.Cb(5),d.pc("icon",t.close),d.Cb(9),d.Nc(null==t.order_info||null==t.order_info.branch_info?null:t.order_info.branch_info.branch_name),d.Cb(5),d.Nc(null==t.order_info?null:t.order_info.created_date),d.Cb(6),d.Oc(" ",null!=t.order_info&&t.order_info.comment_by_barista&&""!=(null==t.order_info?null:t.order_info.comment_by_barista)?t.order_info.comment_by_barista:"No comments"," "),d.Cb(6),d.pc("ngIf","pending"==(null==t.order_info?null:t.order_info.status)||"approved"==(null==t.order_info?null:t.order_info.status)),d.Cb(3),d.pc("ngForOf",t.products),d.Cb(6),d.Oc(" ",t.totalQty," "),d.Cb(3),d.Nc(null==t.order_info?null:t.order_info.admin_msg),d.Cb(3),d.pc("ngIf","delivered"!=(null==t.order_info?null:t.order_info.status)),d.Cb(1),d.pc("ngIf","delivered"!=(null==t.order_info?null:t.order_info.status)&&"declined"!=(null==t.order_info?null:t.order_info.status)),d.Cb(1),d.pc("ngIf","approved"==(null==t.order_info?null:t.order_info.status)),d.Cb(3),d.pc("ngIf",1==t.isLoadingSavePdf))},directives:[r.l,r.j,p.a,r.k],styles:['@font-face{font-family:HelveticaNeue-Bold;font-style:normal;font-weight:400;src:local("HelveticaNeue-Bold"),url("Helvetica Neu Bold.61acdee6f288cddccf23.ttf") format("ttf")}@font-face{font-family:CerebriSans-Bold;font-style:normal;font-weight:400;src:local("CerebriSans-Bold"),url(CerebriSans-Bold.b28d46a00415bec63bba.ttf) format("ttf");src:local("CerebriSans-Bold"),url(CerebriSans-Bold.f48e05c76db5e6bd676c.eot) format("eot");src:local("CerebriSans-Bold"),url(CerebriSans-Bold.1b8ded389d0dc424b19b.svg) format("svg");src:local("CerebriSans-Bold"),url(CerebriSans-Bold.1b4400b13ebd711dd3e8.woff) format("woff");src:local("CerebriSans-Bold"),url(CerebriSans-Bold.1b89f96de9e78fd26a7f.woff2) format("woff2")}@font-face{font-family:\\ CerebriSans-semibold;font-style:normal;font-weight:400;src:local("CerebriSans-Bold"),url(CerebriSans-SemiBold.dcda3674ac76f4e31e87.ttf) format("ttf");src:local("CerebriSans-Bold"),url(CerebriSans-SemiBold.8c2b25fda64ba8de398a.eot) format("eot");src:local("CerebriSans-Bold"),url(CerebriSans-SemiBold.d4680810013431cbe6c7.svg) format("svg");src:local("CerebriSans-Bold"),url(CerebriSans-SemiBold.700f305197d6f163d348.woff) format("woff");src:local("CerebriSans-Bold"),url(CerebriSans-SemiBold.29097270d5f0e9003fd4.woff2) format("woff2")}@font-face{font-family:CerebriSans-Light;font-style:normal;font-weight:400;src:local("CerebriSans-Bold"),url(CerebriSans-Light.ddb81c4966caddeb5524.ttf) format("ttf");src:local("CerebriSans-Bold"),url(CerebriSans-Light.1e4f0f37d8ed20e51e27.eot) format("eot");src:local("CerebriSans-Bold"),url(CerebriSans-Light.efa3b6fb5acdd7fa23ab.svg) format("svg");src:local("CerebriSans-Bold"),url(CerebriSans-Light.650c547e86d77193b2d0.woff) format("woff");src:local("CerebriSans-Bold"),url(CerebriSans-Light.93b3eb2ec96f14eca31e.woff2) format("woff2")}@font-face{font-family:CerebriSans-Regular;font-style:normal;font-weight:400;src:local("CerebriSans-Regular"),url(CerebriSans-Regular.da1eaafe42c93475b338.ttf) format("ttf");src:local("CerebriSans-Regular"),url(CerebriSans-Regular.ccb7af1c430bd224cb88.eot) format("eot");src:local("CerebriSans-Regular"),url(CerebriSans-Regular.8a18b1b14a235efe141d.svg) format("svg");src:local("CerebriSans-Regular"),url(CerebriSans-Regular.81bf15fd01ef8a22e704.woff) format("woff");src:local("CerebriSans-Regular"),url(CerebriSans-Regular.a9f198f5da5b6fe108ed.woff2) format("woff2")}.mt-35px[_ngcontent-%COMP%]{margin-top:35px}.mx-35px[_ngcontent-%COMP%]{margin-left:35px;margin-right:35px}.mt-20px[_ngcontent-%COMP%]{margin-top:20px}.heading-text[_ngcontent-%COMP%]{color:#4a4a4a;font-family:CerebriSans-Bold;font-size:15px}.mt-10px[_ngcontent-%COMP%]{margin-top:10px}.mb-10px[_ngcontent-%COMP%]{margin-bottom:10px}.content-text[_ngcontent-%COMP%]{color:#4a4a4a;font-family:CerebriSans-Regular;font-size:15px!important}.line[_ngcontent-%COMP%]{height:2px;width:100%;background-color:#4a4a4a}.unit-text[_ngcontent-%COMP%]{color:#4a4a4a;font-size:10px;font-family:CerebriSans-Light}.w-25px[_ngcontent-%COMP%]{width:17px}.h-25px[_ngcontent-%COMP%]{height:17px}.rounded-corner[_ngcontent-%COMP%]{border-radius:50%}.inventory-text[_ngcontent-%COMP%]{color:#4a4a4a;font-size:13.5px}.border-sm[_ngcontent-%COMP%]{border:1.8px solid #4a4a4a}.rounded-10px[_ngcontent-%COMP%]{border-radius:10px}.comment-box[_ngcontent-%COMP%]{resize:none;font-family:CerebriSans-Regular;color:#4a4a4a;font-size:15px;border:1.5px solid #000}.comment-box[_ngcontent-%COMP%]:focus{outline:none;box-shadow:none}.btn-success[_ngcontent-%COMP%]{background-color:#679187;border-radius:0;border-style:none;box-shadow:0 3px 6px 0 rgba(0,0,0,.16);min-width:240px;min-height:40px}.btn-success[_ngcontent-%COMP%]:focus{outline:none;border:none;box-shadow:none}.btn-success[_ngcontent-%COMP%]:hover{opacity:.9}.btn-danger[_ngcontent-%COMP%]{min-width:240px;min-height:40px;border-style:none;border-radius:0;box-shadow:0 3px 6px 0 rgba(87,87,87,.51)}.btn-danger[_ngcontent-%COMP%]:focus{box-shadow:none;outline:none}.btn-danger[_ngcontent-%COMP%]:hover{opacity:.9}.h-80[_ngcontent-%COMP%]{height:80vh;overflow:auto}.h-20[_ngcontent-%COMP%]{height:20vh}.border_circle[_ngcontent-%COMP%]{border:none!important;background-color:#5d5d5d!important;color:#fff}']}),e})();const B={prefix:"fa",iconName:"line",icon:[512,512,[],"","M0 0h24v24H0z M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"]},R={prefix:"fa",iconName:"line",icon:[512,512,[],"","M0 0h24v24H0z M19 13H5v-2h14v2z"]};var I=n("kmnG"),A=n("d3UM"),D=n("FKr1");const L=["dropDown"],N=["textarea"];function Q(e,t){if(1&e){const e=d.Wb();d.Vb(0,"mat-option",34),d.gc("click",function(){d.Ac(e);const n=t.index;return d.kc().select_branch(n)}),d.Mc(1),d.Ub()}if(2&e){const e=t.$implicit;d.pc("value",e._id),d.Cb(1),d.Oc(" ",e.branch_name," ")}}function E(e,t){if(1&e){const e=d.Wb();d.Vb(0,"div",37),d.Vb(1,"div",38),d.Mc(2),d.Ub(),d.Vb(3,"div",39),d.Vb(4,"div",40),d.Vb(5,"div",41),d.Vb(6,"div",42),d.Vb(7,"button",43),d.gc("click",function(){d.Ac(e);const n=t.index;return d.kc(2).minus(n)}),d.Qb(8,"fa-icon",4),d.Ub(),d.Ub(),d.Ub(),d.Vb(9,"div",44),d.Vb(10,"div",45),d.Mc(11),d.Ub(),d.Vb(12,"div",46),d.Mc(13),d.Ub(),d.Ub(),d.Vb(14,"div",47),d.Vb(15,"div",42),d.Vb(16,"button",43),d.gc("click",function(){d.Ac(e);const n=t.index;return d.kc(2).add(n)}),d.Qb(17,"fa-icon",4),d.Ub(),d.Ub(),d.Ub(),d.Ub(),d.Ub(),d.Ub()}if(2&e){const e=t.$implicit,n=d.kc(2);d.Cb(2),d.Pc(" ",e.refernce.toUpperCase()," - ",e.inventory_name," "),d.Cb(6),d.pc("icon",n.faMinus),d.Cb(3),d.Nc(e.qty),d.Cb(2),d.Nc(e.unit),d.Cb(4),d.pc("icon",n.faPlus)}}function F(e,t){if(1&e&&(d.Vb(0,"div",35),d.Kc(1,E,18,6,"div",36),d.Ub()),2&e){const e=d.kc();d.Cb(1),d.pc("ngForOf",e.products)}}function j(e,t){1&e&&d.Qb(0,"div",48)}function K(e,t){if(1&e&&(d.Vb(0,"div",49),d.Vb(1,"div",7),d.Mc(2," TOTAL "),d.Ub(),d.Vb(3,"div",7),d.Mc(4),d.Ub(),d.Ub()),2&e){const e=d.kc();d.Cb(4),d.Oc(" ",e.totalQty," ")}}function z(e,t){if(1&e){const e=d.Wb();d.Vb(0,"div",50),d.Vb(1,"div"),d.Vb(2,"span",51),d.Mc(3," No Products Added "),d.Ub(),d.Vb(4,"span",52),d.Vb(5,"button",53),d.gc("click",function(){return d.Ac(e),d.kc().sidenavnew_open()}),d.Mc(6," Add Products "),d.Ub(),d.Ub(),d.Ub(),d.Ub()}}function T(e,t){1&e&&d.Qb(0,"i",54)}let q=(()=>{class e{constructor(e,t){this.common_service=e,this.apiService=t,this.faPlus=c.y,this.faMapMarkerAlt=c.t,this.faChevronDown=c.i,this.faMinus=c.u,this.selected_branch="",this.createOrderNessaryData=null,this.branch_list=[],this.selectedRow=-1,this.isLoading=!1,this.close=m.b,this.products=[],this.totalQty=0,this.today=l().format("DD-MM-YYYY - HH : mm"),this.branches=[],this.selectedValue=null,this.allSelected=!0,this.common_service.CreateInvOrderFromAdminDataFetcher.subscribe(e=>{this.products=e.products.filter(e=>0!=Number(e.qty)),console.log(this.products),this.totalQty=this.products.map(e=>Number(null==e?void 0:e.qty)).reduce(function(e,t){return Number(e)+Number(t)},0),this.common_service.updateSyningCountEmitter.emit(this.products)})}ngOnInit(){this.get_Branches(),this.common_service.closedSideNav.subscribe(e=>{this.branch_list=[],this.products=[],this.totalQty=0,this.dd.options.forEach(e=>e.deselect())})}get_Branches(){this.apiService.get_branch({}).subscribe(e=>{this.branches=e.data.branch_list,this.branches.unshift({branch_name:"All branches",device_id:"",_id:"syra-all"}),this.selectedValue=[]})}createOrder(){console.log("success",this.branch_list);let e=this.branch_list.map(e=>e._id);if(0==e.length)this.common_service.showAlert("Please select the branch");else if(0==this.products.length)this.common_service.showAlert("Please choose the products");else{let t={branch_list:e,admin_msg:this.textarea.nativeElement.value,data:this.products,number_of_products:this.products.length};this.isLoading=!0,this.apiService.reOrderInventory(t).subscribe(e=>{this.isLoading=!1,e.success?(this.common_service.reOrderSuccess.emit(!0),this.sidenav.toggle()):this.common_service.showAlert(e.message)})}}closeSidenav(){this.sidenav.toggle()}select_branch(e){if(this.selectedRow=e,console.log(this.branches[e]._id,this.branch_list.length),"syra-all"==this.branches[e]._id)0==this.branch_list.length?(this.branch_list=this.branches.map(function(e){return e}),this.branch_list.splice(0,1)):this.branch_list.length==this.branches.length-1?this.branch_list=[]:(this.branch_list=this.branches.map(function(e){return e}),this.branch_list.splice(0,1)),this.toggleAllSelection();else{let t=this.branch_list.map(function(e){return e._id}).indexOf(this.branches[e]._id);t>=0?this.branch_list.splice(t,1):this.branch_list.push(this.branches[e]),this.branch_list.length<this.branches.length-1&&this.dd.options.forEach((e,t)=>{0==t&&e.deselect()}),this.branch_list.length==this.branches.length-1&&this.dd.options.forEach((e,t)=>{0==t&&e.select()})}console.log(this.branch_list)}toggleAllSelection(){this.allSelected=this.branch_list.length==this.branches.length-1,console.log(this.dd,123),this.dd.options.forEach(this.allSelected?e=>e.select():e=>{e.deselect()})}add(e){this.products[e].qty+=1,this.totalQty+=1,this.common_service.syncProductQuantity.emit(this.products[e])}minus(e){this.products[e].qty>0&&(this.products[e].qty-=1,this.totalQty-=1,this.common_service.syncProductQuantity.emit(this.products[e])),0==this.products[e].qty&&this.products.splice(e,1)}sidenavnew_open(){this.createOrderNessaryData={branch_id:this.selected_branch,admin_msg:this.textarea.nativeElement.value},this.common_service.openInventoryForm.emit(null),console.log("emitted")}}return e.\u0275fac=function(t){return new(t||e)(d.Pb(b.a),d.Pb(f.a))},e.\u0275cmp=d.Jb({type:e,selectors:[["app-add-inventory-order"]],viewQuery:function(e,t){if(1&e&&(d.Rc(L,!0),d.Rc(N,!0)),2&e){let e;d.wc(e=d.hc())&&(t.dd=e.first),d.wc(e=d.hc())&&(t.textarea=e.first)}},inputs:{sidenav:"sidenav"},decls:47,vars:12,consts:[["rel","stylesheet","href",d.Qc("https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css")],[1,"h-80","w-100"],[1,"title","text-center","sticky-top"],[1,"bg-transparent","border-0","form-close-btn","position-absolute",3,"click"],[3,"icon"],[1,"col-12","mt-35px","px-0"],[1,"d-flex","mx-35px","justify-content-between"],[1,"heading-text"],[1,"content-text","mt-2"],["appearance","outline",1,"picker","bg-white","rounded","shadow-sm","branch_dropdown"],[1,"pl-2","pr-3","position-relative",3,"icon"],["name","branch","disableOptionCentering","","placeholder","Select Branch","multiple","",3,"value","valueChange"],["dropDown",""],[3,"value","click",4,"ngFor","ngForOf"],[1,"position-absolute","r-0",3,"icon"],[1,"content-text","mt-2","d-flex","align-items-center",2,"height","calc(100% - 0.5rem - 20px)"],[1,"d-flex","mx-35px","mt-10px"],[1,"w-100"],[1,"d-flex"],[1,"heading-text","mb-10px"],[1,"border_circle","ml-auto","bg-white","w-25px","h-25px","rounded-corner","d-flex","align-items-center","justify-content-center",2,"font-size","8px",3,"click"],[1,"line"],["class","mt-2",4,"ngIf"],["class","line mt-2 mb-3",4,"ngIf"],["class","row mx-0 justify-content-between",4,"ngIf"],["class","row mx-0 align-items-center justify-content-center w-100 bg-white mt-1","style","height:  150px;",4,"ngIf"],[1,"pt-3","header-text"],["rows","4","placeholder","Add comments...",1,"comment-box","bg-transparent","w-100","mt-3","p-2","rounded-10px"],["textarea",""],[1,"h-20","button-list-bg-color"],[1,"row","mx-0","justify-content-center","align-items-center","button-list-bg-color","h-100"],[1,"col-12","py-auto","d-flex","justify-content-center"],["type","submit",1,"btn-success","text-white",3,"click"],["class","fa fa-spinner fa-spin mr-3",4,"ngIf"],[3,"value","click"],[1,"mt-2"],["class","row mx-0 align-items-center mb-1",4,"ngFor","ngForOf"],[1,"row","mx-0","align-items-center","mb-1"],[1,"col-8","px-0","inventory-text"],[1,"col-4","px-0"],[1,"row","mx-0","justify-content-around"],["id","subract",1,"d-flex","align-items-center"],[1,"rounded-corner","border-sm","shadow-sm"],[1,"border-0","bg-white","w-25px","h-25px","rounded-corner","d-flex","align-items-center","justify-content-center",2,"font-size","8px",3,"click"],["id","qty",1,"mx-2"],[1,"text-center","inventory-text"],[1,"text-center","unit-text"],["id","add",1,"d-flex","align-items-center"],[1,"line","mt-2","mb-3"],[1,"row","mx-0","justify-content-between"],[1,"row","mx-0","align-items-center","justify-content-center","w-100","bg-white","mt-1",2,"height","150px"],[1,"col-12","text-center","pb-3",2,"font-size","12px"],[1,"col-12","d-flex","justify-content-center","pt-3"],[1,"text-center","btn-success","text-white","px-3",2,"min-height","28px","min-width","100px","font-size","12px","border-radius","14px",3,"click"],[1,"fa","fa-spinner","fa-spin","mr-3"]],template:function(e,t){1&e&&(d.Qb(0,"link",0),d.Vb(1,"div"),d.Vb(2,"div",1),d.Vb(3,"div",2),d.Vb(4,"button",3),d.gc("click",function(){return t.closeSidenav()}),d.Qb(5,"fa-icon",4),d.Ub(),d.Mc(6," Create Inventory Order "),d.Ub(),d.Vb(7,"div",5),d.Vb(8,"div",6),d.Vb(9,"div"),d.Vb(10,"div",7),d.Mc(11,"Order Source"),d.Ub(),d.Vb(12,"div",8),d.Vb(13,"mat-form-field",9),d.Qb(14,"fa-icon",10),d.Vb(15,"mat-select",11,12),d.gc("valueChange",function(e){return t.selectedValue=e}),d.Kc(17,Q,2,2,"mat-option",13),d.Ub(),d.Qb(18,"fa-icon",14),d.Ub(),d.Ub(),d.Ub(),d.Vb(19,"div"),d.Vb(20,"div",7),d.Mc(21,"Request Date "),d.Ub(),d.Vb(22,"div",15),d.Mc(23),d.Ub(),d.Ub(),d.Ub(),d.Vb(24,"div",16),d.Vb(25,"div",17),d.Vb(26,"div",18),d.Vb(27,"div",19),d.Mc(28,"Items"),d.Ub(),d.Vb(29,"button",20),d.gc("click",function(){return t.sidenavnew_open()}),d.Qb(30,"fa-icon",4),d.Ub(),d.Ub(),d.Qb(31,"div",21),d.Kc(32,F,2,1,"div",22),d.Kc(33,j,1,0,"div",23),d.Kc(34,K,5,1,"div",24),d.Kc(35,z,7,0,"div",25),d.Vb(36,"div",26),d.Mc(37,"Admin Comments"),d.Ub(),d.Qb(38,"textarea",27,28),d.Ub(),d.Ub(),d.Ub(),d.Ub(),d.Vb(40,"div",29),d.Vb(41,"div",30),d.Vb(42,"div",31),d.Vb(43,"button",32),d.gc("click",function(){return t.createOrder()}),d.Kc(44,T,1,0,"i",33),d.Vb(45,"span"),d.Mc(46,"ADD TO ORDERS"),d.Ub(),d.Ub(),d.Ub(),d.Ub(),d.Ub(),d.Ub()),2&e&&(d.Cb(5),d.pc("icon",t.close),d.Cb(9),d.pc("icon",t.faMapMarkerAlt),d.Cb(1),d.pc("value",t.selectedValue),d.Cb(2),d.pc("ngForOf",t.branches),d.Cb(1),d.pc("icon",t.faChevronDown),d.Cb(5),d.Nc(t.today),d.Cb(7),d.pc("icon",t.faPlus),d.Cb(2),d.pc("ngIf",t.products.length>0),d.Cb(1),d.pc("ngIf",t.products.length>0),d.Cb(1),d.pc("ngIf",t.products.length>0),d.Cb(1),d.pc("ngIf",0==t.products.length),d.Cb(9),d.pc("ngIf",1==t.isLoading))},directives:[p.a,I.b,A.a,r.k,r.l,D.l],styles:['@font-face{font-family:HelveticaNeue-Bold;font-style:normal;font-weight:400;src:local("HelveticaNeue-Bold"),url("Helvetica Neu Bold.61acdee6f288cddccf23.ttf") format("ttf")}@font-face{font-family:CerebriSans-Bold;font-style:normal;font-weight:400;src:local("CerebriSans-Bold"),url(CerebriSans-Bold.b28d46a00415bec63bba.ttf) format("ttf");src:local("CerebriSans-Bold"),url(CerebriSans-Bold.f48e05c76db5e6bd676c.eot) format("eot");src:local("CerebriSans-Bold"),url(CerebriSans-Bold.1b8ded389d0dc424b19b.svg) format("svg");src:local("CerebriSans-Bold"),url(CerebriSans-Bold.1b4400b13ebd711dd3e8.woff) format("woff");src:local("CerebriSans-Bold"),url(CerebriSans-Bold.1b89f96de9e78fd26a7f.woff2) format("woff2")}@font-face{font-family:\\ CerebriSans-semibold;font-style:normal;font-weight:400;src:local("CerebriSans-Bold"),url(CerebriSans-SemiBold.dcda3674ac76f4e31e87.ttf) format("ttf");src:local("CerebriSans-Bold"),url(CerebriSans-SemiBold.8c2b25fda64ba8de398a.eot) format("eot");src:local("CerebriSans-Bold"),url(CerebriSans-SemiBold.d4680810013431cbe6c7.svg) format("svg");src:local("CerebriSans-Bold"),url(CerebriSans-SemiBold.700f305197d6f163d348.woff) format("woff");src:local("CerebriSans-Bold"),url(CerebriSans-SemiBold.29097270d5f0e9003fd4.woff2) format("woff2")}@font-face{font-family:CerebriSans-Light;font-style:normal;font-weight:400;src:local("CerebriSans-Bold"),url(CerebriSans-Light.ddb81c4966caddeb5524.ttf) format("ttf");src:local("CerebriSans-Bold"),url(CerebriSans-Light.1e4f0f37d8ed20e51e27.eot) format("eot");src:local("CerebriSans-Bold"),url(CerebriSans-Light.efa3b6fb5acdd7fa23ab.svg) format("svg");src:local("CerebriSans-Bold"),url(CerebriSans-Light.650c547e86d77193b2d0.woff) format("woff");src:local("CerebriSans-Bold"),url(CerebriSans-Light.93b3eb2ec96f14eca31e.woff2) format("woff2")}@font-face{font-family:CerebriSans-Regular;font-style:normal;font-weight:400;src:local("CerebriSans-Regular"),url(CerebriSans-Regular.da1eaafe42c93475b338.ttf) format("ttf");src:local("CerebriSans-Regular"),url(CerebriSans-Regular.ccb7af1c430bd224cb88.eot) format("eot");src:local("CerebriSans-Regular"),url(CerebriSans-Regular.8a18b1b14a235efe141d.svg) format("svg");src:local("CerebriSans-Regular"),url(CerebriSans-Regular.81bf15fd01ef8a22e704.woff) format("woff");src:local("CerebriSans-Regular"),url(CerebriSans-Regular.a9f198f5da5b6fe108ed.woff2) format("woff2")}.mt-35px[_ngcontent-%COMP%]{margin-top:35px}.mx-35px[_ngcontent-%COMP%]{margin-left:35px;margin-right:35px}.mt-20px[_ngcontent-%COMP%]{margin-top:20px}.heading-text[_ngcontent-%COMP%]{color:#4a4a4a;font-family:CerebriSans-Bold;font-size:15px}.mt-10px[_ngcontent-%COMP%]{margin-top:10px}.mb-10px[_ngcontent-%COMP%]{margin-bottom:10px}.content-text[_ngcontent-%COMP%]{color:#4a4a4a;font-family:CerebriSans-Regular;font-size:15px!important}.line[_ngcontent-%COMP%]{height:2px;width:100%;background-color:#4a4a4a}.unit-text[_ngcontent-%COMP%]{color:#4a4a4a;font-size:10px;font-family:CerebriSans-Light}.w-25px[_ngcontent-%COMP%]{width:17px}.h-25px[_ngcontent-%COMP%]{height:17px}.rounded-corner[_ngcontent-%COMP%]{border-radius:50%}.inventory-text[_ngcontent-%COMP%]{color:#4a4a4a;font-size:13.5px}.border-sm[_ngcontent-%COMP%]{border:1.8px solid #4a4a4a}.rounded-10px[_ngcontent-%COMP%]{border-radius:10px}.comment-box[_ngcontent-%COMP%]{resize:none;font-family:CerebriSans-Regular;color:#4a4a4a;font-size:15px;border:1.5px solid #000}.comment-box[_ngcontent-%COMP%]:focus{outline:none;box-shadow:none}.btn-success[_ngcontent-%COMP%]{background-color:#679187;border-radius:0;border-style:none;box-shadow:0 3px 6px 0 rgba(0,0,0,.16);min-width:240px;min-height:40px}.btn-success[_ngcontent-%COMP%]:focus{outline:none;border:none;box-shadow:none}.btn-success[_ngcontent-%COMP%]:hover{opacity:.9}.btn-danger[_ngcontent-%COMP%]{min-width:240px;min-height:40px;border-style:none;border-radius:0;box-shadow:0 3px 6px 0 rgba(87,87,87,.51)}.btn-danger[_ngcontent-%COMP%]:focus{box-shadow:none;outline:none}.btn-danger[_ngcontent-%COMP%]:hover{opacity:.9}.h-80[_ngcontent-%COMP%]{height:80vh;overflow:auto}.h-20[_ngcontent-%COMP%]{height:20vh}.border_circle[_ngcontent-%COMP%]{border:none!important;background-color:#5d5d5d!important;color:#fff}.header[_ngcontent-%COMP%]{background-color:#f7f7f7;box-shadow:0 3px 6px 0 rgba(0,0,0,.16);z-index:3}.header-title[_ngcontent-%COMP%]{font-family:CerebriSans-Light;display:flex;align-items:center;color:#666;font-size:30px;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;margin:1.1em 1.1em 1.1em .3em}.ml-133[_ngcontent-%COMP%]{margin-left:133px}.mat-form-field[_ngcontent-%COMP%]{font-family:CerebriSans-Regular;height:40px}.mat-date-range-input-inner[disabled][_ngcontent-%COMP%]{color:#4a4a4a;font-family:CerebriSans-Regular}.exportMenu[_ngcontent-%COMP%]{width:35px;height:35px;background:#679187;padding-right:0;border-radius:3px}.exportMenu[_ngcontent-%COMP%]:focus{outline:none;box-shadow:none}.exportMenu[_ngcontent-%COMP%]:hover{opacity:.95}.mat-select[_ngcontent-%COMP%]{width:77.5%}.mat-option[_ngcontent-%COMP%]:hover:not(.mat-option-disabled){background:rgba(0,0,0,.04);color:#679187}  .mat-form-field-outline-end,   .mat-form-field-outline-gap,   div.mat-form-field-outline-start{border-color:0!important;border-width:0!important}  .mat-button-focus-overlay{display:none!important}  .mat-option .mat-pseudo-checkbox-checked{background-color:green!important}  .mat-select-placeholder{color:#4a4a4a!important;font-family:CerebriSans-Regular!important;font-size:15px!important}  .mat-form-field-label{margin:0}']}),e})();function H(e,t){if(1&e){const e=d.Wb();d.Vb(0,"div",16),d.Vb(1,"div",17),d.Qb(2,"fa-icon",18),d.Vb(3,"input",19),d.gc("input",function(t){return d.Ac(e),d.kc().search(t.target.value)}),d.Ub(),d.Vb(4,"button",20),d.gc("click",function(){return d.Ac(e),d.kc().searchViewUpdate()}),d.Qb(5,"fa-icon",4),d.Ub(),d.Ub(),d.Ub()}if(2&e){const e=d.kc();d.Cb(2),d.pc("icon",e.faSearch),d.Cb(3),d.pc("icon",e.close)}}function W(e,t){if(1&e){const e=d.Wb();d.Vb(0,"div",21),d.Vb(1,"div",22),d.Mc(2),d.Ub(),d.Vb(3,"div",23),d.Mc(4),d.Ub(),d.Vb(5,"div",24),d.Vb(6,"div",25),d.Vb(7,"div",26),d.Vb(8,"div",27),d.Vb(9,"button",28),d.gc("click",function(){d.Ac(e);const n=t.index;return d.kc().minus(n)}),d.Qb(10,"fa-icon",4),d.Ub(),d.Ub(),d.Ub(),d.Vb(11,"div",29),d.Vb(12,"div",30),d.Mc(13),d.Ub(),d.Vb(14,"div",31),d.Mc(15),d.Ub(),d.Ub(),d.Vb(16,"div",32),d.Vb(17,"div",27),d.Vb(18,"button",28),d.gc("click",function(){d.Ac(e);const n=t.index;return d.kc().add(n)}),d.Qb(19,"fa-icon",4),d.Ub(),d.Ub(),d.Ub(),d.Ub(),d.Ub(),d.Ub()}if(2&e){const e=t.$implicit,n=t.index,r=d.kc();d.pc("ngClass",n%2==0?"bg-white":"bg-background"),d.Cb(2),d.Oc(" ",e.category_id," "),d.Cb(2),d.Pc(" ",e.reference," - ",e.inventory_name," "),d.Cb(6),d.pc("icon",r.faMinusCircle),d.Cb(3),d.Nc(e.quantity),d.Cb(2),d.Nc(e.unit),d.Cb(4),d.pc("icon",r.faPlusCircle)}}function J(e,t){1&e&&d.Qb(0,"i",37)}function Y(e,t){if(1&e){const e=d.Wb();d.Vb(0,"div",33),d.Vb(1,"div",34),d.Vb(2,"button",35),d.gc("click",function(){return d.Ac(e),d.kc().addOrder()}),d.Kc(3,J,1,0,"i",36),d.Vb(4,"span"),d.Mc(5,"APPROVE"),d.Ub(),d.Ub(),d.Ub(),d.Ub()}if(2&e){const e=d.kc();d.Cb(3),d.pc("ngIf",1==e.isLoading)}}const $=function(e){return{height:e}};let X=(()=>{class e{constructor(e,t){this.common_service=e,this.apiServices=t,this.faCaretDown=c.g,this.faTimes=c.H,this.isLoading=!1,this.close=G,this.faPlusCircle=c.y,this.faMinusCircle=c.u,this.faSearch=c.A,this.plus=Z,this.minuss=ee,this.products=[],this.products_backup=[],this.products_to_order=[],this.searchOptionEnabled=!1,this.orderDetails=null,this.orderedProductsFromAddInventory=[],this.loadTeams=function(){},this.common_service.syncProductQuantity.subscribe(e=>{var t=this.products.findIndex(t=>t._id==e.inventory_id);this.products[t].quantity=e.qty,console.log(e,this.products[t])})}ngOnInit(){this.get_catelouges()}ngOnDestroy(){}ngAfterViewInit(){}searchViewUpdate(){this.searchOptionEnabled=!this.searchOptionEnabled,this.searchOptionEnabled||(this.products=this.products_backup)}sidenav_close(){this.common_service.closeInventoryForm.emit(),console.log("emitted for close")}add(e){this.products[e].quantity++;let t=this.products_to_order.map(e=>e.refernce).indexOf(this.products[e].reference);-1==t?this.products_to_order.push({inventory_id:this.products[e]._id,refernce:this.products[e].reference,unit:this.products[e].unit,inventory_name:this.products[e].inventory_name,qty:this.products[e].quantity,price:this.products[e].quantity*Number(this.products[e].price),unit_price:this.products[e].price}):(this.products_to_order[t].qty+=1,this.products_to_order[t].price=this.products[e].price*this.products_to_order[t].qty),this.common_service.CreateInvOrderFromAdminDataFetcher.emit({products:this.products_to_order})}minus(e){let t=this.products_to_order.map(e=>e.refernce).indexOf(this.products[e].reference);this.products[e].quantity>0?(this.products[e].quantity-=1,this.products_to_order[t].qty-=1,this.products_to_order[t].price=this.products[e].price*this.products_to_order[t].qty):t>=0&&this.products_to_order.splice(t,1),this.common_service.CreateInvOrderFromAdminDataFetcher.emit({products:this.products_to_order})}get_catelouges(e=null,t=null){this.apiServices.getCatelouge({branch_list:t}).subscribe(e=>{if(e.success){if(null!=this.orderDetails){let t=this.orderDetails.data.ordered_items.map(e=>e.refernce);console.log(t,"test"),this.products=e.data.inventories.filter(e=>!t.includes(e.reference))}else{this.products=e.data.inventories;let t=this.products.map(e=>e._id);for(let e=0;e<this.orderedProductsFromAddInventory.length;e++){let n=this.orderedProductsFromAddInventory[e],r=t.indexOf(n.inventory_id);this.products[r].quantity=n.qty}}this.products_backup=this.products,this.products_to_order=this.products.filter(e=>e.quantity>0),this.generateSelectedProducts()}else this.common_service.showAlert(e.message)})}generateSelectedProducts(){for(let e=0;e<this.products_to_order.length;e++)this.products_to_order[e].qty=this.products_to_order[e].quantity,this.products_to_order[e].inventory_id=this.products_to_order[e]._id,this.products_to_order[e].refernce=this.products_to_order[e].reference}search(e){console.log(e),this.products=""==e?this.products_backup:this.products_backup.filter(t=>t.inventory_name.toLowerCase().includes(e.toLowerCase()))}addOrder(){this.isLoading=!0,this.products_to_order=this.products_to_order.concat(this.orderDetails.data.ordered_items),this.apiServices.reOrderInventory({data:this.products_to_order,id:this.orderDetails.data._id}).subscribe(e=>{e.success?(this.isLoading=!1,this.sidenav_close(),this.common_service.updateInventoryOrderFrom.emit(this.products_to_order),this.common_service.commonEmitter.emit(!0)):this.common_service.showAlert(e.message)}),console.log(JSON.parse(JSON.stringify(this.products_to_order)))}}return e.\u0275fac=function(t){return new(t||e)(d.Pb(b.a),d.Pb(f.a))},e.\u0275cmp=d.Jb({type:e,selectors:[["app-addproduct-component"]],inputs:{orderDetails:"orderDetails",orderedProductsFromAddInventory:"orderedProductsFromAddInventory",sidenav:"sidenav"},decls:21,vars:8,consts:[["rel","stylesheet","href",d.Qc("https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css")],[1,"w-100","p-a",3,"ngStyle"],[1,"title","text-center","sticky-top"],[1,"bg-transparent","border-0","form-close-btn","position-absolute",3,"click"],[3,"icon"],[1,"bg-transparent","border-0","position-absolute",2,"right","10px",3,"click"],[1,"row","m-0","p-0"],["class","row m-0 py-3 w-100 sticky-top bg-white",4,"ngIf"],[1,"row","m-0","py-3","w-100"],[1,"col-3","tab-title","text-left"],[1,"col-5","tab-title","p-0","text-left"],[1,"col-4","tab-title","text-center"],[1,"line_add_product"],[1,"mt-2","w-100"],["class","row mx-0 align-items-center mb-1",3,"ngClass",4,"ngFor","ngForOf"],["class","w-100 w85h-15 mt-1 b-shadow bg-transparent",4,"ngIf"],[1,"row","m-0","py-3","w-100","sticky-top","bg-white"],[1,"col-12","d-flex","align-items-center","justify-content-center"],[1,"curve-left","h-35","pt-2","pl-3",2,"background-color","#f7f7f7",3,"icon"],["type","text","placeholder","search",1,"border-0","w-100","h-35","search-bar",2,"background-color","#f7f7f7",3,"input"],[1,"border-0","form-close-btn","h-100","curve-right",2,"background-color","#f7f7f7",3,"click"],[1,"row","mx-0","align-items-center","mb-1",3,"ngClass"],[1,"col-3","pl-3","inventory-text"],[1,"col-5","px-0","inventory-text"],[1,"col-4","pr-3"],[1,"row","mx-0","justify-content-around"],["id","subract",1,"d-flex","align-items-center"],[1,"rounded-corner","border-sm","shadow-sm"],[1,"border-0","bg-white","w-25px","h-25px","rounded-corner","d-flex","align-items-center","justify-content-center",2,"font-size","8px",3,"click"],["id","qty",1,"mx-2"],[1,"text-center","inventory-text"],[1,"text-center","unit-text"],["id","add",1,"d-flex","align-items-center"],[1,"w-100","w85h-15","mt-1","b-shadow","bg-transparent"],[1,"col-12","d-flex","justify-content-center","align-items-center","h-100"],["type","submit",1,"btn-success","text-white",3,"click"],["class","fa fa-spinner fa-spin mr-3",4,"ngIf"],[1,"fa","fa-spinner","fa-spin","mr-3"]],template:function(e,t){1&e&&(d.Qb(0,"link",0),d.Vb(1,"div",1),d.Vb(2,"div",2),d.Vb(3,"button",3),d.gc("click",function(){return t.sidenav_close()}),d.Qb(4,"fa-icon",4),d.Ub(),d.Mc(5," Add To Order "),d.Vb(6,"button",5),d.gc("click",function(){return t.searchViewUpdate()}),d.Qb(7,"fa-icon",4),d.Ub(),d.Ub(),d.Vb(8,"div",6),d.Kc(9,H,6,2,"div",7),d.Vb(10,"div",8),d.Vb(11,"div",9),d.Mc(12,"CATEGORY"),d.Ub(),d.Vb(13,"div",10),d.Mc(14,"PRODUCT NAME"),d.Ub(),d.Vb(15,"div",11),d.Mc(16,"QUANTITY"),d.Ub(),d.Ub(),d.Qb(17,"div",12),d.Vb(18,"div",13),d.Kc(19,W,20,8,"div",14),d.Ub(),d.Ub(),d.Ub(),d.Kc(20,Y,6,1,"div",15)),2&e&&(d.Cb(1),d.pc("ngStyle",d.tc(6,$,null!=t.orderDetails?"85vh":"100vh")),d.Cb(3),d.pc("icon",t.close),d.Cb(3),d.pc("icon",t.faSearch),d.Cb(2),d.pc("ngIf",t.searchOptionEnabled),d.Cb(10),d.pc("ngForOf",t.products),d.Cb(1),d.pc("ngIf",null!=t.orderDetails))},directives:[r.m,p.a,r.l,r.k,r.j],styles:['@import url("https://fonts.googleapis.com/css2?family=Open+Sans:ital,wght@0,300;0,400;0,600;0,700;0,800;1,300;1,400;1,600;1,700;1,800&display=swap");@font-face{font-family:HelveticaNeue-Bold;font-style:normal;font-weight:400;src:local("HelveticaNeue-Bold"),url("Helvetica Neu Bold.61acdee6f288cddccf23.ttf") format("ttf")}@font-face{font-family:CerebriSans-Bold;font-style:normal;font-weight:400;src:local("CerebriSans-Bold"),url(CerebriSans-Bold.b28d46a00415bec63bba.ttf) format("ttf");src:local("CerebriSans-Bold"),url(CerebriSans-Bold.f48e05c76db5e6bd676c.eot) format("eot");src:local("CerebriSans-Bold"),url(CerebriSans-Bold.1b8ded389d0dc424b19b.svg) format("svg");src:local("CerebriSans-Bold"),url(CerebriSans-Bold.1b4400b13ebd711dd3e8.woff) format("woff");src:local("CerebriSans-Bold"),url(CerebriSans-Bold.1b89f96de9e78fd26a7f.woff2) format("woff2")}@font-face{font-family:\\ CerebriSans-semibold;font-style:normal;font-weight:400;src:local("CerebriSans-Bold"),url(CerebriSans-SemiBold.dcda3674ac76f4e31e87.ttf) format("ttf");src:local("CerebriSans-Bold"),url(CerebriSans-SemiBold.8c2b25fda64ba8de398a.eot) format("eot");src:local("CerebriSans-Bold"),url(CerebriSans-SemiBold.d4680810013431cbe6c7.svg) format("svg");src:local("CerebriSans-Bold"),url(CerebriSans-SemiBold.700f305197d6f163d348.woff) format("woff");src:local("CerebriSans-Bold"),url(CerebriSans-SemiBold.29097270d5f0e9003fd4.woff2) format("woff2")}@font-face{font-family:CerebriSans-Light;font-style:normal;font-weight:400;src:local("CerebriSans-Bold"),url(CerebriSans-Light.ddb81c4966caddeb5524.ttf) format("ttf");src:local("CerebriSans-Bold"),url(CerebriSans-Light.1e4f0f37d8ed20e51e27.eot) format("eot");src:local("CerebriSans-Bold"),url(CerebriSans-Light.efa3b6fb5acdd7fa23ab.svg) format("svg");src:local("CerebriSans-Bold"),url(CerebriSans-Light.650c547e86d77193b2d0.woff) format("woff");src:local("CerebriSans-Bold"),url(CerebriSans-Light.93b3eb2ec96f14eca31e.woff2) format("woff2")}@font-face{font-family:CerebriSans-Regular;font-style:normal;font-weight:400;src:local("CerebriSans-Regular"),url(CerebriSans-Regular.da1eaafe42c93475b338.ttf) format("ttf");src:local("CerebriSans-Regular"),url(CerebriSans-Regular.ccb7af1c430bd224cb88.eot) format("eot");src:local("CerebriSans-Regular"),url(CerebriSans-Regular.8a18b1b14a235efe141d.svg) format("svg");src:local("CerebriSans-Regular"),url(CerebriSans-Regular.81bf15fd01ef8a22e704.woff) format("woff");src:local("CerebriSans-Regular"),url(CerebriSans-Regular.a9f198f5da5b6fe108ed.woff2) format("woff2")}.p-a[_ngcontent-%COMP%]{height:85vh;overflow:auto}.p-a[_ngcontent-%COMP%], .w85h-15[_ngcontent-%COMP%]{z-index:1!important;background-color:#fff}.w85h-15[_ngcontent-%COMP%]{height:calc(100% - 85vh - .25rem)}.bg-background[_ngcontent-%COMP%]{background-color:#f0f0f0}.tab-title[_ngcontent-%COMP%]{font-size:14px;color:#4a4a4a;font-family:CerebriSans-Bold}.line_add_product[_ngcontent-%COMP%]{height:2px;width:100%;background-color:#707070}.unit-text[_ngcontent-%COMP%]{color:#4a4a4a;font-size:10px;font-family:CerebriSans-Light}.w-25px[_ngcontent-%COMP%]{width:17px}.h-25px[_ngcontent-%COMP%]{height:17px}.inventory-text[_ngcontent-%COMP%]{color:#4a4a4a;font-size:13.5px;line-break:anywhere;font-family:\\ CerebriSans-semibold}.heading-text[_ngcontent-%COMP%]{color:#4a4a4a;font-family:CerebriSans-Bold;font-size:15px}.mt-10px[_ngcontent-%COMP%]{margin-top:10px}.mb-10px[_ngcontent-%COMP%]{margin-bottom:10px}.rounded-corner[_ngcontent-%COMP%]{border-radius:50%}.border-sm[_ngcontent-%COMP%]{border:1.8px solid #4a4a4a}.b-shadow[_ngcontent-%COMP%]{box-shadow:0 3px 6px 0 rgba(20,20,20,.16)}@media (max-width:992px){.tab-title[_ngcontent-%COMP%]{font-size:13px!important}}.btn-success[_ngcontent-%COMP%]{background-color:#679187;border-radius:0;border-style:none;box-shadow:0 3px 6px 0 rgba(0,0,0,.16);min-width:240px;min-height:40px}.btn-success[_ngcontent-%COMP%]:focus{outline:none;border:none;box-shadow:none}.btn-success[_ngcontent-%COMP%]:hover{opacity:.9}']}),e})();const G={prefix:"fa",iconName:"line",icon:[512,512,[],"","M437.126,74.939c-99.826-99.826-262.307-99.826-362.133,0C26.637,123.314,0,187.617,0,256.005\n\t\t\ts26.637,132.691,74.993,181.047c49.923,49.923,115.495,74.874,181.066,74.874s131.144-24.951,181.066-74.874\n\t\t\tC536.951,337.226,536.951,174.784,437.126,74.939z M409.08,409.006c-84.375,84.375-221.667,84.375-306.042,0\n\t\t\tc-40.858-40.858-63.37-95.204-63.37-153.001s22.512-112.143,63.37-153.021c84.375-84.375,221.667-84.355,306.042,0\n\t\t\tC493.435,187.359,493.435,324.651,409.08,409.006z M341.525,310.827l-56.151-56.071l56.151-56.071c7.735-7.735,7.735-20.29,0.02-28.046\n\t\t\tc-7.755-7.775-20.31-7.755-28.065-0.02l-56.19,56.111l-56.19-56.111c-7.755-7.735-20.31-7.755-28.065,0.02\n\t\t\tc-7.735,7.755-7.735,20.31,0.02,28.046l56.151,56.071l-56.151,56.071c-7.755,7.735-7.755,20.29-0.02,28.046\n\t\t\tc3.868,3.887,8.965,5.811,14.043,5.811s10.155-1.944,14.023-5.792l56.19-56.111l56.19,56.111\n\t\t\tc3.868,3.868,8.945,5.792,14.023,5.792c5.078,0,10.175-1.944,14.043-5.811C349.28,331.117,349.28,318.562,341.525,310.827z"]},Z={prefix:"fa",iconName:"line",icon:[512,512,[],"","M0 0h24v24H0z M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"]},ee={prefix:"fa",iconName:"line",icon:[512,512,[],"","M0 0h24v24H0z M19 13H5v-2h14v2z"]};var te=n("NFeN"),ne=n("bSwM");const re=["table"],oe=["loader"],ie=["sidenav"];function ce(e,t){if(1&e&&d.Qb(0,"app-inventory-order-form",37),2&e){const e=d.kc(),t=d.xc(3);d.pc("sidenav",t)("field",e.field)("status",e.status)("ngClass",1==e.show_product_popup?"inventory_width":"w-385")}}function se(e,t){if(1&e&&d.Qb(0,"app-add-inventory-order",38),2&e){const e=d.kc(),t=d.xc(3);d.pc("sidenav",t)("ngClass",1==e.show_product_popup?"inventory_width":"w-385")}}function ae(e,t){if(1&e&&d.Qb(0,"app-addproduct-component",39),2&e){const e=d.kc(),t=d.xc(3);d.pc("sidenav",t)("orderDetails",e.orderInfoByPopUp)("orderedProductsFromAddInventory",e.orderedProductsFromAddInventory)("ngClass",1==e.show_product_popup?"addproduct_width":"")}}function le(e,t){1&e&&(d.Vb(0,"th",40),d.Mc(1,"DATE & TIME"),d.Ub())}function de(e,t){if(1&e&&(d.Vb(0,"td",41),d.Mc(1),d.Ub()),2&e){const e=t.$implicit;d.Cb(1),d.Oc(" ",e.created_date," ")}}function be(e,t){1&e&&(d.Vb(0,"th",42),d.Mc(1,"ORDER SOURCE"),d.Ub())}function fe(e,t){if(1&e&&(d.Vb(0,"td",43),d.Mc(1),d.Ub()),2&e){const e=t.$implicit;d.Cb(1),d.Oc(" ",e.branch_info.branch_name," ")}}function ue(e,t){1&e&&(d.Vb(0,"th",40),d.Mc(1,"ORDERED BY"),d.Ub())}function he(e,t){if(1&e&&(d.Vb(0,"td",44),d.Mc(1),d.Ub()),2&e){const e=t.$implicit;d.Cb(1),d.Oc(" ",e.ordered_by_details?e.ordered_by_details.barista_name:"ADMIN"," ")}}function me(e,t){1&e&&(d.Vb(0,"th",42),d.Mc(1,"RECIEVED BY"),d.Ub())}function pe(e,t){if(1&e&&(d.Vb(0,"td",45),d.Mc(1),d.Ub()),2&e){const e=t.$implicit;d.pc("ngClass",e.recieved_by_details?"":"text-center"),d.Cb(1),d.Oc(" ",e.recieved_by_details?e.recieved_by_details.barista_name:"-"," ")}}function ge(e,t){1&e&&(d.Vb(0,"th",42),d.Mc(1,"DATE DELIVERED"),d.Ub())}function _e(e,t){if(1&e&&(d.Vb(0,"td",46),d.Mc(1),d.Ub()),2&e){const e=t.$implicit;d.pc("ngClass",e.delivery_date?"":"text-center"),d.Cb(1),d.Oc(" ",e.delivered_date?e.delivered_date:"-"," ")}}function ve(e,t){1&e&&(d.Vb(0,"th",47),d.Mc(1,"PRODUCTS ORDERED"),d.Ub())}function Ce(e,t){if(1&e&&(d.Vb(0,"td",48),d.Mc(1),d.Ub()),2&e){const e=t.$implicit;d.Cb(1),d.Oc(" ",e.number_of_products," ")}}function xe(e,t){1&e&&(d.Vb(0,"th",49),d.Mc(1,"STATUS"),d.Ub())}function ye(e,t){if(1&e&&(d.Vb(0,"div",54),d.Vb(1,"span"),d.Mc(2),d.Ub(),d.Ub()),2&e){const e=d.kc().$implicit;d.Cb(2),d.Nc(e.status)}}function we(e,t){if(1&e&&(d.Vb(0,"div",55),d.Vb(1,"span"),d.Mc(2),d.Ub(),d.Ub()),2&e){const e=d.kc().$implicit;d.Cb(2),d.Nc(e.status)}}function Se(e,t){if(1&e&&(d.Vb(0,"div",56),d.Vb(1,"span"),d.Mc(2),d.Ub(),d.Ub()),2&e){const e=d.kc().$implicit;d.Cb(2),d.Nc("declained"==e.status?"declined":e.status)}}function Oe(e,t){if(1&e&&(d.Vb(0,"div",57),d.Vb(1,"span"),d.Mc(2),d.Ub(),d.Ub()),2&e){const e=d.kc().$implicit;d.Cb(2),d.Nc(e.status)}}function Me(e,t){if(1&e&&(d.Vb(0,"td",41),d.Kc(1,ye,3,1,"div",50),d.Kc(2,we,3,1,"div",51),d.Kc(3,Se,3,1,"div",52),d.Kc(4,Oe,3,1,"div",53),d.Ub()),2&e){const e=t.$implicit;d.Cb(1),d.pc("ngIf","pending"==e.status),d.Cb(1),d.pc("ngIf","approved"==e.status),d.Cb(1),d.pc("ngIf","declined"==e.status||"declained"==e.status),d.Cb(1),d.pc("ngIf","delivered"==e.status)}}function Ue(e,t){if(1&e){const e=d.Wb();d.Vb(0,"th",42),d.Vb(1,"button",58),d.gc("click",function(){return d.Ac(e),d.kc().addOrder()}),d.Vb(2,"mat-icon",59),d.Mc(3,"add_circle"),d.Ub(),d.Ub(),d.Ub()}}function Ve(e,t){if(1&e){const e=d.Wb();d.Vb(0,"td",48),d.Vb(1,"button",58),d.gc("click",function(){d.Ac(e);const n=t.index;return d.kc().openSideBar("order",n)}),d.Vb(2,"mat-icon",59),d.Mc(3,"edit"),d.Ub(),d.Ub(),d.Ub()}}function ke(e,t){1&e&&d.Qb(0,"th",42)}function Pe(e,t){if(1&e){const e=d.Wb();d.Vb(0,"td",48),d.Vb(1,"mat-checkbox",60),d.gc("change",function(n){d.Ac(e);const r=t.index;return d.kc().handleSelection(n.checked,r)}),d.Ub(),d.Ub()}}function Be(e,t){1&e&&d.Qb(0,"tr",61)}function Re(e,t){1&e&&d.Qb(0,"tr",62)}function Ie(e,t){1&e&&(d.Vb(0,"div",63),d.Mc(1," No Inventory Orders Found "),d.Ub())}const Ae=function(e){return{active:e}};function De(e,t){if(1&e){const e=d.Wb();d.Vb(0,"li",71),d.Vb(1,"a",68),d.gc("click",function(){d.Ac(e);const n=t.$implicit;return d.kc(3).getIntventoryOrders(n)}),d.Mc(2),d.Ub(),d.Ub()}if(2&e){const e=t.$implicit,n=d.kc(3);d.pc("ngClass",d.tc(2,Ae,n.current===e)),d.Cb(2),d.Nc(e)}}const Le=function(e){return{disabled:e}};function Ne(e,t){if(1&e){const e=d.Wb();d.Vb(0,"ul",66),d.Vb(1,"li",67),d.Vb(2,"a",68),d.gc("click",function(){return d.Ac(e),d.kc(2).getIntventoryOrders(1)}),d.Vb(3,"i",69),d.Mc(4,"first_page"),d.Ub(),d.Ub(),d.Ub(),d.Vb(5,"li",67),d.Vb(6,"a",68),d.gc("click",function(){d.Ac(e);const t=d.kc(2);return t.getIntventoryOrders(t.current-1)}),d.Vb(7,"i",69),d.Mc(8,"navigate_before"),d.Ub(),d.Ub(),d.Ub(),d.Kc(9,De,3,4,"li",70),d.Vb(10,"li",67),d.Vb(11,"a",68),d.gc("click",function(){d.Ac(e);const t=d.kc(2);return t.getIntventoryOrders(t.current+1)}),d.Vb(12,"i",69),d.Mc(13,"navigate_next"),d.Ub(),d.Ub(),d.Ub(),d.Vb(14,"li",67),d.Vb(15,"a",68),d.gc("click",function(){d.Ac(e);const t=d.kc(2);return t.getIntventoryOrders(t.totalPages)}),d.Vb(16,"i",69),d.Mc(17,"last_page"),d.Ub(),d.Ub(),d.Ub(),d.Ub()}if(2&e){const e=d.kc(2);d.Cb(1),d.pc("ngClass",d.tc(5,Le,1===e.current)),d.Cb(4),d.pc("ngClass",d.tc(7,Le,1===e.current)),d.Cb(4),d.pc("ngForOf",e.pages),d.Cb(1),d.pc("ngClass",d.tc(9,Le,e.current===e.totalPages)),d.Cb(4),d.pc("ngClass",d.tc(11,Le,e.current===e.totalPages))}}function Qe(e,t){if(1&e&&(d.Vb(0,"nav",64),d.Kc(1,Ne,18,13,"ul",65),d.Ub()),2&e){const e=d.kc();d.Cb(1),d.pc("ngIf",e.pages)}}const Ee=[{path:"",component:(()=>{class e{constructor(e,t,n){this.common_service=e,this.apiServices=t,this.ref=n,this.current=1,this.totalPages=1,this.endPage=1,this.startPage=1,this.status="",this.isLoading=!1,this.field="",this.createOrder=!1,this.dates=null,this.subscribtion=null,this.loadsh=s,this.orderInfoByPopUp=null,this.reorder=!1,this.data=10,this.orderedProductsFromAddInventory=[],this.url_array=[],this.faPencilAlt=c.w,this.inventory_orders=[],this.selectedRowsForReport=[],this.display_coloums=["date_time","order_source","ordered_by","recieved_by","date_delivered","product_ordered","status","check","action"]}ngAfterViewInit(){this.loader.nativeElement.style.width=this.table.nativeElement.clientWidth+"px",this.enableSubscription()}enableSubscription(){this.common_service.reOrderSuccess.subscribe(e=>{1==e&&this.initalize(e)}),this.common_service.commonEmitter.subscribe(e=>{this.currentTime=l().format("HH:mm:ss"),console.log(this.currentTime),this.data=20;let t=localStorage.getItem("selectedBranch")?JSON.parse(localStorage.getItem("selectedBranch")||""):null,n=0==((null==t?void 0:t.length)||0)?null:null==t?void 0:t.map(function(e){return e._id});n=0==(null==t?void 0:t.length)?null:n;let r=localStorage.getItem("selectedDate")?JSON.parse(localStorage.getItem("selectedDate")||""):null;null!=n&&null!=r?this.filter_order_dates_branch(r,n):null==n&&null==r?this.get_orders():null==r?this.filter_orders_branches(n):this.filter_order_dates(r)}),this.common_service.choose_date.subscribe(e=>{this.selectedRowsForReport=[];let t=localStorage.getItem("selectedBranch")?JSON.parse(localStorage.getItem("selectedBranch")||""):null,n=null==t?void 0:t.map(function(e){return e._id});n=0==(null==t?void 0:t.length)?null:n,this.dates=e,0==(null==n?void 0:n.length)?this.filter_order_dates(e):this.filter_order_dates_branch(e,n)}),this.common_service.url_updated.subscribe(e=>{this.url_array=e}),this.common_service.exportClicked.subscribe(e=>{if("products"==this.url_array[1]&&"inventory-orders"==this.url_array[2]){let e=this.loadsh.map(this.inventory_orders,e=>this.loadsh.pick(e,["created_date","branch_info.branch_name","ordered_by_details.barista_name","recieved_by_details.barista_name","delivered_date","number_of_products","status"]));this.downloadFile(e)}}),this.common_service.select_branch.subscribe(e=>{this.selectedRowsForReport=[];let t=localStorage.getItem("selectedBranch")?JSON.parse(localStorage.getItem("selectedBranch")||""):null,n=null==t?void 0:t.map(function(e){return e._id});n=0==t.length?null:n,this.dates=localStorage.getItem("selectedDate")?JSON.parse(localStorage.getItem("selectedDate")||""):null,console.log(this.dates,n),null!=this.dates&&null!=this.dates?0==(null==n?void 0:n.length)?this.filter_order_dates(this.dates):this.filter_order_dates_branch(this.dates,n):0==n.length?this.get_orders():this.filter_orders_branches(n)}),console.log(this.currentTime,"outside"),this.common_service.openInventoryForm.subscribe(e=>{this.orderInfoByPopUp=e,this.show_product_popup=!0,console.log(this.show_product_popup)}),this.common_service.closeInventoryForm.subscribe(e=>{this.close_pop_up=!0,this.show_product_popup=!1,console.log(this.close_pop_up)}),this.common_service.updateSyningCountEmitter.subscribe(e=>{this.orderedProductsFromAddInventory=e})}filter_orders_branches(e,t=!1){this.isLoading=!0,this.apiServices.get_branch_inventory_orders({branch_id:e}).subscribe(e=>{this.inventory_orders=e.data.order_details,this.isLoading=!1,t&&this.push()})}addOrder(){this.createOrder=!0,this.sidenav.toggle()}filter_order_dates(e,t=!1){this.isLoading=!0,this.apiServices.get_branch_inventory_orders({start:e.start,end:e.end}).subscribe(e=>{this.inventory_orders=e.data.order_details,this.isLoading=!1,t&&this.push()})}filter_order_dates_branch(e,t,n=!1){this.isLoading=!0,this.apiServices.get_branch_inventory_orders({start:e.start,end:e.end,branch_id:t}).subscribe(e=>{this.inventory_orders=e.data.order_details,this.isLoading=!1,n&&this.push()})}handleSelection(e,t){e?this.selectedRowsForReport.push(this.inventory_orders[t]):this.selectedRowsForReport.splice(this.selectedRowsForReport.findIndex(e=>e._id==this.inventory_orders[t]._id),1),console.log(this.selectedRowsForReport)}ngOnInit(){this.initalize(),this.pages=Array.from(Array(this.endPage+1-this.startPage).keys()).map(e=>this.startPage+e),this.get_catelouges()}get_catelouges(){this.isLoading=!0,this.apiServices.getCatelougeAll().subscribe(e=>{e.success?(console.log(e),this.isLoading=!1,this.catelouges=e.data.inventories):this.common_service.showAlert(e.message)})}initalize(e=!1){this.innerWidth=window.innerWidth;let t,n=localStorage.getItem("selectedBranch")?JSON.parse(localStorage.getItem("selectedBranch")||""):null;(null==n?void 0:n._id)?(localStorage.setItem("selectedBranch",JSON.stringify([])),t=null):(t=null==n?void 0:n.map(function(e){return e._id}),t=0==(null==n?void 0:n.length)?null:t);let r=localStorage.getItem("selectedDate")?JSON.parse(localStorage.getItem("selectedDate")||""):null;null!=t&&null!=r?this.filter_order_dates_branch(r,t,e):null==t&&null==r?this.get_orders(e):null==r?this.filter_orders_branches(t,e):this.filter_order_dates(r,e)}get_orders(e=!1){this.isLoading=!0,this.apiServices.getInventoryOrders(null).subscribe(t=>{this.inventory_orders=t.data.order_details,this.isLoading=!1,e&&this.push()})}getIntventoryOrders(e=1){console.log(e)}onResize(e){this.innerWidth=window.innerWidth}openSideBar(e,t,n){this.createOrder=!1,this.field=e,this.status=this.inventory_orders[t].status,this.row=t,this.sidenav.toggle()}push(){this.common_service.inventoryOrder.emit(this.inventory_orders[this.row])}closed(){this.common_service.closedSideNav.emit(),this.show_product_popup=!1}downloadFile(e){return Object(i.a)(this,void 0,void 0,function*(){console.log(this.selectedRowsForReport);let e=0,t=0;this.selectedRowsForReport=this.selectedRowsForReport.length>0?this.selectedRowsForReport:this.inventory_orders;let n=[],r=[];n.push({Reference:"REFERENCE",Name_of_product:"NAME OF PRODUCT",Quantity:"QUANTITY",Unit:"UNIT",Unit_price:"PRICE",Total_price:"TOTAL PRICE"}),this.selectedRowsForReport.forEach((o,i)=>{var c;null===(c=o.ordered_items)||void 0===c||c.forEach(i=>{let c=this.catelouges.findIndex(e=>e._id==i.inventory_id);console.log(this.catelouges,c,i);let s=this.catelouges[c<0?0:c].price,a={Reference:i.refernce,Name_of_product:i.inventory_name,Quantity:i.qty,Unit:i.unit,Unit_price:s,Total_price:i.qty*Number(s)},l=n.map(function(e){return e.Reference});if(e+=i.qty,t+=i.qty*Number(i.price),l.includes(i.refernce)){let e=l.indexOf(i.refernce);n[e].Quantity+=i.qty,n[e].Total_price+=i.qty*Number(i.price)}else n.push(a);r.includes(o.branch_info.branch_name)||r.push(o.branch_info.branch_name)})}),n.push({Reference:"",Name_of_product:"",Quantity:"",Unit:"",Unit_price:"",Total_price:""}),n.push({Reference:"TOTAL",Name_of_product:"",Quantity:e,Unit:"",Unit_price:"",Total_price:t});let o=r.join(",");console.log(n,o);const i=a.utils.book_new(),c=a.utils.json_to_sheet(n);a.utils.book_append_sheet(i,c,"SYRA__INVENTORY_REPORT"),a.utils.sheet_add_aoa(c,[[o,"","","","",""]],{origin:0}),a.writeFile(i,o+"INVENTORY-REPORT_"+l().format("DD-MM-YYYY")+".xls"),this.common_service.export_success.emit()})}}return e.\u0275fac=function(t){return new(t||e)(d.Pb(b.a),d.Pb(f.a),d.Pb(d.h))},e.\u0275cmp=d.Jb({type:e,selectors:[["app-inventory-orders"]],viewQuery:function(e,t){if(1&e&&(d.Rc(re,!0),d.Rc(oe,!0),d.Rc(ie,!0)),2&e){let e;d.wc(e=d.hc())&&(t.table=e.first),d.wc(e=d.hc())&&(t.loader=e.first),d.wc(e=d.hc())&&(t.sidenav=e.first)}},hostBindings:function(e,t){1&e&&d.gc("resize",function(e){return t.onResize(e)},!1,d.zc)},decls:46,vars:13,consts:[[1,"container","wrapper"],[1,"bg-transparent"],[2,"background-color","#f0f0f0",3,"mode","position","ngClass","opened","closed"],["sidenav",""],[1,"d-lg-flex","column-reverse"],[3,"sidenav","field","status","ngClass",4,"ngIf"],[3,"sidenav","ngClass",4,"ngIf"],[3,"sidenav","orderDetails","orderedProductsFromAddInventory","ngClass",4,"ngIf"],[1,"mb-5"],[1,"mx-4","table-w-350-scroll"],["table",""],[1,"bg-white","top-60px","justify-content-center","align-items-center","z-index-1","alpha50","content","position-absolute","left-0","w100-48px","h76-56",3,"ngClass"],["loader",""],["mat-table","",1,"syra-table","w-100",3,"dataSource"],["matColumnDef","date_time"],["mat-header-cell","","class","p-24",4,"matHeaderCellDef"],["mat-cell","","class","p-24",4,"matCellDef"],["matColumnDef","order_source"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","ordered_by"],["mat-cell","","class","p-24","style","text-transform: capitalize;",4,"matCellDef"],["matColumnDef","recieved_by"],["mat-cell","","style","text-transform: capitalize;",3,"ngClass",4,"matCellDef"],["matColumnDef","date_delivered"],["mat-cell","","class","p-24",3,"ngClass",4,"matCellDef"],["matColumnDef","product_ordered"],["mat-header-cell","","style","width: 25px;",4,"matHeaderCellDef"],["mat-cell","","class","text-center",4,"matCellDef"],["matColumnDef","status"],["mat-header-cell","","class","p-24 pr-0",4,"matHeaderCellDef"],["matColumnDef","action"],["matColumnDef","check"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","","class","p-0",4,"matRowDef","matRowDefColumns"],["class","no-items-table bg-white h76-60px",4,"ngIf"],["aria-label","Page navigation example","class","mt-2 mr-auto d-none",4,"ngIf"],[3,"sidenav","field","status","ngClass"],[3,"sidenav","ngClass"],[3,"sidenav","orderDetails","orderedProductsFromAddInventory","ngClass"],["mat-header-cell","",1,"p-24"],["mat-cell","",1,"p-24"],["mat-header-cell",""],["mat-cell",""],["mat-cell","",1,"p-24",2,"text-transform","capitalize"],["mat-cell","",2,"text-transform","capitalize",3,"ngClass"],["mat-cell","",1,"p-24",3,"ngClass"],["mat-header-cell","",2,"width","25px"],["mat-cell","",1,"text-center"],["mat-header-cell","",1,"p-24","pr-0"],["class","px-2 bg-pending rounded-10px text-truncate d-flex justify-content-center",4,"ngIf"],["class","px-2 bg-approved rounded-10px d-flex justify-content-center  text-truncate",4,"ngIf"],["class","px-2 bg-declained rounded-10px d-flex justify-content-center text-truncate",4,"ngIf"],["class","px-2  bg-delivered rounded-10px d-flex justify-content-center text-truncate",4,"ngIf"],[1,"px-2","bg-pending","rounded-10px","text-truncate","d-flex","justify-content-center"],[1,"px-2","bg-approved","rounded-10px","d-flex","justify-content-center","text-truncate"],[1,"px-2","bg-declained","rounded-10px","d-flex","justify-content-center","text-truncate"],[1,"px-2","bg-delivered","rounded-10px","d-flex","justify-content-center","text-truncate"],[1,"border-0","bg-transparent","edit_btn_act","pr-1",3,"click"],["aria-hidden","false","aria-label","Example home icon",1,"text-dark","font-size-20"],[1,"w-100","h-17px","my-checkbox_select",3,"change"],["mat-header-row",""],["mat-row","",1,"p-0"],[1,"no-items-table","bg-white","h76-60px"],["aria-label","Page navigation example",1,"mt-2","mr-auto","d-none"],["class","pagination justify-content-end f-wrap m-0",4,"ngIf"],[1,"pagination","justify-content-end","f-wrap","m-0"],[1,"page-item",3,"ngClass"],["mdbWavesEffect","",1,"page-link",3,"click"],[1,"material-icons"],["class","page-item mt-1",3,"ngClass",4,"ngFor","ngForOf"],[1,"page-item","mt-1",3,"ngClass"]],template:function(e,t){1&e&&(d.Vb(0,"div",0),d.Vb(1,"mat-sidenav-container",1),d.Vb(2,"mat-sidenav",2,3),d.gc("opened",function(){return t.push()})("closed",function(){return t.closed()}),d.Vb(4,"div",4),d.Kc(5,ce,1,4,"app-inventory-order-form",5),d.Kc(6,se,1,2,"app-add-inventory-order",6),d.Kc(7,ae,1,4,"app-addproduct-component",7),d.Ub(),d.Ub(),d.Vb(8,"mat-sidenav-content",8),d.Vb(9,"div",9,10),d.Vb(11,"div",11,12),d.Mc(13," Loading... "),d.Ub(),d.Vb(14,"table",13),d.Tb(15,14),d.Kc(16,le,2,0,"th",15),d.Kc(17,de,2,1,"td",16),d.Sb(),d.Tb(18,17),d.Kc(19,be,2,0,"th",18),d.Kc(20,fe,2,1,"td",19),d.Sb(),d.Tb(21,20),d.Kc(22,ue,2,0,"th",15),d.Kc(23,he,2,1,"td",21),d.Sb(),d.Tb(24,22),d.Kc(25,me,2,0,"th",18),d.Kc(26,pe,2,2,"td",23),d.Sb(),d.Tb(27,24),d.Kc(28,ge,2,0,"th",18),d.Kc(29,_e,2,2,"td",25),d.Sb(),d.Tb(30,26),d.Kc(31,ve,2,0,"th",27),d.Kc(32,Ce,2,1,"td",28),d.Sb(),d.Tb(33,29),d.Kc(34,xe,2,0,"th",30),d.Kc(35,Me,5,4,"td",16),d.Sb(),d.Tb(36,31),d.Kc(37,Ue,4,0,"th",18),d.Kc(38,Ve,4,0,"td",28),d.Sb(),d.Tb(39,32),d.Kc(40,ke,1,0,"th",18),d.Kc(41,Pe,2,0,"td",28),d.Sb(),d.Kc(42,Be,1,0,"tr",33),d.Kc(43,Re,1,0,"tr",34),d.Ub(),d.Kc(44,Ie,2,0,"div",35),d.Kc(45,Qe,2,1,"nav",36),d.Ub(),d.Ub(),d.Ub(),d.Ub()),2&e&&(d.Cb(2),d.pc("mode","over")("position","end")("ngClass",1==t.show_product_popup?"w-500":t.innerWidth<=576?"w-100":"w-385"),d.Cb(3),d.pc("ngIf",!t.createOrder),d.Cb(1),d.pc("ngIf",t.createOrder),d.Cb(1),d.pc("ngIf",t.show_product_popup),d.Cb(4),d.pc("ngClass",t.isLoading?"d-flex":"d-none"),d.Cb(3),d.pc("dataSource",t.inventory_orders),d.Cb(28),d.pc("matHeaderRowDef",t.display_coloums)("matHeaderRowDefSticky",!0),d.Cb(1),d.pc("matRowDefColumns",t.display_coloums),d.Cb(1),d.pc("ngIf",0==t.inventory_orders.length&&1!=t.isLoading),d.Cb(1),d.pc("ngIf",t.inventory_orders.length>15&&1!=t.isLoading))},directives:[u.b,u.a,r.j,r.l,u.c,h.n,h.c,h.i,h.b,h.k,h.m,P,q,X,h.h,h.a,te.a,ne.a,h.j,h.l,r.k],styles:['@font-face{font-family:HelveticaNeue-Bold;font-style:normal;font-weight:400;src:local("HelveticaNeue-Bold"),url("Helvetica Neu Bold.61acdee6f288cddccf23.ttf") format("ttf")}@font-face{font-family:CerebriSans-Bold;font-style:normal;font-weight:400;src:local("CerebriSans-Bold"),url(CerebriSans-Bold.b28d46a00415bec63bba.ttf) format("ttf");src:local("CerebriSans-Bold"),url(CerebriSans-Bold.f48e05c76db5e6bd676c.eot) format("eot");src:local("CerebriSans-Bold"),url(CerebriSans-Bold.1b8ded389d0dc424b19b.svg) format("svg");src:local("CerebriSans-Bold"),url(CerebriSans-Bold.1b4400b13ebd711dd3e8.woff) format("woff");src:local("CerebriSans-Bold"),url(CerebriSans-Bold.1b89f96de9e78fd26a7f.woff2) format("woff2")}@font-face{font-family:\\ CerebriSans-semibold;font-style:normal;font-weight:400;src:local("CerebriSans-Bold"),url(CerebriSans-SemiBold.dcda3674ac76f4e31e87.ttf) format("ttf");src:local("CerebriSans-Bold"),url(CerebriSans-SemiBold.8c2b25fda64ba8de398a.eot) format("eot");src:local("CerebriSans-Bold"),url(CerebriSans-SemiBold.d4680810013431cbe6c7.svg) format("svg");src:local("CerebriSans-Bold"),url(CerebriSans-SemiBold.700f305197d6f163d348.woff) format("woff");src:local("CerebriSans-Bold"),url(CerebriSans-SemiBold.29097270d5f0e9003fd4.woff2) format("woff2")}@font-face{font-family:CerebriSans-Light;font-style:normal;font-weight:400;src:local("CerebriSans-Bold"),url(CerebriSans-Light.ddb81c4966caddeb5524.ttf) format("ttf");src:local("CerebriSans-Bold"),url(CerebriSans-Light.1e4f0f37d8ed20e51e27.eot) format("eot");src:local("CerebriSans-Bold"),url(CerebriSans-Light.efa3b6fb5acdd7fa23ab.svg) format("svg");src:local("CerebriSans-Bold"),url(CerebriSans-Light.650c547e86d77193b2d0.woff) format("woff");src:local("CerebriSans-Bold"),url(CerebriSans-Light.93b3eb2ec96f14eca31e.woff2) format("woff2")}@font-face{font-family:CerebriSans-Regular;font-style:normal;font-weight:400;src:local("CerebriSans-Regular"),url(CerebriSans-Regular.da1eaafe42c93475b338.ttf) format("ttf");src:local("CerebriSans-Regular"),url(CerebriSans-Regular.ccb7af1c430bd224cb88.eot) format("eot");src:local("CerebriSans-Regular"),url(CerebriSans-Regular.8a18b1b14a235efe141d.svg) format("svg");src:local("CerebriSans-Regular"),url(CerebriSans-Regular.81bf15fd01ef8a22e704.woff) format("woff");src:local("CerebriSans-Regular"),url(CerebriSans-Regular.a9f198f5da5b6fe108ed.woff2) format("woff2")}.wrapper[_ngcontent-%COMP%]{margin-top:130px;font-family:CerebriSans-Bold}.table-w-350-scroll[_ngcontent-%COMP%]{height:76vh!important;overflow:auto}.h76-60px[_ngcontent-%COMP%]{height:calc(76vh - 60px);overflow:hidden}.bg-pending[_ngcontent-%COMP%]{background-color:#ab9cea}.bg-approved[_ngcontent-%COMP%]{background-color:#abe7c4}.bg-declained[_ngcontent-%COMP%]{background-color:red}.bg-delivered[_ngcontent-%COMP%]{background-color:#d90368}.p-5px[_ngcontent-%COMP%]{padding:5px}.rounded-10px[_ngcontent-%COMP%]{border-radius:10px}.w-385[_ngcontent-%COMP%]{width:450px}.w-500[_ngcontent-%COMP%]{width:65vw;transition:.1s ease}.column-reverse[_ngcontent-%COMP%]{flex-direction:row-reverse!important}.d-none[_ngcontent-%COMP%]{display:none!important}.inventory_width[_ngcontent-%COMP%]{width:450px!important}.addproduct_width[_ngcontent-%COMP%]{width:calc(100% - 450px)!important}@media (max-width:992px){.inventory_width[_ngcontent-%COMP%]{display:none!important}.addproduct_width[_ngcontent-%COMP%]{width:unset!important}.w-500[_ngcontent-%COMP%]{width:100%!important}}  .my-checkbox_select .mat-checkbox-label,   .my-checkbox_select .mat-checkbox-layout{width:100%!important}  .my-checkbox_select .mat-checkbox-inner-container{width:17.5px!important;height:17.5px!important;margin-right:0!important;box-shadow:0 2.5px 2.5px 0 rgba(0,0,0,.16)!important}.mat-checkbox-frame[_ngcontent-%COMP%],   .my-checkbox_select .mat-checkbox-background{border-radius:5px!important}.mat-accent[_ngcontent-%COMP%]   .mat-pseudo-checkbox-checked[_ngcontent-%COMP%], .mat-accent[_ngcontent-%COMP%]   .mat-pseudo-checkbox-indeterminate[_ngcontent-%COMP%], .mat-checkbox-checked.mat-accent[_ngcontent-%COMP%]   .mat-checkbox-background[_ngcontent-%COMP%], .mat-checkbox-indeterminate[_ngcontent-%COMP%]   .mat-checkbox-background[_ngcontent-%COMP%], .mat-pseudo-checkbox-checked[_ngcontent-%COMP%], .mat-pseudo-checkbox-indeterminate[_ngcontent-%COMP%],   .mat-checkbox-indeterminate.mat-accent .mat-checkbox-background,   .my-checkbox_select.mat-checkbox-checked.mat-accent .mat-checkbox-background,   .my-checkbox_select .mat-ripple-element{background-color:transparent!important}  .my-checkbox_select .mat-checkbox-checkmark-path{stroke:#000!important}']}),e})()}];let Fe=(()=>{class e{}return e.\u0275mod=d.Nb({type:e}),e.\u0275inj=d.Mb({factory:function(t){return new(t||e)},imports:[[o.f.forChild(Ee)],o.f]}),e})();var je=n("Qu3c");let Ke=(()=>{class e{}return e.\u0275mod=d.Nb({type:e}),e.\u0275inj=d.Mb({factory:function(t){return new(t||e)},imports:[[]]}),e})(),ze=(()=>{class e{}return e.\u0275mod=d.Nb({type:e}),e.\u0275inj=d.Mb({factory:function(t){return new(t||e)},imports:[[r.c,Fe,h.p,Ke,je.b,p.b,u.d,te.b,ne.b,I.d,A.b]]}),e})()},mCIx:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n("fXoL"),o=n("1kSV");let i=(()=>{class e{constructor(e,t){this.modalService=e,this.modal=t}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)(r.Pb(o.c),r.Pb(o.b))},e.\u0275cmp=r.Jb({type:e,selectors:[["app-delete"]],decls:12,vars:0,consts:[[1,"modal-header"],[1,"modal-title"],[1,"modal-body"],[1,"modal-footer"],["type","button",1,"btn","btn-light",3,"click"],["type","button",1,"btn","btn-danger",3,"click"]],template:function(e,t){1&e&&(r.Vb(0,"div"),r.Vb(1,"div",0),r.Vb(2,"h4",1),r.Mc(3,"Delete"),r.Ub(),r.Ub(),r.Vb(4,"div",2),r.Vb(5,"p"),r.Mc(6,"Do you really want to delete?"),r.Ub(),r.Ub(),r.Vb(7,"div",3),r.Vb(8,"button",4),r.gc("click",function(){return t.modal.dismiss()}),r.Mc(9,"Cancel"),r.Ub(),r.Vb(10,"button",5),r.gc("click",function(){return t.modal.close()}),r.Mc(11,"Delete"),r.Ub(),r.Ub(),r.Ub())},styles:[""]}),e})()}}]);