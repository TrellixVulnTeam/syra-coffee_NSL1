!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function n(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{DER8:function(t,r,o){"use strict";o.r(r),o.d(r,"InventoryOrdersModule",function(){return Ge});var i=o("ofXK"),c=o("tyNb"),a=o("mrSG"),s=o("wHSu"),l=o("LvDl"),d=o("EUZL"),b=o("wd/R"),f=o("fXoL"),u=o("gbi4"),m=o("7pgg"),h=o("XhcP"),p=o("+0xr"),g=o("2jKy"),v=o("6NWb"),_=["textarea"],C=["tableView"];function y(e,t){1&e&&(f.Vb(0,"div",32),f.Mc(1," Loading...\n"),f.Ub())}function x(e,t){if(1&e){var n=f.Wb();f.Vb(0,"button",33),f.gc("click",function(){return f.Ac(n),f.kc().sidenavnew_open()}),f.Qb(1,"fa-icon",7),f.Ub()}if(2&e){var r=f.kc();f.Cb(1),f.pc("icon",r.faPlusCircle)}}function w(e,t){if(1&e){var n=f.Wb();f.Vb(0,"div",34),f.Vb(1,"div",35),f.Mc(2),f.Ub(),f.Vb(3,"div",36),f.Vb(4,"div",37),f.Vb(5,"div",38),f.Vb(6,"div",39),f.Vb(7,"button",40),f.gc("click",function(){f.Ac(n);var e=t.index;return f.kc().minus(e)}),f.Qb(8,"fa-icon",7),f.Ub(),f.Ub(),f.Ub(),f.Vb(9,"div",41),f.Vb(10,"div",42),f.Mc(11),f.Ub(),f.Vb(12,"div",43),f.Mc(13),f.Ub(),f.Ub(),f.Vb(14,"div",44),f.Vb(15,"div",39),f.Vb(16,"button",40),f.gc("click",function(){f.Ac(n);var e=t.index;return f.kc().add(e)}),f.Qb(17,"fa-icon",7),f.Ub(),f.Ub(),f.Ub(),f.Ub(),f.Ub(),f.Ub()}if(2&e){var r=t.$implicit,o=f.kc();f.Cb(2),f.Pc(" ",r.refernce.toUpperCase()," - ",r.inventory_name," "),f.Cb(6),f.pc("icon",o.faMinusCircle),f.Cb(3),f.Nc(r.qty),f.Cb(2),f.Nc(r.unit),f.Cb(4),f.pc("icon",o.faPlusCircle)}}function S(e,t){1&e&&f.Qb(0,"i",46)}function k(e,t){if(1&e){var n=f.Wb();f.Vb(0,"div",29),f.Vb(1,"button",45),f.gc("click",function(){return f.Ac(n),f.kc().acceptAction()}),f.Kc(2,S,1,0,"i",31),f.Vb(3,"span"),f.Mc(4,"APPROVE"),f.Ub(),f.Ub(),f.Ub()}if(2&e){var r=f.kc();f.Cb(2),f.pc("ngIf",1==r.isLoadingAccept)}}function O(e,t){1&e&&f.Qb(0,"i",46)}function M(e,t){if(1&e){var n=f.Wb();f.Vb(0,"div",29),f.Vb(1,"button",47),f.gc("click",function(){return f.Ac(n),f.kc().declineAction()}),f.Kc(2,O,1,0,"i",31),f.Vb(3,"span"),f.Mc(4,"DECLINE"),f.Ub(),f.Ub(),f.Ub()}if(2&e){var r=f.kc();f.Cb(2),f.pc("ngIf",1==r.isLoadingDecline)}}function U(e,t){1&e&&f.Qb(0,"i",46)}function V(e,t){if(1&e){var n=f.Wb();f.Vb(0,"div",29),f.Vb(1,"button",48),f.gc("click",function(){return f.Ac(n),f.kc().updateOrderAsDelivered()}),f.Kc(2,U,1,0,"i",31),f.Vb(3,"span",49),f.Mc(4,"MARK AS DELIVERED"),f.Ub(),f.Ub(),f.Ub()}if(2&e){var r=f.kc();f.Cb(2),f.pc("ngIf",1==r.isMarkDeliverdLoding)}}function P(e,t){1&e&&f.Qb(0,"i",46)}var B,R=o("Iab2"),I=((B=function(){function t(n,r){e(this,t),this.common_service=n,this.apiServices=r,this.close=g.b,this.plus=A,this.minuss=D,this.faPlusCircle=s.y,this.faMinusCircle=s.u,this.isLoadingAccept=!1,this.isLoadingDecline=!1,this.isLoadingSavePdf=!1,this.isMarkDeliverdLoding=!1,this.table=[{refer_name:"string",product_name:"string",quantity:"number",unit:"string"}],this.order_info=new Object,this.products=[],this.totalQty=0}return n(t,[{key:"ngOnInit",value:function(){var e=this;this.common_service.closedSideNav.subscribe(function(t){e.order_info=null,e.products=[],e.totalQty=0}),this.common_service.inventoryOrder.subscribe(function(t){var n,r;e.totalQty=0,e.order_info=t,e.products=null===(n=e.order_info)||void 0===n?void 0:n.ordered_items,null===(r=e.products)||void 0===r||r.forEach(function(t){e.totalQty+=t.qty})}),this.common_service.updateInventoryOrderFrom.subscribe(function(t){var n;e.order_info.ordered_items=t,e.totalQty=0,e.products=t,null===(n=e.products)||void 0===n||n.forEach(function(t){e.totalQty+=t.qty})})}},{key:"add",value:function(e){"approved"!=this.order_info.status&&"delivered"!=this.order_info.status&&(this.products[e].qty+=1,this.totalQty+=1)}},{key:"minus",value:function(e){"approved"!=this.order_info.status&&"delivered"!=this.order_info.status&&this.products[e].qty>0&&(1==this.products[e].qty?this.products.length>1?(this.products.splice(e,1),this.totalQty-=1):this.common_service.showAlert("You should have atleaset one product!"):(this.products[e].qty-=1,this.totalQty-=1))}},{key:"declineAction",value:function(){var e=this;this.isLoadingDecline=!0;var t=new Object;t.id=this.order_info._id,t.status="declined",t.admin_msg=this.textarea.nativeElement.value,this.apiServices.updateInventoryOrder(t).subscribe(function(t){e.isLoadingDecline=!1,e.common_service.showAlert(t.message),t.success&&(e.common_service.commonEmitter.emit(),e.sidenav.close())})}},{key:"acceptAction",value:function(){var e=this;if(0==this.products.length)this.common_service.showAlert("Please choose products!");else{this.isLoadingAccept=!0;var t=new Object;t.id=this.order_info._id,t.status="approved",t.ordered_items=this.products,t.admin_msg=this.textarea.nativeElement.value,this.apiServices.updateInventoryOrder(t).subscribe(function(t){e.isLoadingAccept=!1,e.common_service.showAlert(t.message),t.success&&(e.common_service.commonEmitter.emit(),e.sidenav.close())})}}},{key:"savePdf",value:function(){var e=this;this.isLoadingSavePdf=!0,this.apiServices.downloadInventoryOrder({orderInfo:this.order_info,products:this.products}).subscribe(function(t){e.isLoadingSavePdf=!1;var n=t.data.url;console.log(n),R.saveAs(n,t.data.title+".pdf")})}},{key:"closeSidenav",value:function(){this.order_info=null,this.products=null,this.sidenav.close()}},{key:"open_new_nav",value:function(){this.sidenav.toggle()}},{key:"sidenavnew_open",value:function(){this.common_service.openInventoryForm.emit({data:this.order_info}),console.log("emitted")}},{key:"updateOrderAsDelivered",value:function(){var e,t=this;this.isMarkDeliverdLoding=!0;var n={id:this.order_info._id,received_by:null,reason:null,mode_of_payment:"cash",invoice_number:"",status:"delivered",ordered_items:null===(e=this.order_info)||void 0===e?void 0:e.ordered_items};this.apiServices.updateInventoryOrder(n).subscribe(function(e){t.common_service.showAlert(e.message),t.isMarkDeliverdLoding=!1,e.success&&(t.sidenav.toggle(),t.common_service.commonEmitter.emit())})}}]),t}()).\u0275fac=function(e){return new(e||B)(f.Pb(u.a),f.Pb(m.a))},B.\u0275cmp=f.Jb({type:B,selectors:[["app-inventory-order-form"]],viewQuery:function(e,t){var n;1&e&&(f.Rc(_,!0),f.Rc(C,!0)),2&e&&(f.wc(n=f.hc())&&(t.textarea=n.first),f.wc(n=f.hc())&&(t.tableView=n.first))},inputs:{sidenav:"sidenav",field:"field",status:"status",row:"row"},decls:56,vars:14,consts:[["rel","stylesheet","href",f.Qc("https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css")],["class","h-80","class","bg-white d-flex align-items-center justify-content-center alpha50 content position-absolute left-0 top-0 w-100 h100vh",4,"ngIf"],[3,"ngClass"],["tableView",""],[1,"h-80","w-100"],[1,"title","text-center","sticky-top"],[1,"bg-transparent","border-0","form-close-btn","position-absolute",3,"click"],[3,"icon"],[1,"col-12","mt-35px","px-0"],[1,"d-flex","mx-35px","justify-content-between"],[1,"heading-text"],[1,"content-text","mt-2"],[1,"d-flex","mx-35px","mt-20px"],[1,"content-text","mt-2","text-justify"],[1,"d-flex","mx-35px","mt-10px"],[1,"w-100"],[1,"d-flex"],[1,"heading-text","mb-10px"],["class","border_circle ml-auto bg-white w-25px h-25px rounded-corner d-flex align-items-center justify-content-center","style","font-size: 8px;",3,"click",4,"ngIf"],[1,"line"],[1,"mt-2"],["class","row mx-0 align-items-center mb-1",4,"ngFor","ngForOf"],[1,"line","mt-2","mb-3"],[1,"row","mx-0","justify-content-between"],["rows","4","placeholder","Add comments...",1,"comment-box","bg-transparent","w-100","mt-3","p-2","rounded-10px"],["textarea",""],[1,"h-20","button-list-bg-color"],[1,"row","mx-0","justify-content-center","align-items-center","button-list-bg-color","h-100"],["class","col-12 py-auto d-flex justify-content-center",4,"ngIf"],[1,"col-12","py-auto","d-flex","justify-content-center"],[1,"border-left-0","border-right-0","border-top-0","bg-transparent",3,"click"],["class","fa fa-spinner fa-spin mr-3",4,"ngIf"],[1,"bg-white","d-flex","align-items-center","justify-content-center","alpha50","content","position-absolute","left-0","top-0","w-100","h100vh"],[1,"border_circle","ml-auto","bg-white","w-25px","h-25px","rounded-corner","d-flex","align-items-center","justify-content-center",2,"font-size","8px",3,"click"],[1,"row","mx-0","align-items-center","mb-1"],[1,"col-8","px-0","inventory-text"],[1,"col-4","px-0"],[1,"row","mx-0","justify-content-around"],["id","subract",1,"d-flex","align-items-center"],[1,"rounded-corner","border-sm","shadow-sm"],[1,"border-0","bg-white","w-25px","h-25px","rounded-corner","d-flex","align-items-center","justify-content-center",2,"font-size","8px",3,"click"],["id","qty",1,"mx-2"],[1,"text-center","inventory-text"],[1,"text-center","unit-text"],["id","add",1,"d-flex","align-items-center"],["type","submit",1,"btn-success","text-white",3,"click"],[1,"fa","fa-spinner","fa-spin","mr-3"],[1,"btn-danger",3,"click"],[1,"border-left-0","border-right-0","border-top-0","bg-transparent",2,"border-bottom-color","#ABE7C4",3,"click"],[2,"color","#679187"]],template:function(e,t){1&e&&(f.Qb(0,"link",0),f.Kc(1,y,2,0,"div",1),f.Vb(2,"div",2,3),f.Vb(4,"div",4),f.Vb(5,"div",5),f.Vb(6,"button",6),f.gc("click",function(){return t.closeSidenav()}),f.Qb(7,"fa-icon",7),f.Ub(),f.Mc(8," ORDER "),f.Ub(),f.Vb(9,"div",8,3),f.Vb(11,"div",9),f.Vb(12,"div"),f.Vb(13,"div",10),f.Mc(14,"Order Source"),f.Ub(),f.Vb(15,"div",11),f.Mc(16),f.Ub(),f.Ub(),f.Vb(17,"div"),f.Vb(18,"div",10),f.Mc(19,"RequestDate "),f.Ub(),f.Vb(20,"div",11),f.Mc(21),f.Ub(),f.Ub(),f.Ub(),f.Vb(22,"div",12),f.Vb(23,"div"),f.Vb(24,"div",10),f.Mc(25,"Comment"),f.Ub(),f.Vb(26,"div",13),f.Mc(27),f.Ub(),f.Ub(),f.Ub(),f.Vb(28,"div",14),f.Vb(29,"div",15),f.Vb(30,"div",16),f.Vb(31,"div",17),f.Mc(32,"Items"),f.Ub(),f.Kc(33,x,2,1,"button",18),f.Ub(),f.Qb(34,"div",19),f.Vb(35,"div",20),f.Kc(36,w,18,6,"div",21),f.Ub(),f.Qb(37,"div",22),f.Vb(38,"div",23),f.Vb(39,"div",10),f.Mc(40," TOTAL "),f.Ub(),f.Vb(41,"div",10),f.Mc(42),f.Ub(),f.Ub(),f.Vb(43,"textarea",24,25),f.Mc(45),f.Ub(),f.Ub(),f.Ub(),f.Ub(),f.Ub(),f.Vb(46,"div",26),f.Vb(47,"div",27),f.Kc(48,k,5,1,"div",28),f.Kc(49,M,5,1,"div",28),f.Kc(50,V,5,1,"div",28),f.Vb(51,"div",29),f.Vb(52,"button",30),f.gc("click",function(){return t.savePdf()}),f.Kc(53,P,1,0,"i",31),f.Vb(54,"span"),f.Mc(55,"SAVE PDF"),f.Ub(),f.Ub(),f.Ub(),f.Ub(),f.Ub(),f.Ub()),2&e&&(f.Cb(1),f.pc("ngIf",0==(null==t.products?null:t.products.length)),f.Cb(1),f.pc("ngClass",(null==t.products?null:t.products.length)>0?"d-block":"d-done"),f.Cb(5),f.pc("icon",t.close),f.Cb(9),f.Nc(null==t.order_info||null==t.order_info.branch_info?null:t.order_info.branch_info.branch_name),f.Cb(5),f.Nc(null==t.order_info?null:t.order_info.created_date),f.Cb(6),f.Oc(" ",null!=t.order_info&&t.order_info.comment_by_barista&&""!=(null==t.order_info?null:t.order_info.comment_by_barista)?t.order_info.comment_by_barista:"No comments"," "),f.Cb(6),f.pc("ngIf","pending"==(null==t.order_info?null:t.order_info.status)||"approved"==(null==t.order_info?null:t.order_info.status)),f.Cb(3),f.pc("ngForOf",t.products),f.Cb(6),f.Oc(" ",t.totalQty," "),f.Cb(3),f.Nc(null==t.order_info?null:t.order_info.admin_msg),f.Cb(3),f.pc("ngIf","delivered"!=(null==t.order_info?null:t.order_info.status)),f.Cb(1),f.pc("ngIf","delivered"!=(null==t.order_info?null:t.order_info.status)&&"declined"!=(null==t.order_info?null:t.order_info.status)),f.Cb(1),f.pc("ngIf","approved"==(null==t.order_info?null:t.order_info.status)),f.Cb(3),f.pc("ngIf",1==t.isLoadingSavePdf))},directives:[i.l,i.j,v.a,i.k],styles:['@font-face{font-family:HelveticaNeue-Bold;font-style:normal;font-weight:400;src:local("HelveticaNeue-Bold"),url("Helvetica Neu Bold.61acdee6f288cddccf23.ttf") format("ttf")}@font-face{font-family:CerebriSans-Bold;font-style:normal;font-weight:400;src:local("CerebriSans-Bold"),url(CerebriSans-Bold.b28d46a00415bec63bba.ttf) format("ttf");src:local("CerebriSans-Bold"),url(CerebriSans-Bold.f48e05c76db5e6bd676c.eot) format("eot");src:local("CerebriSans-Bold"),url(CerebriSans-Bold.1b8ded389d0dc424b19b.svg) format("svg");src:local("CerebriSans-Bold"),url(CerebriSans-Bold.1b4400b13ebd711dd3e8.woff) format("woff");src:local("CerebriSans-Bold"),url(CerebriSans-Bold.1b89f96de9e78fd26a7f.woff2) format("woff2")}@font-face{font-family:\\ CerebriSans-semibold;font-style:normal;font-weight:400;src:local("CerebriSans-Bold"),url(CerebriSans-SemiBold.dcda3674ac76f4e31e87.ttf) format("ttf");src:local("CerebriSans-Bold"),url(CerebriSans-SemiBold.8c2b25fda64ba8de398a.eot) format("eot");src:local("CerebriSans-Bold"),url(CerebriSans-SemiBold.d4680810013431cbe6c7.svg) format("svg");src:local("CerebriSans-Bold"),url(CerebriSans-SemiBold.700f305197d6f163d348.woff) format("woff");src:local("CerebriSans-Bold"),url(CerebriSans-SemiBold.29097270d5f0e9003fd4.woff2) format("woff2")}@font-face{font-family:CerebriSans-Light;font-style:normal;font-weight:400;src:local("CerebriSans-Bold"),url(CerebriSans-Light.ddb81c4966caddeb5524.ttf) format("ttf");src:local("CerebriSans-Bold"),url(CerebriSans-Light.1e4f0f37d8ed20e51e27.eot) format("eot");src:local("CerebriSans-Bold"),url(CerebriSans-Light.efa3b6fb5acdd7fa23ab.svg) format("svg");src:local("CerebriSans-Bold"),url(CerebriSans-Light.650c547e86d77193b2d0.woff) format("woff");src:local("CerebriSans-Bold"),url(CerebriSans-Light.93b3eb2ec96f14eca31e.woff2) format("woff2")}@font-face{font-family:CerebriSans-Regular;font-style:normal;font-weight:400;src:local("CerebriSans-Regular"),url(CerebriSans-Regular.da1eaafe42c93475b338.ttf) format("ttf");src:local("CerebriSans-Regular"),url(CerebriSans-Regular.ccb7af1c430bd224cb88.eot) format("eot");src:local("CerebriSans-Regular"),url(CerebriSans-Regular.8a18b1b14a235efe141d.svg) format("svg");src:local("CerebriSans-Regular"),url(CerebriSans-Regular.81bf15fd01ef8a22e704.woff) format("woff");src:local("CerebriSans-Regular"),url(CerebriSans-Regular.a9f198f5da5b6fe108ed.woff2) format("woff2")}.mt-35px[_ngcontent-%COMP%]{margin-top:35px}.mx-35px[_ngcontent-%COMP%]{margin-left:35px;margin-right:35px}.mt-20px[_ngcontent-%COMP%]{margin-top:20px}.heading-text[_ngcontent-%COMP%]{color:#4a4a4a;font-family:CerebriSans-Bold;font-size:15px}.mt-10px[_ngcontent-%COMP%]{margin-top:10px}.mb-10px[_ngcontent-%COMP%]{margin-bottom:10px}.content-text[_ngcontent-%COMP%]{color:#4a4a4a;font-family:CerebriSans-Regular;font-size:15px!important}.line[_ngcontent-%COMP%]{height:2px;width:100%;background-color:#4a4a4a}.unit-text[_ngcontent-%COMP%]{color:#4a4a4a;font-size:10px;font-family:CerebriSans-Light}.w-25px[_ngcontent-%COMP%]{width:17px}.h-25px[_ngcontent-%COMP%]{height:17px}.rounded-corner[_ngcontent-%COMP%]{border-radius:50%}.inventory-text[_ngcontent-%COMP%]{color:#4a4a4a;font-size:13.5px}.border-sm[_ngcontent-%COMP%]{border:1.8px solid #4a4a4a}.rounded-10px[_ngcontent-%COMP%]{border-radius:10px}.comment-box[_ngcontent-%COMP%]{resize:none;font-family:CerebriSans-Regular;color:#4a4a4a;font-size:15px;border:1.5px solid #000}.comment-box[_ngcontent-%COMP%]:focus{outline:none;box-shadow:none}.btn-success[_ngcontent-%COMP%]{background-color:#679187;border-radius:0;border-style:none;box-shadow:0 3px 6px 0 rgba(0,0,0,.16);min-width:240px;min-height:40px}.btn-success[_ngcontent-%COMP%]:focus{outline:none;border:none;box-shadow:none}.btn-success[_ngcontent-%COMP%]:hover{opacity:.9}.btn-danger[_ngcontent-%COMP%]{min-width:240px;min-height:40px;border-style:none;border-radius:0;box-shadow:0 3px 6px 0 rgba(87,87,87,.51)}.btn-danger[_ngcontent-%COMP%]:focus{box-shadow:none;outline:none}.btn-danger[_ngcontent-%COMP%]:hover{opacity:.9}.h-80[_ngcontent-%COMP%]{height:80vh;overflow:auto}.h-20[_ngcontent-%COMP%]{height:20vh}.border_circle[_ngcontent-%COMP%]{border:none!important;background-color:#5d5d5d!important;color:#fff}']}),B),A={prefix:"fa",iconName:"line",icon:[512,512,[],"","M0 0h24v24H0z M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"]},D={prefix:"fa",iconName:"line",icon:[512,512,[],"","M0 0h24v24H0z M19 13H5v-2h14v2z"]},N=o("kmnG"),L=o("d3UM"),E=o("FKr1"),Q=["dropDown"],F=["textarea"];function j(e,t){if(1&e){var n=f.Wb();f.Vb(0,"mat-option",34),f.gc("click",function(){f.Ac(n);var e=t.index;return f.kc().select_branch(e)}),f.Mc(1),f.Ub()}if(2&e){var r=t.$implicit;f.pc("value",r._id),f.Cb(1),f.Oc(" ",r.branch_name," ")}}function K(e,t){if(1&e){var n=f.Wb();f.Vb(0,"div",37),f.Vb(1,"div",38),f.Mc(2),f.Ub(),f.Vb(3,"div",39),f.Vb(4,"div",40),f.Vb(5,"div",41),f.Vb(6,"div",42),f.Vb(7,"button",43),f.gc("click",function(){f.Ac(n);var e=t.index;return f.kc(2).minus(e)}),f.Qb(8,"fa-icon",4),f.Ub(),f.Ub(),f.Ub(),f.Vb(9,"div",44),f.Vb(10,"div",45),f.Mc(11),f.Ub(),f.Vb(12,"div",46),f.Mc(13),f.Ub(),f.Ub(),f.Vb(14,"div",47),f.Vb(15,"div",42),f.Vb(16,"button",43),f.gc("click",function(){f.Ac(n);var e=t.index;return f.kc(2).add(e)}),f.Qb(17,"fa-icon",4),f.Ub(),f.Ub(),f.Ub(),f.Ub(),f.Ub(),f.Ub()}if(2&e){var r=t.$implicit,o=f.kc(2);f.Cb(2),f.Pc(" ",r.refernce.toUpperCase()," - ",r.inventory_name," "),f.Cb(6),f.pc("icon",o.faMinus),f.Cb(3),f.Nc(r.qty),f.Cb(2),f.Nc(r.unit),f.Cb(4),f.pc("icon",o.faPlus)}}function z(e,t){if(1&e&&(f.Vb(0,"div",35),f.Kc(1,K,18,6,"div",36),f.Ub()),2&e){var n=f.kc();f.Cb(1),f.pc("ngForOf",n.products)}}function T(e,t){1&e&&f.Qb(0,"div",48)}function q(e,t){if(1&e&&(f.Vb(0,"div",49),f.Vb(1,"div",7),f.Mc(2," TOTAL "),f.Ub(),f.Vb(3,"div",7),f.Mc(4),f.Ub(),f.Ub()),2&e){var n=f.kc();f.Cb(4),f.Oc(" ",n.totalQty," ")}}function H(e,t){if(1&e){var n=f.Wb();f.Vb(0,"div",50),f.Vb(1,"div"),f.Vb(2,"span",51),f.Mc(3," No Products Added "),f.Ub(),f.Vb(4,"span",52),f.Vb(5,"button",53),f.gc("click",function(){return f.Ac(n),f.kc().sidenavnew_open()}),f.Mc(6," Add Products "),f.Ub(),f.Ub(),f.Ub(),f.Ub()}}function W(e,t){1&e&&f.Qb(0,"i",54)}var J,Y=((J=function(){function t(n,r){var o=this;e(this,t),this.common_service=n,this.apiService=r,this.faPlus=s.y,this.faMapMarkerAlt=s.t,this.faChevronDown=s.i,this.faMinus=s.u,this.selected_branch="",this.createOrderNessaryData=null,this.branch_list=[],this.selectedRow=-1,this.isLoading=!1,this.close=g.b,this.products=[],this.totalQty=0,this.today=b().format("DD-MM-YYYY - HH : mm"),this.branches=[],this.selectedValue=null,this.allSelected=!0,this.common_service.CreateInvOrderFromAdminDataFetcher.subscribe(function(e){o.products=e.products.filter(function(e){return 0!=Number(e.qty)}),console.log(o.products),o.totalQty=o.products.map(function(e){return Number(null==e?void 0:e.qty)}).reduce(function(e,t){return Number(e)+Number(t)},0),o.common_service.updateSyningCountEmitter.emit(o.products)})}return n(t,[{key:"ngOnInit",value:function(){var e=this;this.get_Branches(),this.common_service.closedSideNav.subscribe(function(t){e.branch_list=[],e.products=[],e.totalQty=0,e.dd.options.forEach(function(e){return e.deselect()})})}},{key:"get_Branches",value:function(){var e=this;this.apiService.get_branch({}).subscribe(function(t){e.branches=t.data.branch_list,e.branches.unshift({branch_name:"All branches",device_id:"",_id:"syra-all"}),e.selectedValue=[]})}},{key:"createOrder",value:function(){var e=this;console.log("success",this.branch_list);var t=this.branch_list.map(function(e){return e._id});if(0==t.length)this.common_service.showAlert("Please select the branch");else if(0==this.products.length)this.common_service.showAlert("Please choose the products");else{var n={branch_list:t,admin_msg:this.textarea.nativeElement.value,data:this.products,number_of_products:this.products.length};this.isLoading=!0,this.apiService.reOrderInventory(n).subscribe(function(t){e.isLoading=!1,t.success?(e.common_service.reOrderSuccess.emit(!0),e.sidenav.toggle()):e.common_service.showAlert(t.message)})}}},{key:"closeSidenav",value:function(){this.sidenav.toggle()}},{key:"select_branch",value:function(e){if(this.selectedRow=e,console.log(this.branches[e]._id,this.branch_list.length),"syra-all"==this.branches[e]._id)0==this.branch_list.length?(this.branch_list=this.branches.map(function(e){return e}),this.branch_list.splice(0,1)):this.branch_list.length==this.branches.length-1?this.branch_list=[]:(this.branch_list=this.branches.map(function(e){return e}),this.branch_list.splice(0,1)),this.toggleAllSelection();else{var t=this.branch_list.map(function(e){return e._id}).indexOf(this.branches[e]._id);t>=0?this.branch_list.splice(t,1):this.branch_list.push(this.branches[e]),this.branch_list.length<this.branches.length-1&&this.dd.options.forEach(function(e,t){0==t&&e.deselect()}),this.branch_list.length==this.branches.length-1&&this.dd.options.forEach(function(e,t){0==t&&e.select()})}console.log(this.branch_list)}},{key:"toggleAllSelection",value:function(){this.allSelected=this.branch_list.length==this.branches.length-1,console.log(this.dd,123),this.dd.options.forEach(this.allSelected?function(e){return e.select()}:function(e){e.deselect()})}},{key:"add",value:function(e){this.products[e].qty+=1,this.totalQty+=1,this.common_service.syncProductQuantity.emit(this.products[e])}},{key:"minus",value:function(e){this.products[e].qty>0&&(this.products[e].qty-=1,this.totalQty-=1,this.common_service.syncProductQuantity.emit(this.products[e])),0==this.products[e].qty&&this.products.splice(e,1)}},{key:"sidenavnew_open",value:function(){this.createOrderNessaryData={branch_id:this.selected_branch,admin_msg:this.textarea.nativeElement.value},this.common_service.openInventoryForm.emit(null),console.log("emitted")}}]),t}()).\u0275fac=function(e){return new(e||J)(f.Pb(u.a),f.Pb(m.a))},J.\u0275cmp=f.Jb({type:J,selectors:[["app-add-inventory-order"]],viewQuery:function(e,t){var n;1&e&&(f.Rc(Q,!0),f.Rc(F,!0)),2&e&&(f.wc(n=f.hc())&&(t.dd=n.first),f.wc(n=f.hc())&&(t.textarea=n.first))},inputs:{sidenav:"sidenav"},decls:47,vars:12,consts:[["rel","stylesheet","href",f.Qc("https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css")],[1,"h-80","w-100"],[1,"title","text-center","sticky-top"],[1,"bg-transparent","border-0","form-close-btn","position-absolute",3,"click"],[3,"icon"],[1,"col-12","mt-35px","px-0"],[1,"d-flex","mx-35px","justify-content-between"],[1,"heading-text"],[1,"content-text","mt-2"],["appearance","outline",1,"picker","bg-white","rounded","shadow-sm","branch_dropdown"],[1,"pl-2","pr-3","position-relative",3,"icon"],["name","branch","disableOptionCentering","","placeholder","Select Branch","multiple","",3,"value","valueChange"],["dropDown",""],[3,"value","click",4,"ngFor","ngForOf"],[1,"position-absolute","r-0",3,"icon"],[1,"content-text","mt-2","d-flex","align-items-center",2,"height","calc(100% - 0.5rem - 20px)"],[1,"d-flex","mx-35px","mt-10px"],[1,"w-100"],[1,"d-flex"],[1,"heading-text","mb-10px"],[1,"border_circle","ml-auto","bg-white","w-25px","h-25px","rounded-corner","d-flex","align-items-center","justify-content-center",2,"font-size","8px",3,"click"],[1,"line"],["class","mt-2",4,"ngIf"],["class","line mt-2 mb-3",4,"ngIf"],["class","row mx-0 justify-content-between",4,"ngIf"],["class","row mx-0 align-items-center justify-content-center w-100 bg-white mt-1","style","height:  150px;",4,"ngIf"],[1,"pt-3","header-text"],["rows","4","placeholder","Add comments...",1,"comment-box","bg-transparent","w-100","mt-3","p-2","rounded-10px"],["textarea",""],[1,"h-20","button-list-bg-color"],[1,"row","mx-0","justify-content-center","align-items-center","button-list-bg-color","h-100"],[1,"col-12","py-auto","d-flex","justify-content-center"],["type","submit",1,"btn-success","text-white",3,"click"],["class","fa fa-spinner fa-spin mr-3",4,"ngIf"],[3,"value","click"],[1,"mt-2"],["class","row mx-0 align-items-center mb-1",4,"ngFor","ngForOf"],[1,"row","mx-0","align-items-center","mb-1"],[1,"col-8","px-0","inventory-text"],[1,"col-4","px-0"],[1,"row","mx-0","justify-content-around"],["id","subract",1,"d-flex","align-items-center"],[1,"rounded-corner","border-sm","shadow-sm"],[1,"border-0","bg-white","w-25px","h-25px","rounded-corner","d-flex","align-items-center","justify-content-center",2,"font-size","8px",3,"click"],["id","qty",1,"mx-2"],[1,"text-center","inventory-text"],[1,"text-center","unit-text"],["id","add",1,"d-flex","align-items-center"],[1,"line","mt-2","mb-3"],[1,"row","mx-0","justify-content-between"],[1,"row","mx-0","align-items-center","justify-content-center","w-100","bg-white","mt-1",2,"height","150px"],[1,"col-12","text-center","pb-3",2,"font-size","12px"],[1,"col-12","d-flex","justify-content-center","pt-3"],[1,"text-center","btn-success","text-white","px-3",2,"min-height","28px","min-width","100px","font-size","12px","border-radius","14px",3,"click"],[1,"fa","fa-spinner","fa-spin","mr-3"]],template:function(e,t){1&e&&(f.Qb(0,"link",0),f.Vb(1,"div"),f.Vb(2,"div",1),f.Vb(3,"div",2),f.Vb(4,"button",3),f.gc("click",function(){return t.closeSidenav()}),f.Qb(5,"fa-icon",4),f.Ub(),f.Mc(6," Create Inventory Order "),f.Ub(),f.Vb(7,"div",5),f.Vb(8,"div",6),f.Vb(9,"div"),f.Vb(10,"div",7),f.Mc(11,"Order Source"),f.Ub(),f.Vb(12,"div",8),f.Vb(13,"mat-form-field",9),f.Qb(14,"fa-icon",10),f.Vb(15,"mat-select",11,12),f.gc("valueChange",function(e){return t.selectedValue=e}),f.Kc(17,j,2,2,"mat-option",13),f.Ub(),f.Qb(18,"fa-icon",14),f.Ub(),f.Ub(),f.Ub(),f.Vb(19,"div"),f.Vb(20,"div",7),f.Mc(21,"Request Date "),f.Ub(),f.Vb(22,"div",15),f.Mc(23),f.Ub(),f.Ub(),f.Ub(),f.Vb(24,"div",16),f.Vb(25,"div",17),f.Vb(26,"div",18),f.Vb(27,"div",19),f.Mc(28,"Items"),f.Ub(),f.Vb(29,"button",20),f.gc("click",function(){return t.sidenavnew_open()}),f.Qb(30,"fa-icon",4),f.Ub(),f.Ub(),f.Qb(31,"div",21),f.Kc(32,z,2,1,"div",22),f.Kc(33,T,1,0,"div",23),f.Kc(34,q,5,1,"div",24),f.Kc(35,H,7,0,"div",25),f.Vb(36,"div",26),f.Mc(37,"Admin Comments"),f.Ub(),f.Qb(38,"textarea",27,28),f.Ub(),f.Ub(),f.Ub(),f.Ub(),f.Vb(40,"div",29),f.Vb(41,"div",30),f.Vb(42,"div",31),f.Vb(43,"button",32),f.gc("click",function(){return t.createOrder()}),f.Kc(44,W,1,0,"i",33),f.Vb(45,"span"),f.Mc(46,"ADD TO ORDERS"),f.Ub(),f.Ub(),f.Ub(),f.Ub(),f.Ub(),f.Ub()),2&e&&(f.Cb(5),f.pc("icon",t.close),f.Cb(9),f.pc("icon",t.faMapMarkerAlt),f.Cb(1),f.pc("value",t.selectedValue),f.Cb(2),f.pc("ngForOf",t.branches),f.Cb(1),f.pc("icon",t.faChevronDown),f.Cb(5),f.Nc(t.today),f.Cb(7),f.pc("icon",t.faPlus),f.Cb(2),f.pc("ngIf",t.products.length>0),f.Cb(1),f.pc("ngIf",t.products.length>0),f.Cb(1),f.pc("ngIf",t.products.length>0),f.Cb(1),f.pc("ngIf",0==t.products.length),f.Cb(9),f.pc("ngIf",1==t.isLoading))},directives:[v.a,N.b,L.a,i.k,i.l,E.l],styles:['@font-face{font-family:HelveticaNeue-Bold;font-style:normal;font-weight:400;src:local("HelveticaNeue-Bold"),url("Helvetica Neu Bold.61acdee6f288cddccf23.ttf") format("ttf")}@font-face{font-family:CerebriSans-Bold;font-style:normal;font-weight:400;src:local("CerebriSans-Bold"),url(CerebriSans-Bold.b28d46a00415bec63bba.ttf) format("ttf");src:local("CerebriSans-Bold"),url(CerebriSans-Bold.f48e05c76db5e6bd676c.eot) format("eot");src:local("CerebriSans-Bold"),url(CerebriSans-Bold.1b8ded389d0dc424b19b.svg) format("svg");src:local("CerebriSans-Bold"),url(CerebriSans-Bold.1b4400b13ebd711dd3e8.woff) format("woff");src:local("CerebriSans-Bold"),url(CerebriSans-Bold.1b89f96de9e78fd26a7f.woff2) format("woff2")}@font-face{font-family:\\ CerebriSans-semibold;font-style:normal;font-weight:400;src:local("CerebriSans-Bold"),url(CerebriSans-SemiBold.dcda3674ac76f4e31e87.ttf) format("ttf");src:local("CerebriSans-Bold"),url(CerebriSans-SemiBold.8c2b25fda64ba8de398a.eot) format("eot");src:local("CerebriSans-Bold"),url(CerebriSans-SemiBold.d4680810013431cbe6c7.svg) format("svg");src:local("CerebriSans-Bold"),url(CerebriSans-SemiBold.700f305197d6f163d348.woff) format("woff");src:local("CerebriSans-Bold"),url(CerebriSans-SemiBold.29097270d5f0e9003fd4.woff2) format("woff2")}@font-face{font-family:CerebriSans-Light;font-style:normal;font-weight:400;src:local("CerebriSans-Bold"),url(CerebriSans-Light.ddb81c4966caddeb5524.ttf) format("ttf");src:local("CerebriSans-Bold"),url(CerebriSans-Light.1e4f0f37d8ed20e51e27.eot) format("eot");src:local("CerebriSans-Bold"),url(CerebriSans-Light.efa3b6fb5acdd7fa23ab.svg) format("svg");src:local("CerebriSans-Bold"),url(CerebriSans-Light.650c547e86d77193b2d0.woff) format("woff");src:local("CerebriSans-Bold"),url(CerebriSans-Light.93b3eb2ec96f14eca31e.woff2) format("woff2")}@font-face{font-family:CerebriSans-Regular;font-style:normal;font-weight:400;src:local("CerebriSans-Regular"),url(CerebriSans-Regular.da1eaafe42c93475b338.ttf) format("ttf");src:local("CerebriSans-Regular"),url(CerebriSans-Regular.ccb7af1c430bd224cb88.eot) format("eot");src:local("CerebriSans-Regular"),url(CerebriSans-Regular.8a18b1b14a235efe141d.svg) format("svg");src:local("CerebriSans-Regular"),url(CerebriSans-Regular.81bf15fd01ef8a22e704.woff) format("woff");src:local("CerebriSans-Regular"),url(CerebriSans-Regular.a9f198f5da5b6fe108ed.woff2) format("woff2")}.mt-35px[_ngcontent-%COMP%]{margin-top:35px}.mx-35px[_ngcontent-%COMP%]{margin-left:35px;margin-right:35px}.mt-20px[_ngcontent-%COMP%]{margin-top:20px}.heading-text[_ngcontent-%COMP%]{color:#4a4a4a;font-family:CerebriSans-Bold;font-size:15px}.mt-10px[_ngcontent-%COMP%]{margin-top:10px}.mb-10px[_ngcontent-%COMP%]{margin-bottom:10px}.content-text[_ngcontent-%COMP%]{color:#4a4a4a;font-family:CerebriSans-Regular;font-size:15px!important}.line[_ngcontent-%COMP%]{height:2px;width:100%;background-color:#4a4a4a}.unit-text[_ngcontent-%COMP%]{color:#4a4a4a;font-size:10px;font-family:CerebriSans-Light}.w-25px[_ngcontent-%COMP%]{width:17px}.h-25px[_ngcontent-%COMP%]{height:17px}.rounded-corner[_ngcontent-%COMP%]{border-radius:50%}.inventory-text[_ngcontent-%COMP%]{color:#4a4a4a;font-size:13.5px}.border-sm[_ngcontent-%COMP%]{border:1.8px solid #4a4a4a}.rounded-10px[_ngcontent-%COMP%]{border-radius:10px}.comment-box[_ngcontent-%COMP%]{resize:none;font-family:CerebriSans-Regular;color:#4a4a4a;font-size:15px;border:1.5px solid #000}.comment-box[_ngcontent-%COMP%]:focus{outline:none;box-shadow:none}.btn-success[_ngcontent-%COMP%]{background-color:#679187;border-radius:0;border-style:none;box-shadow:0 3px 6px 0 rgba(0,0,0,.16);min-width:240px;min-height:40px}.btn-success[_ngcontent-%COMP%]:focus{outline:none;border:none;box-shadow:none}.btn-success[_ngcontent-%COMP%]:hover{opacity:.9}.btn-danger[_ngcontent-%COMP%]{min-width:240px;min-height:40px;border-style:none;border-radius:0;box-shadow:0 3px 6px 0 rgba(87,87,87,.51)}.btn-danger[_ngcontent-%COMP%]:focus{box-shadow:none;outline:none}.btn-danger[_ngcontent-%COMP%]:hover{opacity:.9}.h-80[_ngcontent-%COMP%]{height:80vh;overflow:auto}.h-20[_ngcontent-%COMP%]{height:20vh}.border_circle[_ngcontent-%COMP%]{border:none!important;background-color:#5d5d5d!important;color:#fff}.header[_ngcontent-%COMP%]{background-color:#f7f7f7;box-shadow:0 3px 6px 0 rgba(0,0,0,.16);z-index:3}.header-title[_ngcontent-%COMP%]{font-family:CerebriSans-Light;display:flex;align-items:center;color:#666;font-size:30px;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;margin:1.1em 1.1em 1.1em .3em}.ml-133[_ngcontent-%COMP%]{margin-left:133px}.mat-form-field[_ngcontent-%COMP%]{font-family:CerebriSans-Regular;height:40px}.mat-date-range-input-inner[disabled][_ngcontent-%COMP%]{color:#4a4a4a;font-family:CerebriSans-Regular}.exportMenu[_ngcontent-%COMP%]{width:35px;height:35px;background:#679187;padding-right:0;border-radius:3px}.exportMenu[_ngcontent-%COMP%]:focus{outline:none;box-shadow:none}.exportMenu[_ngcontent-%COMP%]:hover{opacity:.95}.mat-select[_ngcontent-%COMP%]{width:77.5%}.mat-option[_ngcontent-%COMP%]:hover:not(.mat-option-disabled){background:rgba(0,0,0,.04);color:#679187}  .mat-form-field-outline-end,   .mat-form-field-outline-gap,   div.mat-form-field-outline-start{border-color:0!important;border-width:0!important}  .mat-button-focus-overlay{display:none!important}  .mat-option .mat-pseudo-checkbox-checked{background-color:green!important}  .mat-select-placeholder{color:#4a4a4a!important;font-family:CerebriSans-Regular!important;font-size:15px!important}  .mat-form-field-label{margin:0}']}),J);function $(e,t){if(1&e){var n=f.Wb();f.Vb(0,"div",16),f.Vb(1,"div",17),f.Qb(2,"fa-icon",18),f.Vb(3,"input",19),f.gc("input",function(e){return f.Ac(n),f.kc().search(e.target.value)}),f.Ub(),f.Vb(4,"button",20),f.gc("click",function(){return f.Ac(n),f.kc().searchViewUpdate()}),f.Qb(5,"fa-icon",4),f.Ub(),f.Ub(),f.Ub()}if(2&e){var r=f.kc();f.Cb(2),f.pc("icon",r.faSearch),f.Cb(3),f.pc("icon",r.close)}}function X(e,t){if(1&e){var n=f.Wb();f.Vb(0,"div",21),f.Vb(1,"div",22),f.Mc(2),f.Ub(),f.Vb(3,"div",23),f.Mc(4),f.Ub(),f.Vb(5,"div",24),f.Vb(6,"div",25),f.Vb(7,"div",26),f.Vb(8,"div",27),f.Vb(9,"button",28),f.gc("click",function(){f.Ac(n);var e=t.index;return f.kc().minus(e)}),f.Qb(10,"fa-icon",4),f.Ub(),f.Ub(),f.Ub(),f.Vb(11,"div",29),f.Vb(12,"div",30),f.Mc(13),f.Ub(),f.Vb(14,"div",31),f.Mc(15),f.Ub(),f.Ub(),f.Vb(16,"div",32),f.Vb(17,"div",27),f.Vb(18,"button",28),f.gc("click",function(){f.Ac(n);var e=t.index;return f.kc().add(e)}),f.Qb(19,"fa-icon",4),f.Ub(),f.Ub(),f.Ub(),f.Ub(),f.Ub(),f.Ub()}if(2&e){var r=t.$implicit,o=t.index,i=f.kc();f.pc("ngClass",o%2==0?"bg-white":"bg-background"),f.Cb(2),f.Oc(" ",r.category_id," "),f.Cb(2),f.Pc(" ",r.reference," - ",r.inventory_name," "),f.Cb(6),f.pc("icon",i.faMinusCircle),f.Cb(3),f.Nc(r.quantity),f.Cb(2),f.Nc(r.unit),f.Cb(4),f.pc("icon",i.faPlusCircle)}}function G(e,t){1&e&&f.Qb(0,"i",37)}function Z(e,t){if(1&e){var n=f.Wb();f.Vb(0,"div",33),f.Vb(1,"div",34),f.Vb(2,"button",35),f.gc("click",function(){return f.Ac(n),f.kc().addOrder()}),f.Kc(3,G,1,0,"i",36),f.Vb(4,"span"),f.Mc(5,"APPROVE"),f.Ub(),f.Ub(),f.Ub(),f.Ub()}if(2&e){var r=f.kc();f.Cb(3),f.pc("ngIf",1==r.isLoading)}}var ee,te=function(e){return{height:e}},ne=((ee=function(){function t(n,r){var o=this;e(this,t),this.common_service=n,this.apiServices=r,this.faCaretDown=s.g,this.faTimes=s.H,this.isLoading=!1,this.close=re,this.faPlusCircle=s.y,this.faMinusCircle=s.u,this.faSearch=s.A,this.plus=oe,this.minuss=ie,this.products=[],this.products_backup=[],this.products_to_order=[],this.searchOptionEnabled=!1,this.orderDetails=null,this.orderedProductsFromAddInventory=[],this.loadTeams=function(){},this.common_service.syncProductQuantity.subscribe(function(e){var t=o.products.findIndex(function(t){return t._id==e.inventory_id});o.products[t].quantity=e.qty,console.log(e,o.products[t])})}return n(t,[{key:"ngOnInit",value:function(){this.get_catelouges()}},{key:"ngOnDestroy",value:function(){}},{key:"ngAfterViewInit",value:function(){}},{key:"searchViewUpdate",value:function(){this.searchOptionEnabled=!this.searchOptionEnabled,this.searchOptionEnabled||(this.products=this.products_backup)}},{key:"sidenav_close",value:function(){this.common_service.closeInventoryForm.emit(),console.log("emitted for close")}},{key:"add",value:function(e){this.products[e].quantity++;var t=this.products_to_order.map(function(e){return e.refernce}).indexOf(this.products[e].reference);-1==t?this.products_to_order.push({inventory_id:this.products[e]._id,refernce:this.products[e].reference,unit:this.products[e].unit,inventory_name:this.products[e].inventory_name,qty:this.products[e].quantity,price:this.products[e].quantity*Number(this.products[e].price),unit_price:this.products[e].price}):(this.products_to_order[t].qty+=1,this.products_to_order[t].price=this.products[e].price*this.products_to_order[t].qty),this.common_service.CreateInvOrderFromAdminDataFetcher.emit({products:this.products_to_order})}},{key:"minus",value:function(e){var t=this.products_to_order.map(function(e){return e.refernce}).indexOf(this.products[e].reference);this.products[e].quantity>0?(this.products[e].quantity-=1,this.products_to_order[t].qty-=1,this.products_to_order[t].price=this.products[e].price*this.products_to_order[t].qty):t>=0&&this.products_to_order.splice(t,1),this.common_service.CreateInvOrderFromAdminDataFetcher.emit({products:this.products_to_order})}},{key:"get_catelouges",value:function(){var e=this,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.apiServices.getCatelouge({branch_list:t}).subscribe(function(t){if(t.success){if(null!=e.orderDetails){var n=e.orderDetails.data.ordered_items.map(function(e){return e.refernce});console.log(n,"test"),e.products=t.data.inventories.filter(function(e){return!n.includes(e.reference)})}else{e.products=t.data.inventories;for(var r=e.products.map(function(e){return e._id}),o=0;o<e.orderedProductsFromAddInventory.length;o++){var i=e.orderedProductsFromAddInventory[o],c=r.indexOf(i.inventory_id);e.products[c].quantity=i.qty}}e.products_backup=e.products,e.products_to_order=e.products.filter(function(e){return e.quantity>0}),e.generateSelectedProducts()}else e.common_service.showAlert(t.message)})}},{key:"generateSelectedProducts",value:function(){for(var e=0;e<this.products_to_order.length;e++)this.products_to_order[e].qty=this.products_to_order[e].quantity,this.products_to_order[e].inventory_id=this.products_to_order[e]._id,this.products_to_order[e].refernce=this.products_to_order[e].reference}},{key:"search",value:function(e){console.log(e),this.products=""==e?this.products_backup:this.products_backup.filter(function(t){return t.inventory_name.toLowerCase().includes(e.toLowerCase())})}},{key:"addOrder",value:function(){var e=this;this.isLoading=!0,this.products_to_order=this.products_to_order.concat(this.orderDetails.data.ordered_items),this.apiServices.reOrderInventory({data:this.products_to_order,id:this.orderDetails.data._id}).subscribe(function(t){t.success?(e.isLoading=!1,e.sidenav_close(),e.common_service.updateInventoryOrderFrom.emit(e.products_to_order),e.common_service.commonEmitter.emit(!0)):e.common_service.showAlert(t.message)}),console.log(JSON.parse(JSON.stringify(this.products_to_order)))}}]),t}()).\u0275fac=function(e){return new(e||ee)(f.Pb(u.a),f.Pb(m.a))},ee.\u0275cmp=f.Jb({type:ee,selectors:[["app-addproduct-component"]],inputs:{orderDetails:"orderDetails",orderedProductsFromAddInventory:"orderedProductsFromAddInventory",sidenav:"sidenav"},decls:21,vars:8,consts:[["rel","stylesheet","href",f.Qc("https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css")],[1,"w-100","p-a",3,"ngStyle"],[1,"title","text-center","sticky-top"],[1,"bg-transparent","border-0","form-close-btn","position-absolute",3,"click"],[3,"icon"],[1,"bg-transparent","border-0","position-absolute",2,"right","10px",3,"click"],[1,"row","m-0","p-0"],["class","row m-0 py-3 w-100 sticky-top bg-white",4,"ngIf"],[1,"row","m-0","py-3","w-100"],[1,"col-3","tab-title","text-left"],[1,"col-5","tab-title","p-0","text-left"],[1,"col-4","tab-title","text-center"],[1,"line_add_product"],[1,"mt-2","w-100"],["class","row mx-0 align-items-center mb-1",3,"ngClass",4,"ngFor","ngForOf"],["class","w-100 w85h-15 mt-1 b-shadow bg-transparent",4,"ngIf"],[1,"row","m-0","py-3","w-100","sticky-top","bg-white"],[1,"col-12","d-flex","align-items-center","justify-content-center"],[1,"curve-left","h-35","pt-2","pl-3",2,"background-color","#f7f7f7",3,"icon"],["type","text","placeholder","search",1,"border-0","w-100","h-35","search-bar",2,"background-color","#f7f7f7",3,"input"],[1,"border-0","form-close-btn","h-100","curve-right",2,"background-color","#f7f7f7",3,"click"],[1,"row","mx-0","align-items-center","mb-1",3,"ngClass"],[1,"col-3","pl-3","inventory-text"],[1,"col-5","px-0","inventory-text"],[1,"col-4","pr-3"],[1,"row","mx-0","justify-content-around"],["id","subract",1,"d-flex","align-items-center"],[1,"rounded-corner","border-sm","shadow-sm"],[1,"border-0","bg-white","w-25px","h-25px","rounded-corner","d-flex","align-items-center","justify-content-center",2,"font-size","8px",3,"click"],["id","qty",1,"mx-2"],[1,"text-center","inventory-text"],[1,"text-center","unit-text"],["id","add",1,"d-flex","align-items-center"],[1,"w-100","w85h-15","mt-1","b-shadow","bg-transparent"],[1,"col-12","d-flex","justify-content-center","align-items-center","h-100"],["type","submit",1,"btn-success","text-white",3,"click"],["class","fa fa-spinner fa-spin mr-3",4,"ngIf"],[1,"fa","fa-spinner","fa-spin","mr-3"]],template:function(e,t){1&e&&(f.Qb(0,"link",0),f.Vb(1,"div",1),f.Vb(2,"div",2),f.Vb(3,"button",3),f.gc("click",function(){return t.sidenav_close()}),f.Qb(4,"fa-icon",4),f.Ub(),f.Mc(5," Add To Order "),f.Vb(6,"button",5),f.gc("click",function(){return t.searchViewUpdate()}),f.Qb(7,"fa-icon",4),f.Ub(),f.Ub(),f.Vb(8,"div",6),f.Kc(9,$,6,2,"div",7),f.Vb(10,"div",8),f.Vb(11,"div",9),f.Mc(12,"CATEGORY"),f.Ub(),f.Vb(13,"div",10),f.Mc(14,"PRODUCT NAME"),f.Ub(),f.Vb(15,"div",11),f.Mc(16,"QUANTITY"),f.Ub(),f.Ub(),f.Qb(17,"div",12),f.Vb(18,"div",13),f.Kc(19,X,20,8,"div",14),f.Ub(),f.Ub(),f.Ub(),f.Kc(20,Z,6,1,"div",15)),2&e&&(f.Cb(1),f.pc("ngStyle",f.tc(6,te,null!=t.orderDetails?"85vh":"100vh")),f.Cb(3),f.pc("icon",t.close),f.Cb(3),f.pc("icon",t.faSearch),f.Cb(2),f.pc("ngIf",t.searchOptionEnabled),f.Cb(10),f.pc("ngForOf",t.products),f.Cb(1),f.pc("ngIf",null!=t.orderDetails))},directives:[i.m,v.a,i.l,i.k,i.j],styles:['@import url("https://fonts.googleapis.com/css2?family=Open+Sans:ital,wght@0,300;0,400;0,600;0,700;0,800;1,300;1,400;1,600;1,700;1,800&display=swap");@font-face{font-family:HelveticaNeue-Bold;font-style:normal;font-weight:400;src:local("HelveticaNeue-Bold"),url("Helvetica Neu Bold.61acdee6f288cddccf23.ttf") format("ttf")}@font-face{font-family:CerebriSans-Bold;font-style:normal;font-weight:400;src:local("CerebriSans-Bold"),url(CerebriSans-Bold.b28d46a00415bec63bba.ttf) format("ttf");src:local("CerebriSans-Bold"),url(CerebriSans-Bold.f48e05c76db5e6bd676c.eot) format("eot");src:local("CerebriSans-Bold"),url(CerebriSans-Bold.1b8ded389d0dc424b19b.svg) format("svg");src:local("CerebriSans-Bold"),url(CerebriSans-Bold.1b4400b13ebd711dd3e8.woff) format("woff");src:local("CerebriSans-Bold"),url(CerebriSans-Bold.1b89f96de9e78fd26a7f.woff2) format("woff2")}@font-face{font-family:\\ CerebriSans-semibold;font-style:normal;font-weight:400;src:local("CerebriSans-Bold"),url(CerebriSans-SemiBold.dcda3674ac76f4e31e87.ttf) format("ttf");src:local("CerebriSans-Bold"),url(CerebriSans-SemiBold.8c2b25fda64ba8de398a.eot) format("eot");src:local("CerebriSans-Bold"),url(CerebriSans-SemiBold.d4680810013431cbe6c7.svg) format("svg");src:local("CerebriSans-Bold"),url(CerebriSans-SemiBold.700f305197d6f163d348.woff) format("woff");src:local("CerebriSans-Bold"),url(CerebriSans-SemiBold.29097270d5f0e9003fd4.woff2) format("woff2")}@font-face{font-family:CerebriSans-Light;font-style:normal;font-weight:400;src:local("CerebriSans-Bold"),url(CerebriSans-Light.ddb81c4966caddeb5524.ttf) format("ttf");src:local("CerebriSans-Bold"),url(CerebriSans-Light.1e4f0f37d8ed20e51e27.eot) format("eot");src:local("CerebriSans-Bold"),url(CerebriSans-Light.efa3b6fb5acdd7fa23ab.svg) format("svg");src:local("CerebriSans-Bold"),url(CerebriSans-Light.650c547e86d77193b2d0.woff) format("woff");src:local("CerebriSans-Bold"),url(CerebriSans-Light.93b3eb2ec96f14eca31e.woff2) format("woff2")}@font-face{font-family:CerebriSans-Regular;font-style:normal;font-weight:400;src:local("CerebriSans-Regular"),url(CerebriSans-Regular.da1eaafe42c93475b338.ttf) format("ttf");src:local("CerebriSans-Regular"),url(CerebriSans-Regular.ccb7af1c430bd224cb88.eot) format("eot");src:local("CerebriSans-Regular"),url(CerebriSans-Regular.8a18b1b14a235efe141d.svg) format("svg");src:local("CerebriSans-Regular"),url(CerebriSans-Regular.81bf15fd01ef8a22e704.woff) format("woff");src:local("CerebriSans-Regular"),url(CerebriSans-Regular.a9f198f5da5b6fe108ed.woff2) format("woff2")}.p-a[_ngcontent-%COMP%]{height:85vh;overflow:auto}.p-a[_ngcontent-%COMP%], .w85h-15[_ngcontent-%COMP%]{z-index:1!important;background-color:#fff}.w85h-15[_ngcontent-%COMP%]{height:calc(100% - 85vh - .25rem)}.bg-background[_ngcontent-%COMP%]{background-color:#f0f0f0}.tab-title[_ngcontent-%COMP%]{font-size:14px;color:#4a4a4a;font-family:CerebriSans-Bold}.line_add_product[_ngcontent-%COMP%]{height:2px;width:100%;background-color:#707070}.unit-text[_ngcontent-%COMP%]{color:#4a4a4a;font-size:10px;font-family:CerebriSans-Light}.w-25px[_ngcontent-%COMP%]{width:17px}.h-25px[_ngcontent-%COMP%]{height:17px}.inventory-text[_ngcontent-%COMP%]{color:#4a4a4a;font-size:13.5px;line-break:anywhere;font-family:\\ CerebriSans-semibold}.heading-text[_ngcontent-%COMP%]{color:#4a4a4a;font-family:CerebriSans-Bold;font-size:15px}.mt-10px[_ngcontent-%COMP%]{margin-top:10px}.mb-10px[_ngcontent-%COMP%]{margin-bottom:10px}.rounded-corner[_ngcontent-%COMP%]{border-radius:50%}.border-sm[_ngcontent-%COMP%]{border:1.8px solid #4a4a4a}.b-shadow[_ngcontent-%COMP%]{box-shadow:0 3px 6px 0 rgba(20,20,20,.16)}@media (max-width:992px){.tab-title[_ngcontent-%COMP%]{font-size:13px!important}}.btn-success[_ngcontent-%COMP%]{background-color:#679187;border-radius:0;border-style:none;box-shadow:0 3px 6px 0 rgba(0,0,0,.16);min-width:240px;min-height:40px}.btn-success[_ngcontent-%COMP%]:focus{outline:none;border:none;box-shadow:none}.btn-success[_ngcontent-%COMP%]:hover{opacity:.9}']}),ee),re={prefix:"fa",iconName:"line",icon:[512,512,[],"","M437.126,74.939c-99.826-99.826-262.307-99.826-362.133,0C26.637,123.314,0,187.617,0,256.005\n\t\t\ts26.637,132.691,74.993,181.047c49.923,49.923,115.495,74.874,181.066,74.874s131.144-24.951,181.066-74.874\n\t\t\tC536.951,337.226,536.951,174.784,437.126,74.939z M409.08,409.006c-84.375,84.375-221.667,84.375-306.042,0\n\t\t\tc-40.858-40.858-63.37-95.204-63.37-153.001s22.512-112.143,63.37-153.021c84.375-84.375,221.667-84.355,306.042,0\n\t\t\tC493.435,187.359,493.435,324.651,409.08,409.006z M341.525,310.827l-56.151-56.071l56.151-56.071c7.735-7.735,7.735-20.29,0.02-28.046\n\t\t\tc-7.755-7.775-20.31-7.755-28.065-0.02l-56.19,56.111l-56.19-56.111c-7.755-7.735-20.31-7.755-28.065,0.02\n\t\t\tc-7.735,7.755-7.735,20.31,0.02,28.046l56.151,56.071l-56.151,56.071c-7.755,7.735-7.755,20.29-0.02,28.046\n\t\t\tc3.868,3.887,8.965,5.811,14.043,5.811s10.155-1.944,14.023-5.792l56.19-56.111l56.19,56.111\n\t\t\tc3.868,3.868,8.945,5.792,14.023,5.792c5.078,0,10.175-1.944,14.043-5.811C349.28,331.117,349.28,318.562,341.525,310.827z"]},oe={prefix:"fa",iconName:"line",icon:[512,512,[],"","M0 0h24v24H0z M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"]},ie={prefix:"fa",iconName:"line",icon:[512,512,[],"","M0 0h24v24H0z M19 13H5v-2h14v2z"]},ce=o("NFeN"),ae=o("bSwM"),se=["table"],le=["loader"],de=["sidenav"];function be(e,t){if(1&e&&f.Qb(0,"app-inventory-order-form",37),2&e){var n=f.kc(),r=f.xc(3);f.pc("sidenav",r)("field",n.field)("status",n.status)("ngClass",1==n.show_product_popup?"inventory_width":"w-385")}}function fe(e,t){if(1&e&&f.Qb(0,"app-add-inventory-order",38),2&e){var n=f.kc(),r=f.xc(3);f.pc("sidenav",r)("ngClass",1==n.show_product_popup?"inventory_width":"w-385")}}function ue(e,t){if(1&e&&f.Qb(0,"app-addproduct-component",39),2&e){var n=f.kc(),r=f.xc(3);f.pc("sidenav",r)("orderDetails",n.orderInfoByPopUp)("orderedProductsFromAddInventory",n.orderedProductsFromAddInventory)("ngClass",1==n.show_product_popup?"addproduct_width":"")}}function me(e,t){1&e&&(f.Vb(0,"th",40),f.Mc(1,"DATE & TIME"),f.Ub())}function he(e,t){if(1&e&&(f.Vb(0,"td",41),f.Mc(1),f.Ub()),2&e){var n=t.$implicit;f.Cb(1),f.Oc(" ",n.created_date," ")}}function pe(e,t){1&e&&(f.Vb(0,"th",42),f.Mc(1,"ORDER SOURCE"),f.Ub())}function ge(e,t){if(1&e&&(f.Vb(0,"td",43),f.Mc(1),f.Ub()),2&e){var n=t.$implicit;f.Cb(1),f.Oc(" ",n.branch_info.branch_name," ")}}function ve(e,t){1&e&&(f.Vb(0,"th",40),f.Mc(1,"ORDERED BY"),f.Ub())}function _e(e,t){if(1&e&&(f.Vb(0,"td",44),f.Mc(1),f.Ub()),2&e){var n=t.$implicit;f.Cb(1),f.Oc(" ",n.ordered_by_details?n.ordered_by_details.barista_name:"ADMIN"," ")}}function Ce(e,t){1&e&&(f.Vb(0,"th",42),f.Mc(1,"RECIEVED BY"),f.Ub())}function ye(e,t){if(1&e&&(f.Vb(0,"td",45),f.Mc(1),f.Ub()),2&e){var n=t.$implicit;f.pc("ngClass",n.recieved_by_details?"":"text-center"),f.Cb(1),f.Oc(" ",n.recieved_by_details?n.recieved_by_details.barista_name:"-"," ")}}function xe(e,t){1&e&&(f.Vb(0,"th",42),f.Mc(1,"DATE DELIVERED"),f.Ub())}function we(e,t){if(1&e&&(f.Vb(0,"td",46),f.Mc(1),f.Ub()),2&e){var n=t.$implicit;f.pc("ngClass",n.delivery_date?"":"text-center"),f.Cb(1),f.Oc(" ",n.delivered_date?n.delivered_date:"-"," ")}}function Se(e,t){1&e&&(f.Vb(0,"th",47),f.Mc(1,"PRODUCTS ORDERED"),f.Ub())}function ke(e,t){if(1&e&&(f.Vb(0,"td",48),f.Mc(1),f.Ub()),2&e){var n=t.$implicit;f.Cb(1),f.Oc(" ",n.number_of_products," ")}}function Oe(e,t){1&e&&(f.Vb(0,"th",49),f.Mc(1,"STATUS"),f.Ub())}function Me(e,t){if(1&e&&(f.Vb(0,"div",54),f.Vb(1,"span"),f.Mc(2),f.Ub(),f.Ub()),2&e){var n=f.kc().$implicit;f.Cb(2),f.Nc(n.status)}}function Ue(e,t){if(1&e&&(f.Vb(0,"div",55),f.Vb(1,"span"),f.Mc(2),f.Ub(),f.Ub()),2&e){var n=f.kc().$implicit;f.Cb(2),f.Nc(n.status)}}function Ve(e,t){if(1&e&&(f.Vb(0,"div",56),f.Vb(1,"span"),f.Mc(2),f.Ub(),f.Ub()),2&e){var n=f.kc().$implicit;f.Cb(2),f.Nc("declained"==n.status?"declined":n.status)}}function Pe(e,t){if(1&e&&(f.Vb(0,"div",57),f.Vb(1,"span"),f.Mc(2),f.Ub(),f.Ub()),2&e){var n=f.kc().$implicit;f.Cb(2),f.Nc(n.status)}}function Be(e,t){if(1&e&&(f.Vb(0,"td",41),f.Kc(1,Me,3,1,"div",50),f.Kc(2,Ue,3,1,"div",51),f.Kc(3,Ve,3,1,"div",52),f.Kc(4,Pe,3,1,"div",53),f.Ub()),2&e){var n=t.$implicit;f.Cb(1),f.pc("ngIf","pending"==n.status),f.Cb(1),f.pc("ngIf","approved"==n.status),f.Cb(1),f.pc("ngIf","declined"==n.status||"declained"==n.status),f.Cb(1),f.pc("ngIf","delivered"==n.status)}}function Re(e,t){if(1&e){var n=f.Wb();f.Vb(0,"th",42),f.Vb(1,"button",58),f.gc("click",function(){return f.Ac(n),f.kc().addOrder()}),f.Vb(2,"mat-icon",59),f.Mc(3,"add_circle"),f.Ub(),f.Ub(),f.Ub()}}function Ie(e,t){if(1&e){var n=f.Wb();f.Vb(0,"td",48),f.Vb(1,"button",58),f.gc("click",function(){f.Ac(n);var e=t.index;return f.kc().openSideBar("order",e)}),f.Vb(2,"mat-icon",59),f.Mc(3,"edit"),f.Ub(),f.Ub(),f.Ub()}}function Ae(e,t){1&e&&f.Qb(0,"th",42)}function De(e,t){if(1&e){var n=f.Wb();f.Vb(0,"td",48),f.Vb(1,"mat-checkbox",60),f.gc("change",function(e){f.Ac(n);var r=t.index;return f.kc().handleSelection(e.checked,r)}),f.Ub(),f.Ub()}}function Ne(e,t){1&e&&f.Qb(0,"tr",61)}function Le(e,t){1&e&&f.Qb(0,"tr",62)}function Ee(e,t){1&e&&(f.Vb(0,"div",63),f.Mc(1," No Inventory Orders Found "),f.Ub())}var Qe=function(e){return{active:e}};function Fe(e,t){if(1&e){var n=f.Wb();f.Vb(0,"li",71),f.Vb(1,"a",68),f.gc("click",function(){f.Ac(n);var e=t.$implicit;return f.kc(3).getIntventoryOrders(e)}),f.Mc(2),f.Ub(),f.Ub()}if(2&e){var r=t.$implicit,o=f.kc(3);f.pc("ngClass",f.tc(2,Qe,o.current===r)),f.Cb(2),f.Nc(r)}}var je=function(e){return{disabled:e}};function Ke(e,t){if(1&e){var n=f.Wb();f.Vb(0,"ul",66),f.Vb(1,"li",67),f.Vb(2,"a",68),f.gc("click",function(){return f.Ac(n),f.kc(2).getIntventoryOrders(1)}),f.Vb(3,"i",69),f.Mc(4,"first_page"),f.Ub(),f.Ub(),f.Ub(),f.Vb(5,"li",67),f.Vb(6,"a",68),f.gc("click",function(){f.Ac(n);var e=f.kc(2);return e.getIntventoryOrders(e.current-1)}),f.Vb(7,"i",69),f.Mc(8,"navigate_before"),f.Ub(),f.Ub(),f.Ub(),f.Kc(9,Fe,3,4,"li",70),f.Vb(10,"li",67),f.Vb(11,"a",68),f.gc("click",function(){f.Ac(n);var e=f.kc(2);return e.getIntventoryOrders(e.current+1)}),f.Vb(12,"i",69),f.Mc(13,"navigate_next"),f.Ub(),f.Ub(),f.Ub(),f.Vb(14,"li",67),f.Vb(15,"a",68),f.gc("click",function(){f.Ac(n);var e=f.kc(2);return e.getIntventoryOrders(e.totalPages)}),f.Vb(16,"i",69),f.Mc(17,"last_page"),f.Ub(),f.Ub(),f.Ub(),f.Ub()}if(2&e){var r=f.kc(2);f.Cb(1),f.pc("ngClass",f.tc(5,je,1===r.current)),f.Cb(4),f.pc("ngClass",f.tc(7,je,1===r.current)),f.Cb(4),f.pc("ngForOf",r.pages),f.Cb(1),f.pc("ngClass",f.tc(9,je,r.current===r.totalPages)),f.Cb(4),f.pc("ngClass",f.tc(11,je,r.current===r.totalPages))}}function ze(e,t){if(1&e&&(f.Vb(0,"nav",64),f.Kc(1,Ke,18,13,"ul",65),f.Ub()),2&e){var n=f.kc();f.Cb(1),f.pc("ngIf",n.pages)}}var Te,qe,He,We,Je=[{path:"",component:(Te=function(){function t(n,r,o){e(this,t),this.common_service=n,this.apiServices=r,this.ref=o,this.current=1,this.totalPages=1,this.endPage=1,this.startPage=1,this.status="",this.isLoading=!1,this.field="",this.createOrder=!1,this.dates=null,this.subscribtion=null,this.loadsh=l,this.orderInfoByPopUp=null,this.reorder=!1,this.data=10,this.orderedProductsFromAddInventory=[],this.url_array=[],this.faPencilAlt=s.w,this.inventory_orders=[],this.selectedRowsForReport=[],this.display_coloums=["date_time","order_source","ordered_by","recieved_by","date_delivered","product_ordered","status","check","action"]}return n(t,[{key:"ngAfterViewInit",value:function(){this.loader.nativeElement.style.width=this.table.nativeElement.clientWidth+"px",this.enableSubscription()}},{key:"enableSubscription",value:function(){var e=this;this.common_service.reOrderSuccess.subscribe(function(t){1==t&&e.initalize(t)}),this.common_service.commonEmitter.subscribe(function(t){e.currentTime=b().format("HH:mm:ss"),console.log(e.currentTime),e.data=20;var n=localStorage.getItem("selectedBranch")?JSON.parse(localStorage.getItem("selectedBranch")||""):null,r=0==((null==n?void 0:n.length)||0)?null:null==n?void 0:n.map(function(e){return e._id});r=0==(null==n?void 0:n.length)?null:r;var o=localStorage.getItem("selectedDate")?JSON.parse(localStorage.getItem("selectedDate")||""):null;null!=r&&null!=o?e.filter_order_dates_branch(o,r):null==r&&null==o?e.get_orders():null==o?e.filter_orders_branches(r):e.filter_order_dates(o)}),this.common_service.choose_date.subscribe(function(t){e.selectedRowsForReport=[];var n=localStorage.getItem("selectedBranch")?JSON.parse(localStorage.getItem("selectedBranch")||""):null,r=null==n?void 0:n.map(function(e){return e._id});r=0==(null==n?void 0:n.length)?null:r,e.dates=t,0==(null==r?void 0:r.length)?e.filter_order_dates(t):e.filter_order_dates_branch(t,r)}),this.common_service.url_updated.subscribe(function(t){e.url_array=t}),this.common_service.exportClicked.subscribe(function(t){if("products"==e.url_array[1]&&"inventory-orders"==e.url_array[2]){var n=e.loadsh.map(e.inventory_orders,function(t){return e.loadsh.pick(t,["created_date","branch_info.branch_name","ordered_by_details.barista_name","recieved_by_details.barista_name","delivered_date","number_of_products","status"])});e.downloadFile(n)}}),this.common_service.select_branch.subscribe(function(t){e.selectedRowsForReport=[];var n=localStorage.getItem("selectedBranch")?JSON.parse(localStorage.getItem("selectedBranch")||""):null,r=null==n?void 0:n.map(function(e){return e._id});r=0==n.length?null:r,e.dates=localStorage.getItem("selectedDate")?JSON.parse(localStorage.getItem("selectedDate")||""):null,console.log(e.dates,r),null!=e.dates&&null!=e.dates?0==(null==r?void 0:r.length)?e.filter_order_dates(e.dates):e.filter_order_dates_branch(e.dates,r):0==r.length?e.get_orders():e.filter_orders_branches(r)}),console.log(this.currentTime,"outside"),this.common_service.openInventoryForm.subscribe(function(t){e.orderInfoByPopUp=t,e.show_product_popup=!0,console.log(e.show_product_popup)}),this.common_service.closeInventoryForm.subscribe(function(t){e.close_pop_up=!0,e.show_product_popup=!1,console.log(e.close_pop_up)}),this.common_service.updateSyningCountEmitter.subscribe(function(t){e.orderedProductsFromAddInventory=t})}},{key:"filter_orders_branches",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.isLoading=!0,this.apiServices.get_branch_inventory_orders({branch_id:e}).subscribe(function(e){t.inventory_orders=e.data.order_details,t.isLoading=!1,n&&t.push()})}},{key:"addOrder",value:function(){this.createOrder=!0,this.sidenav.toggle()}},{key:"filter_order_dates",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.isLoading=!0,this.apiServices.get_branch_inventory_orders({start:e.start,end:e.end}).subscribe(function(e){t.inventory_orders=e.data.order_details,t.isLoading=!1,n&&t.push()})}},{key:"filter_order_dates_branch",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.isLoading=!0,this.apiServices.get_branch_inventory_orders({start:e.start,end:e.end,branch_id:t}).subscribe(function(e){n.inventory_orders=e.data.order_details,n.isLoading=!1,r&&n.push()})}},{key:"handleSelection",value:function(e,t){var n=this;e?this.selectedRowsForReport.push(this.inventory_orders[t]):this.selectedRowsForReport.splice(this.selectedRowsForReport.findIndex(function(e){return e._id==n.inventory_orders[t]._id}),1),console.log(this.selectedRowsForReport)}},{key:"ngOnInit",value:function(){var e=this;this.initalize(),this.pages=Array.from(Array(this.endPage+1-this.startPage).keys()).map(function(t){return e.startPage+t}),this.get_catelouges()}},{key:"get_catelouges",value:function(){var e=this;this.isLoading=!0,this.apiServices.getCatelougeAll().subscribe(function(t){t.success?(console.log(t),e.isLoading=!1,e.catelouges=t.data.inventories):e.common_service.showAlert(t.message)})}},{key:"initalize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.innerWidth=window.innerWidth;var t,n=localStorage.getItem("selectedBranch")?JSON.parse(localStorage.getItem("selectedBranch")||""):null;(null==n?void 0:n._id)?(localStorage.setItem("selectedBranch",JSON.stringify([])),t=null):(t=null==n?void 0:n.map(function(e){return e._id}),t=0==(null==n?void 0:n.length)?null:t);var r=localStorage.getItem("selectedDate")?JSON.parse(localStorage.getItem("selectedDate")||""):null;null!=t&&null!=r?this.filter_order_dates_branch(r,t,e):null==t&&null==r?this.get_orders(e):null==r?this.filter_orders_branches(t,e):this.filter_order_dates(r,e)}},{key:"get_orders",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.isLoading=!0,this.apiServices.getInventoryOrders(null).subscribe(function(n){e.inventory_orders=n.data.order_details,e.isLoading=!1,t&&e.push()})}},{key:"getIntventoryOrders",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;console.log(e)}},{key:"onResize",value:function(e){this.innerWidth=window.innerWidth}},{key:"openSideBar",value:function(e,t,n){this.createOrder=!1,this.field=e,this.status=this.inventory_orders[t].status,this.row=t,this.sidenav.toggle()}},{key:"push",value:function(){this.common_service.inventoryOrder.emit(this.inventory_orders[this.row])}},{key:"closed",value:function(){this.common_service.closedSideNav.emit(),this.show_product_popup=!1}},{key:"downloadFile",value:function(e){return Object(a.a)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t,n,r,o,i,c,a,s=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:console.log(this.selectedRowsForReport),t=0,n=0,this.selectedRowsForReport=this.selectedRowsForReport.length>0?this.selectedRowsForReport:this.inventory_orders,o=[],(r=[]).push({Reference:"REFERENCE",Name_of_product:"NAME OF PRODUCT",Quantity:"QUANTITY",Unit:"UNIT",Unit_price:"PRICE",Total_price:"TOTAL PRICE"}),this.selectedRowsForReport.forEach(function(e,i){var c;null===(c=e.ordered_items)||void 0===c||c.forEach(function(i){var c=s.catelouges.findIndex(function(e){return e._id==i.inventory_id});console.log(s.catelouges,c,i);var a=s.catelouges[c<0?0:c].price,l={Reference:i.refernce,Name_of_product:i.inventory_name,Quantity:Number(i.qty),Unit:i.unit,Unit_price:a,Total_price:Number(i.qty)*Number(a)},d=r.map(function(e){return e.Reference});if(t+=Number(i.qty),n+=Number(i.qty)*Number(a),d.includes(i.refernce)){var b=d.indexOf(i.refernce);r[b].Quantity+=Number(i.qty),r[b].Total_price+=Number(i.qty)*Number(a)}else r.push(l);o.includes(e.branch_info.branch_name)||o.push(e.branch_info.branch_name)})}),r.push({Reference:"",Name_of_product:"",Quantity:"",Unit:"",Unit_price:"",Total_price:""}),r.push({Reference:"TOTAL",Name_of_product:"",Quantity:t,Unit:"",Unit_price:"",Total_price:n}),i=o.join(","),console.log(r,i),c=d.utils.book_new(),a=d.utils.json_to_sheet(r),d.utils.book_append_sheet(c,a,"SYRA__INVENTORY_REPORT"),d.utils.sheet_add_aoa(a,[[i,"","","","",""]],{origin:0}),d.writeFile(c,i+"INVENTORY-REPORT_"+b().format("DD-MM-YYYY")+".xls"),this.common_service.export_success.emit();case 9:case"end":return e.stop()}},e,this)}))}}]),t}(),Te.\u0275fac=function(e){return new(e||Te)(f.Pb(u.a),f.Pb(m.a),f.Pb(f.h))},Te.\u0275cmp=f.Jb({type:Te,selectors:[["app-inventory-orders"]],viewQuery:function(e,t){var n;1&e&&(f.Rc(se,!0),f.Rc(le,!0),f.Rc(de,!0)),2&e&&(f.wc(n=f.hc())&&(t.table=n.first),f.wc(n=f.hc())&&(t.loader=n.first),f.wc(n=f.hc())&&(t.sidenav=n.first))},hostBindings:function(e,t){1&e&&f.gc("resize",function(e){return t.onResize(e)},!1,f.zc)},decls:46,vars:13,consts:[[1,"container","wrapper"],[1,"bg-transparent"],[2,"background-color","#f0f0f0",3,"mode","position","ngClass","opened","closed"],["sidenav",""],[1,"d-lg-flex","column-reverse"],[3,"sidenav","field","status","ngClass",4,"ngIf"],[3,"sidenav","ngClass",4,"ngIf"],[3,"sidenav","orderDetails","orderedProductsFromAddInventory","ngClass",4,"ngIf"],[1,"mb-5"],[1,"mx-4","table-w-350-scroll"],["table",""],[1,"bg-white","top-60px","justify-content-center","align-items-center","z-index-1","alpha50","content","position-absolute","left-0","w100-48px","h76-56",3,"ngClass"],["loader",""],["mat-table","",1,"syra-table","w-100",3,"dataSource"],["matColumnDef","date_time"],["mat-header-cell","","class","p-24",4,"matHeaderCellDef"],["mat-cell","","class","p-24",4,"matCellDef"],["matColumnDef","order_source"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","ordered_by"],["mat-cell","","class","p-24","style","text-transform: capitalize;",4,"matCellDef"],["matColumnDef","recieved_by"],["mat-cell","","style","text-transform: capitalize;",3,"ngClass",4,"matCellDef"],["matColumnDef","date_delivered"],["mat-cell","","class","p-24",3,"ngClass",4,"matCellDef"],["matColumnDef","product_ordered"],["mat-header-cell","","style","width: 25px;",4,"matHeaderCellDef"],["mat-cell","","class","text-center",4,"matCellDef"],["matColumnDef","status"],["mat-header-cell","","class","p-24 pr-0",4,"matHeaderCellDef"],["matColumnDef","action"],["matColumnDef","check"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","","class","p-0",4,"matRowDef","matRowDefColumns"],["class","no-items-table bg-white h76-60px",4,"ngIf"],["aria-label","Page navigation example","class","mt-2 mr-auto d-none",4,"ngIf"],[3,"sidenav","field","status","ngClass"],[3,"sidenav","ngClass"],[3,"sidenav","orderDetails","orderedProductsFromAddInventory","ngClass"],["mat-header-cell","",1,"p-24"],["mat-cell","",1,"p-24"],["mat-header-cell",""],["mat-cell",""],["mat-cell","",1,"p-24",2,"text-transform","capitalize"],["mat-cell","",2,"text-transform","capitalize",3,"ngClass"],["mat-cell","",1,"p-24",3,"ngClass"],["mat-header-cell","",2,"width","25px"],["mat-cell","",1,"text-center"],["mat-header-cell","",1,"p-24","pr-0"],["class","px-2 bg-pending rounded-10px text-truncate d-flex justify-content-center",4,"ngIf"],["class","px-2 bg-approved rounded-10px d-flex justify-content-center  text-truncate",4,"ngIf"],["class","px-2 bg-declained rounded-10px d-flex justify-content-center text-truncate",4,"ngIf"],["class","px-2  bg-delivered rounded-10px d-flex justify-content-center text-truncate",4,"ngIf"],[1,"px-2","bg-pending","rounded-10px","text-truncate","d-flex","justify-content-center"],[1,"px-2","bg-approved","rounded-10px","d-flex","justify-content-center","text-truncate"],[1,"px-2","bg-declained","rounded-10px","d-flex","justify-content-center","text-truncate"],[1,"px-2","bg-delivered","rounded-10px","d-flex","justify-content-center","text-truncate"],[1,"border-0","bg-transparent","edit_btn_act","pr-1",3,"click"],["aria-hidden","false","aria-label","Example home icon",1,"text-dark","font-size-20"],[1,"w-100","h-17px","my-checkbox_select",3,"change"],["mat-header-row",""],["mat-row","",1,"p-0"],[1,"no-items-table","bg-white","h76-60px"],["aria-label","Page navigation example",1,"mt-2","mr-auto","d-none"],["class","pagination justify-content-end f-wrap m-0",4,"ngIf"],[1,"pagination","justify-content-end","f-wrap","m-0"],[1,"page-item",3,"ngClass"],["mdbWavesEffect","",1,"page-link",3,"click"],[1,"material-icons"],["class","page-item mt-1",3,"ngClass",4,"ngFor","ngForOf"],[1,"page-item","mt-1",3,"ngClass"]],template:function(e,t){1&e&&(f.Vb(0,"div",0),f.Vb(1,"mat-sidenav-container",1),f.Vb(2,"mat-sidenav",2,3),f.gc("opened",function(){return t.push()})("closed",function(){return t.closed()}),f.Vb(4,"div",4),f.Kc(5,be,1,4,"app-inventory-order-form",5),f.Kc(6,fe,1,2,"app-add-inventory-order",6),f.Kc(7,ue,1,4,"app-addproduct-component",7),f.Ub(),f.Ub(),f.Vb(8,"mat-sidenav-content",8),f.Vb(9,"div",9,10),f.Vb(11,"div",11,12),f.Mc(13," Loading... "),f.Ub(),f.Vb(14,"table",13),f.Tb(15,14),f.Kc(16,me,2,0,"th",15),f.Kc(17,he,2,1,"td",16),f.Sb(),f.Tb(18,17),f.Kc(19,pe,2,0,"th",18),f.Kc(20,ge,2,1,"td",19),f.Sb(),f.Tb(21,20),f.Kc(22,ve,2,0,"th",15),f.Kc(23,_e,2,1,"td",21),f.Sb(),f.Tb(24,22),f.Kc(25,Ce,2,0,"th",18),f.Kc(26,ye,2,2,"td",23),f.Sb(),f.Tb(27,24),f.Kc(28,xe,2,0,"th",18),f.Kc(29,we,2,2,"td",25),f.Sb(),f.Tb(30,26),f.Kc(31,Se,2,0,"th",27),f.Kc(32,ke,2,1,"td",28),f.Sb(),f.Tb(33,29),f.Kc(34,Oe,2,0,"th",30),f.Kc(35,Be,5,4,"td",16),f.Sb(),f.Tb(36,31),f.Kc(37,Re,4,0,"th",18),f.Kc(38,Ie,4,0,"td",28),f.Sb(),f.Tb(39,32),f.Kc(40,Ae,1,0,"th",18),f.Kc(41,De,2,0,"td",28),f.Sb(),f.Kc(42,Ne,1,0,"tr",33),f.Kc(43,Le,1,0,"tr",34),f.Ub(),f.Kc(44,Ee,2,0,"div",35),f.Kc(45,ze,2,1,"nav",36),f.Ub(),f.Ub(),f.Ub(),f.Ub()),2&e&&(f.Cb(2),f.pc("mode","over")("position","end")("ngClass",1==t.show_product_popup?"w-500":t.innerWidth<=576?"w-100":"w-385"),f.Cb(3),f.pc("ngIf",!t.createOrder),f.Cb(1),f.pc("ngIf",t.createOrder),f.Cb(1),f.pc("ngIf",t.show_product_popup),f.Cb(4),f.pc("ngClass",t.isLoading?"d-flex":"d-none"),f.Cb(3),f.pc("dataSource",t.inventory_orders),f.Cb(28),f.pc("matHeaderRowDef",t.display_coloums)("matHeaderRowDefSticky",!0),f.Cb(1),f.pc("matRowDefColumns",t.display_coloums),f.Cb(1),f.pc("ngIf",0==t.inventory_orders.length&&1!=t.isLoading),f.Cb(1),f.pc("ngIf",t.inventory_orders.length>15&&1!=t.isLoading))},directives:[h.b,h.a,i.j,i.l,h.c,p.n,p.c,p.i,p.b,p.k,p.m,I,Y,ne,p.h,p.a,ce.a,ae.a,p.j,p.l,i.k],styles:['@font-face{font-family:HelveticaNeue-Bold;font-style:normal;font-weight:400;src:local("HelveticaNeue-Bold"),url("Helvetica Neu Bold.61acdee6f288cddccf23.ttf") format("ttf")}@font-face{font-family:CerebriSans-Bold;font-style:normal;font-weight:400;src:local("CerebriSans-Bold"),url(CerebriSans-Bold.b28d46a00415bec63bba.ttf) format("ttf");src:local("CerebriSans-Bold"),url(CerebriSans-Bold.f48e05c76db5e6bd676c.eot) format("eot");src:local("CerebriSans-Bold"),url(CerebriSans-Bold.1b8ded389d0dc424b19b.svg) format("svg");src:local("CerebriSans-Bold"),url(CerebriSans-Bold.1b4400b13ebd711dd3e8.woff) format("woff");src:local("CerebriSans-Bold"),url(CerebriSans-Bold.1b89f96de9e78fd26a7f.woff2) format("woff2")}@font-face{font-family:\\ CerebriSans-semibold;font-style:normal;font-weight:400;src:local("CerebriSans-Bold"),url(CerebriSans-SemiBold.dcda3674ac76f4e31e87.ttf) format("ttf");src:local("CerebriSans-Bold"),url(CerebriSans-SemiBold.8c2b25fda64ba8de398a.eot) format("eot");src:local("CerebriSans-Bold"),url(CerebriSans-SemiBold.d4680810013431cbe6c7.svg) format("svg");src:local("CerebriSans-Bold"),url(CerebriSans-SemiBold.700f305197d6f163d348.woff) format("woff");src:local("CerebriSans-Bold"),url(CerebriSans-SemiBold.29097270d5f0e9003fd4.woff2) format("woff2")}@font-face{font-family:CerebriSans-Light;font-style:normal;font-weight:400;src:local("CerebriSans-Bold"),url(CerebriSans-Light.ddb81c4966caddeb5524.ttf) format("ttf");src:local("CerebriSans-Bold"),url(CerebriSans-Light.1e4f0f37d8ed20e51e27.eot) format("eot");src:local("CerebriSans-Bold"),url(CerebriSans-Light.efa3b6fb5acdd7fa23ab.svg) format("svg");src:local("CerebriSans-Bold"),url(CerebriSans-Light.650c547e86d77193b2d0.woff) format("woff");src:local("CerebriSans-Bold"),url(CerebriSans-Light.93b3eb2ec96f14eca31e.woff2) format("woff2")}@font-face{font-family:CerebriSans-Regular;font-style:normal;font-weight:400;src:local("CerebriSans-Regular"),url(CerebriSans-Regular.da1eaafe42c93475b338.ttf) format("ttf");src:local("CerebriSans-Regular"),url(CerebriSans-Regular.ccb7af1c430bd224cb88.eot) format("eot");src:local("CerebriSans-Regular"),url(CerebriSans-Regular.8a18b1b14a235efe141d.svg) format("svg");src:local("CerebriSans-Regular"),url(CerebriSans-Regular.81bf15fd01ef8a22e704.woff) format("woff");src:local("CerebriSans-Regular"),url(CerebriSans-Regular.a9f198f5da5b6fe108ed.woff2) format("woff2")}.wrapper[_ngcontent-%COMP%]{margin-top:130px;font-family:CerebriSans-Bold}.table-w-350-scroll[_ngcontent-%COMP%]{height:76vh!important;overflow:auto}.h76-60px[_ngcontent-%COMP%]{height:calc(76vh - 60px);overflow:hidden}.bg-pending[_ngcontent-%COMP%]{background-color:#ab9cea}.bg-approved[_ngcontent-%COMP%]{background-color:#abe7c4}.bg-declained[_ngcontent-%COMP%]{background-color:red}.bg-delivered[_ngcontent-%COMP%]{background-color:#d90368}.p-5px[_ngcontent-%COMP%]{padding:5px}.rounded-10px[_ngcontent-%COMP%]{border-radius:10px}.w-385[_ngcontent-%COMP%]{width:450px}.w-500[_ngcontent-%COMP%]{width:65vw;transition:.1s ease}.column-reverse[_ngcontent-%COMP%]{flex-direction:row-reverse!important}.d-none[_ngcontent-%COMP%]{display:none!important}.inventory_width[_ngcontent-%COMP%]{width:450px!important}.addproduct_width[_ngcontent-%COMP%]{width:calc(100% - 450px)!important}@media (max-width:992px){.inventory_width[_ngcontent-%COMP%]{display:none!important}.addproduct_width[_ngcontent-%COMP%]{width:unset!important}.w-500[_ngcontent-%COMP%]{width:100%!important}}  .my-checkbox_select .mat-checkbox-label,   .my-checkbox_select .mat-checkbox-layout{width:100%!important}  .my-checkbox_select .mat-checkbox-inner-container{width:17.5px!important;height:17.5px!important;margin-right:0!important;box-shadow:0 2.5px 2.5px 0 rgba(0,0,0,.16)!important}.mat-checkbox-frame[_ngcontent-%COMP%],   .my-checkbox_select .mat-checkbox-background{border-radius:5px!important}.mat-accent[_ngcontent-%COMP%]   .mat-pseudo-checkbox-checked[_ngcontent-%COMP%], .mat-accent[_ngcontent-%COMP%]   .mat-pseudo-checkbox-indeterminate[_ngcontent-%COMP%], .mat-checkbox-checked.mat-accent[_ngcontent-%COMP%]   .mat-checkbox-background[_ngcontent-%COMP%], .mat-checkbox-indeterminate[_ngcontent-%COMP%]   .mat-checkbox-background[_ngcontent-%COMP%], .mat-pseudo-checkbox-checked[_ngcontent-%COMP%], .mat-pseudo-checkbox-indeterminate[_ngcontent-%COMP%],   .mat-checkbox-indeterminate.mat-accent .mat-checkbox-background,   .my-checkbox_select.mat-checkbox-checked.mat-accent .mat-checkbox-background,   .my-checkbox_select .mat-ripple-element{background-color:transparent!important}  .my-checkbox_select .mat-checkbox-checkmark-path{stroke:#000!important}']}),Te)}],Ye=((qe=function t(){e(this,t)}).\u0275mod=f.Nb({type:qe}),qe.\u0275inj=f.Mb({factory:function(e){return new(e||qe)},imports:[[c.f.forChild(Je)],c.f]}),qe),$e=o("Qu3c"),Xe=((We=function t(){e(this,t)}).\u0275mod=f.Nb({type:We}),We.\u0275inj=f.Mb({factory:function(e){return new(e||We)},imports:[[]]}),We),Ge=((He=function t(){e(this,t)}).\u0275mod=f.Nb({type:He}),He.\u0275inj=f.Mb({factory:function(e){return new(e||He)},imports:[[i.c,Ye,p.p,Xe,$e.b,v.b,h.d,ce.b,ae.b,N.d,L.b]]}),He)},mCIx:function(t,r,o){"use strict";o.d(r,"a",function(){return a});var i=o("fXoL"),c=o("1kSV"),a=function(){var t=function(){function t(n,r){e(this,t),this.modalService=n,this.modal=r}return n(t,[{key:"ngOnInit",value:function(){}}]),t}();return t.\u0275fac=function(e){return new(e||t)(i.Pb(c.c),i.Pb(c.b))},t.\u0275cmp=i.Jb({type:t,selectors:[["app-delete"]],decls:12,vars:0,consts:[[1,"modal-header"],[1,"modal-title"],[1,"modal-body"],[1,"modal-footer"],["type","button",1,"btn","btn-light",3,"click"],["type","button",1,"btn","btn-danger",3,"click"]],template:function(e,t){1&e&&(i.Vb(0,"div"),i.Vb(1,"div",0),i.Vb(2,"h4",1),i.Mc(3,"Delete"),i.Ub(),i.Ub(),i.Vb(4,"div",2),i.Vb(5,"p"),i.Mc(6,"Do you really want to delete?"),i.Ub(),i.Ub(),i.Vb(7,"div",3),i.Vb(8,"button",4),i.gc("click",function(){return t.modal.dismiss()}),i.Mc(9,"Cancel"),i.Ub(),i.Vb(10,"button",5),i.gc("click",function(){return t.modal.close()}),i.Mc(11,"Delete"),i.Ub(),i.Ub(),i.Ub())},styles:[""]}),t}()}}])}();